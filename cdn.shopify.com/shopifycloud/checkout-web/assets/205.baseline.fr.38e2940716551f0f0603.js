"use strict";(self.webpackChunkcheckout_web=self.webpackChunkcheckout_web||[]).push([[205],{59572:function(e,t,r){r.d(t,{Um:function(){return ft},kS:function(){return pt},kZ:function(){return gt},bE:function(){return mt},g:function(){return vt}});var n=r(63366),a=r(98906),o=r(4942),s=r(87462),i=r(29439),d=r(43144),l=r(60136),u=r(38192),c=(r(92222),r(21703),r(96647),r(21249),r(41539),r(39714),r(19601),r(34553),r(47042),r(86535),r(99244),r(47941),r(26699),r(32023),r(57658),r(69826),r(91058),r(57327),r(26833),r(59748)),p=r(94184),f=r.n(p),m=r(93211),v=r(9377),g=r(57884),y=r(13866),_=r(76304),b=r(98508),h=r(51224),C=r(95920),E=r(90961),z=r(1791),w=r(86749),k=r(39147),A=r(52376),S=r(13731),I=r(39624),Z=r(15926),T=r(66259),x=r(8792);function V(e){return/[0-9\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\uff10-\uff19]/.test(e)}r(74916),r(77601);var q=r(3182),P=r(15249),N=r(13194),L=r(70578),D=r(1335),O=r(71305),R=r(1531),M=r(39827),U=r(73967),B=r(65467),F=r(76874),j=r(93433),G=r(74165),K=r(15861),J=(r(54747),r(69720),r(91038),r(78783),r(66992),r(33948),r(62586)),W=r(55399),$=r(57581),Q=r(30316),H=r(28593);function Y(e){var t=e.fieldValidationResult,r=e.matchingStrategy,n=e.address,a=e.addressType,o=e.trackAddressValidation;t.forEach((function(e,t){"validation-api"===e.source&&o(e.id,n,e.concern,r,e.suggestion,a,t)}))}var X=r(4152),ee=r(1511),te=r(8428),re={Suggestion:"vv0g120"},ne={WarningIconWrapper:"TkcBT"};function ae(e){var t,r,n,a,o,s,i,d=e.address,l=e.addressErrors,u=e.addressSuggestions,p=e.suggestion,f=e.field,g=e.addressType,y=e.validationId,_=(0,h.Dv)(d),b=vt(f,d),C=(0,m.q)(),E=(0,F.Zu)(u,l).resetAddressFieldSuggestions,z=(0,F.kO)(l).resetAddressFieldErrors,w=(n=(0,U.a)(),a=(0,M._v)(),o=(0,D.Lk)(),s=(0,N.L)().id,i=(0,v.b)(),(0,c.useCallback)((function(e,t,r,d,l){if(n){var u,c,p=(null==a||null==(u=a.value)||null==(c=u.defaultAttributes)?void 0:c.uniqToken)||"",f={schemaId:B.gn.AddressValidationSuggestionAcceptance,payload:{shopId:parseInt((0,L.Bp)(s),10),checkoutToken:o.checkoutSessionIdentifier||"",uniqueToken:p,locale:i,country:e,validationId:t,suggestionId:r,acceptedField:d,context:"shipping"===l?"Shipping address":"Billing address"}};n.record(f)}}),[i,n,o.checkoutSessionIdentifier,s,null==a||null==(t=a.value)||null==(r=t.defaultAttributes)?void 0:r.uniqToken])),k=function(){null!=p&&p.address&&(w(_.countryCode||"",y,p.id,f,g),b(Object.assign(Object.assign({},_),null==p?void 0:p.address)),E(f),z(f))},A=function(e){var t;return t="zoneCode"===e?""+(null==p?void 0:p.address.zone):""+(null==p?void 0:p.address[e]),c.default.createElement("button",{className:re.Suggestion,onClick:k},t)}(f),S=(null==p?void 0:p.message)+". ",I=null==p?void 0:p.type;return c.default.createElement(c.default.Fragment,null,"warning"===I?c.default.createElement(X.T,{columns:["auto","fill"],spacing:"small300"},c.default.createElement("div",{className:ne.WarningIconWrapper},c.default.createElement(ee.JO,{source:"info"})),c.default.createElement(te.x,null,C("field_errors.address_suggestion_did_you_mean_html",{html:A},{options:{noWrapElementReplacements:!0}},"Vous voulez dire %{html} ?"))):c.default.createElement(c.default.Fragment,null,S,C("field_errors.address_suggestion_did_you_mean_html",{html:A},{options:{noWrapElementReplacements:!0}},"Vous voulez dire %{html} ?")))}var oe=function(e){return Object.assign({origin:"validation-api"},e)};function se(e,t,r,n,a,o,s,i,d){Y({address:t,fieldValidationResult:e,trackAddressValidation:o,addressType:d,matchingStrategy:i}),e.forEach((function(e,o){if("validation-api"===e.source){if(s)if(e.suggestion){var i=e.id,l=e.suggestion,u=e.type,p=c.default.createElement(ae,{validationId:i,address:t,addressErrors:r,addressSuggestions:n,suggestion:l,field:o,addressType:d});a.write(r[o],oe({value:p,type:u,textValue:"Invalid address"})),a.write(n[o],l)}else e.error&&("warning"===e.type?(a.write(r[o],oe({value:c.default.createElement(X.T,{columns:["auto","fill"],spacing:"small300"},c.default.createElement(ee.JO,{source:"info"}),c.default.createElement(te.x,null,e.error)),type:"warning",textValue:"Invalid address"})),a.write(n[o],{type:"warning",message:e.error})):a.write(r[o],oe({type:"error",value:e.error,textValue:e.error})))}else a.write(r[o],{message:e.error,origin:"client",type:"on-submit"})}))}var ie=r(6400),de=(r(51532),r(38862),r(68184));var le=["US"];function ue(e){var t=e.addressValidationAPIEnabled,r=e.errors,n=e.addressType,a=e.countryCode;return t&&0===r.size&&le.includes(a||"")&&"shipping"===n}r(85827),r(70189);var ce=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).name="AddressValidationError",t}return(0,l.Z)(t,e),(0,d.Z)(t)}((0,u.Z)(Error));function pe(e){switch(e){case"address1":case"street":return"address1";case"address2":return"address2";case"country_code":case"countryCode":case"country":return"countryCode";case"zip":return"postalCode";case"province":case"province_code":case"provinceCode":return"zoneCode";case"city":return"city";case"phone":return"phone";default:throw new ce("Unknown Address Component - "+e)}}function fe(e){var t=new Map([["countryCode",0],["coordinates",2],["zoneCode",4],["postalCode",8],["address1",16],["address2",32],["city",64]]),r=function(e,r){var n;return e|(null!=(n=t.get(pe(r)))?n:0)},n=e.reduce((function(e,t){var n;if(null==t.fieldNames)return[];var a=t.fieldNames.reduce(r,0);return e[a]=function(e,t){if(!e&&t)return t;if(e&&!t)return e;if(e.type!==t.type)return"error"===e.type?e:t;switch(e.type){case"error":return e.typeLevel<t.typeLevel?e:t;case"warning":return e.typeLevel>t.typeLevel?e:t}}(null!=(n=e[a])?n:void 0,t),e}),{});return(0,j.Z)(new Set(Object.values(n)))}function me(e){var t,r,n,a,o,s,i;return void 0===e?{}:{address1:null!=(t=e.address1)?t:void 0,address2:null!=(r=e.address2)?r:void 0,city:null!=(n=e.city)?n:void 0,zoneCode:null!=(a=e.provinceCode)?a:void 0,zone:null!=(o=e.province)?o:void 0,postalCode:null!=(s=e.zip)?s:void 0,countryCode:null!=(i=e.countryCode)?i:void 0}}var ve=r(23084);function ge(e,t){switch(e){case"address_zip_invalid_for_country":return"shipping"===t?ve.j.DeliveryInvalidPostalCodeForCountry:ve.j.PaymentsInvalidPostalCodeForCountry;case"address_zip_blank":return"shipping"===t?ve.j.DeliveryPostalCodeRequired:ve.j.PaymentsPostalCodeRequired;case"address_zip_invalid_for_country_and_province":return"shipping"===t?ve.j.DeliveryInvalidPostalCodeForZone:ve.j.PaymentsInvalidPostalCodeForZone;case"address_zip_contains_emojis":return"shipping"===t?ve.j.DeliveryPostalCodeContainsEmojis:ve.j.PaymentsPostalCodeContainsEmojis}return"shipping"===t?"DELIVERY_POSTAL_CODE_BLANK":"PAYMENTS_POSTAL_CODE_BLANK"}var ye=function(e){function t(t){var r;(r=e.call(this,"AddressValidationServiceError")||this).name="AddressValidationServiceError",r.errors=void 0;var n=["Not allowed"];return r.errors=t.map((function(e){return e.message})).filter((function(e){return!n.includes(e)})),r}return(0,l.Z)(t,e),(0,d.Z)(t)}((0,u.Z)(Error)),_e=r(87979),be=r(50716),he=r(47501),Ce=r(59124);var Ee=r(21545),ze=r(43110),we=r(21899);function ke(e){var t,r,n,a=e.address,o=e.addressOptions,s=e.inPaymentContext,d=void 0!==s&&s,l=e.disabled,u=void 0!==l&&l,p=(0,h.Dv)(a),f=(0,m.q)(),v=(r=a,n=(0,h.xP)(),function(e){var t=r.fields,a=t.firstName,o=t.lastName,s=t.company,i=t.address1,d=t.address2,l=t.city,u=t.countryCode,c=t.postalCode,p=t.zoneCode,f=t.phone,m=t.coordinates;n.write(a,e.firstName),n.write(o,e.lastName),n.write(s,e.company),n.write(i,e.address1),n.write(d,e.address2),n.write(l,e.city),n.write(u,e.countryCode),n.write(c,e.postalCode),n.write(p,e.zoneCode),n.write(f,e.phone),n.write(m,e.coordinates)}),g=null==(t=o.find((function(e){return(0,z.LD)(p,e.address)})))?void 0:t.value,y=(0,c.useRef)(!1),_=(0,c.useMemo)((function(){return[].concat((0,j.Z)(o),[{label:f("contact.new_address_label","Utiliser une nouvelle adresse"),value:""+o.length,address:(0,we.f0)({countryCode:a.fields.countryCode.init,zoneCode:a.fields.zoneCode.init})}])}),[o,f,a.fields.countryCode.init,a.fields.zoneCode.init]),b=_[_.length-1].value,C=(0,c.useState)(g&&!d?g:b),E=(0,i.Z)(C,2),w=E[0],k=E[1];if(d&&!y.current){var A=_[parseInt(w,10)].address;v(A)}return(0,c.useEffect)((function(){var e,t=null==(e=o.find((function(e){return(0,z.LD)(p,e.address)})))?void 0:e.value;k(t||b)}),[p,o,b]),(0,c.useEffect)((function(){y.current=!0}),[]),c.default.createElement(ze.P,{value:w,label:f("contact.stored_addresses_label","Adresses enregistrées"),options:_,onChange:function(e){var t=_[parseInt(e,10)].address;v(t),k(e)},disabled:u})}var Ae=r(57126),Se={tabindex:"-1",label:"",ariaHidden:!0,ariaLabel:"no-label",type:"text"},Ie=(0,c.memo)((function(e){var t=e.address,r=e.addressType,n=e.availableCountries,a=e.country,o=e.onAutofillCaptured,i=(0,E.er)(),d=(0,h.xP)(),l=function(e){return function(r){var n=r.currentTarget.value;d.write(t.fields[e],n),null==o||o()}},u=function(){return function(e){var r=e.currentTarget.value;d.write(t.fields.zoneCode,r)}};return c.default.createElement(Ae.G,{visibility:"hidden"},c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_firstName",name:"firstName",autoComplete:p(r,"given-name"),onChange:l("firstName")})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_lastName",name:"lastName",autoComplete:p(r,"family-name"),onChange:l("lastName")})),i.isVisible("company")&&c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_company",name:"company",autoComplete:p(r,"organization"),onChange:l("company")})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_address1",name:"address1",autoComplete:p(r,i.isVisible("address2")?"address-line1":"street-address"),onChange:l("address1")})),i.isVisible("address2")&&c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_address2",name:"address2",autoComplete:p(r,"address-line2"),onChange:l("address2")})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_city",name:"city",autoComplete:p(r,"address-level2"),onChange:l("city")})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_country",name:"country",autoComplete:p(r,"country"),onChange:function(e){var r=e.currentTarget.value,a=n.find((function(e){return e.value===r||e.label.toLowerCase()===r.toLowerCase()}));a&&d.write(t.fields.countryCode,a.value)}})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_zone",name:"zone",autoComplete:p(r,"address-level1"),onChange:u()})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_address_level1",name:"address-level1",autoComplete:p(r,"address-level1"),onChange:u()})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_province",name:"province",autoComplete:p(r,"address-level1"),onChange:u()})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_postalCode",name:"postalCode",autoComplete:p(r,"postal-code"),onChange:l("postalCode")})),i.isVisible("phone",a.code)&&c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_phone",name:"phone",autoComplete:p(r,"tel"),onChange:l("phone")})));function p(e,t){return e?e+" "+t:t}})),Ze=(0,c.memo)((function(e){var t=e.address,r=e.addressType,n=e.availableCountries,a=e.country,o=e.onAutofillCaptured,i=(0,E.er)(),d=(0,h.xP)(),l=function(e){return function(r){var n=r.currentTarget.value;d.write(t.fields[e],n),null==o||o()}};return c.default.createElement(Ae.G,{visibility:"hidden"},i.isVisible("address2")&&c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_collapsed_address2",name:"address2",autoComplete:u(r,"address-line2"),onChange:l("address2")})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_collapsed_city",name:"city",autoComplete:u(r,"address-level2"),onChange:l("city")})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_collapsed_zone",name:"zone",autoComplete:u(r,"address-level1"),onChange:function(e){var r=e.currentTarget.value;d.write(t.fields.zoneCode,r)}})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_collapsed_address_level1",name:"address-level1",autoComplete:u(r,"address-level1"),onChange:function(e){var r=e.currentTarget.value;d.write(t.fields.zoneCode,r)}})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_postal_collapsed_postalCode",name:"postalCode",autoComplete:u(r,"postal-code"),onChange:l("postalCode")})),i.isVisible("phone",a.code)&&c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill__collapsed_phone",name:"phone",autoComplete:u(r,"tel"),onChange:l("phone")})),c.default.createElement("input",(0,s.Z)({},Se,{id:"autofill_collapsed_country",name:"country",autoComplete:u(r,"country"),onChange:function(e){var r=e.currentTarget.value,a=n.find((function(e){return e.value===r||e.label.toLowerCase()===r.toLowerCase()}));a&&d.write(t.fields.countryCode,a.value)}})));function u(e,t){return e?e+" "+t:t}})),Te=r(73418),xe=r(9832),Ve=r(61918);function qe(e){var t=e.address,r=e.addressErrors,n=e.addressType,a=e.addressSettings,o=e.loading,i=e.editDisabled,d=(0,m.q)(),l=(0,xe.D)().firstNameRequired,u=a.isRequired("firstName")||l(n),p=(0,c.useCallback)((function(e){if(u&&!(0,Ve.Um)(e))return d("field_errors.address_first_name_blank","Entrez un prénom")}),[u,d]),f=(0,Ve.a8)(t.fields.firstName,r.firstName,p);return c.default.createElement(Te.nv,(0,s.Z)({protectedInput:!0,name:"firstName",label:u?d("contact.first_name_label","Prénom"):d("contact.optional_first_name_label","Prénom (optionnel)"),required:u,autocomplete:{group:n,field:"given-name"},readonly:o||i},f))}var Pe=r(6664);function Ne(e){var t=e.address,r=e.addressType,n=e.addressErrors,a=e.addressSettings,o=e.loading,i=e.editDisabled,d=(0,m.q)(),l=(0,Pe.I)(),u=a.isRequired("lastName"),p=(0,c.useCallback)((function(e){if(u&&!(0,Ve.Um)(e))return d("field_errors.address_last_name_blank","Entrez un nom")}),[u,d]),f=(0,Ve.a8)(t.fields.lastName,n.lastName,p),v=u?d("contact.last_name_label","Nom"):d("contact.optional_last_name_label","Nom (facultatif)");return c.default.createElement(Te.nv,(0,s.Z)({name:"lastName",protectedInput:!0,label:l?d("contact.optional_recipient_label","Attention (facultatif)"):v,required:u,autocomplete:{group:r,field:"family-name"},readonly:o||i},f))}var Le=r(47981);function De(e){var t,r=e.addressType,n=e.address,a=e.addressErrors,o=e.addressSettings,i=e.loading,d=e.editDisabled,l=(0,m.q)(),u=(0,Pe.I)(),p="inactive"!==(0,Le.E)(),f=o.isRequired("company"),v=(0,c.useCallback)((function(e){if(f&&!(0,Ve.Um)(e))return l("field_errors.address_company_blank","Entrez un nom d'entreprise")}),[f,l]),g=(0,Ve.a8)(n.fields.company,a.company,v),y=p&&void 0===g.value?{value:null==u||null==(t=u.shippingAddress)?void 0:t.company}:{};return c.default.createElement(Te.nv,(0,s.Z)({name:"company",label:f?l("contact.company_label","Entreprise"):l("contact.optional_company_label","Entreprise (optionnel)"),required:f,autocomplete:{group:r,field:"organization"},readonly:i||d},g,y))}var Oe=r(20529),Re=r(98390),Me=r(31445);function Ue(){var e=(0,m.q)();return c.default.createElement(Me.g,{blockAlignment:"center",spacing:"small200"},c.default.createElement(ee.JO,{source:"info"}),c.default.createElement(te.x,null,e("contact.civic_number_warning","Ajoutez un numéro de rue, le cas échéant")))}var Be={"Field-sizeSmall":"Vob8N","Input-AccessoryOffset":"R5Ptu"};function Fe(e){var t=e.country,r=e.address,n=e.addressRef,a=e.addressType,d=e.addressErrors,l=e.addressSettings,u=e.loading,p=e.editDisabled,g=e.missingBuildingNumberInAddress2,_=e.autocompleteDisabled,b=e.resetAddressSuggestions,C=(0,m.q)(),E=(0,h.KO)(r.fields.coordinates),z=(0,i.Z)(E,2)[1],w=(0,h.Dv)(r.fields.address1),k=(0,h.Dv)(r.fields.address2),A=(0,c.useState)(!V(w||"")),S=(0,i.Z)(A,2),I=S[0],Z=S[1],T=(0,h.xP)(),x=(0,U.a)(),q=(0,D.Lk)(),P=(0,N.L)().id,O=(0,M._v)(),R=(0,v.b)(),F=(0,$.I)(),j=T.read(r).value,G=(0,c.useCallback)((function(e){if(!(0,Ve.Um)(e))return C("field_errors.address_address1_blank","Entrez une adresse")}),[C]),K=(0,Ve.a8)(r.fields.address1,d.address1,G),J=function(e){e!==K.value&&(z(void 0),K.onChange(e),null==b||b(),V(e)||Z(!0))},W=function(e){V(e)&&Z(!1),K.onInput(e)},Q=l.isVisible("address2")?"address-line1":"street-address",H=!_&&(0,Oe.rx)(t,l),Y={group:a,field:Q},X=!1;t.buildingNumberRequired&&(X=Boolean(I&&w),t.buildingNumberMayBeInAddress2&&(X=Boolean(I&&g&&(w||k))));var ee=(0,c.useRef)(X);ee.current!==X&&(X&&function(){if(O.value.defaultAttributes&&x){var e,r=(null==(e=O.value.defaultAttributes)?void 0:e.uniqToken)||"",n={schemaId:B.gn.BuildingNumberNudge,payload:{checkoutToken:q.checkoutSessionIdentifier||"",shopId:parseInt((0,L.Bp)(P),10),uniqueToken:r,address1:j.address1||"",address2:j.address2||"",city:j.city||"",zone:j.zoneCode||"",zip:j.postalCode||"",territory:t.code,promptType:"missing_street_number",locale:R,context:"shipping"===a?"Shipping address":"Billing address"}};null==x||x.record(n)}}(),ee.current=X);var te=H?c.default.createElement(je,(0,s.Z)({},e,K,{onChange:J,onInput:W,autocomplete:Y})):c.default.createElement(Te.nv,(0,s.Z)({ref:n,name:"address1",label:C("contact.address1_label","Adresse"),required:!0,autocomplete:Y,readonly:u||p},K,{onChange:J,onInput:W,protectedInput:!0})),re=f()(Be["Field-sizeSmall"],(0,o.Z)({},Be["Input-AccessoryOffset"],H));return c.default.createElement("div",{className:re},c.default.createElement(y.E,{spacing:"small200"},te,X&&"BASIC"===F&&c.default.createElement(Ue,null)))}function je(e){var t=e.value,r=e.error,n=e.onInput,a=e.onChange,o=e.onAddressAutoComplete,s=e.loading,i=e.editDisabled,d=e.address,l=e.autocomplete,u=e.addressType,p=e.onBlur,f=e.resetAddressSuggestions,v=(0,m.q)(),g=mt(d,o,f),y=(0,h.Dv)(d.fields.countryCode);return c.default.createElement(Re.w,{name:"address1",field:"address1",label:v("contact.address1_label","Adresse"),accessory:c.default.createElement(ee.JO,{source:"magnify",appearance:"subdued"}),countryCode:y,onSelect:g,required:!0,autocomplete:l,readonly:s||i,value:t,error:r,onChange:a,onInput:n,addressType:u,onBlur:p,protectedInput:!0})}var Ge=function(e){return e.Focused="focused",e.Visible="visible",e.Hidden="hidden",e}(Ge||{});function Ke(e){var t,r=e.address,n=e.addressType,a=e.addressErrors,o=e.addressSettings,d=e.loading,l=e.editDisabled,u=e.setMissingBuildingNumberInAddress2,p=e.resetAddressSuggestions,f=(0,m.q)(),v=(0,de.un)(),g=(0,c.useRef)(null),y=o.isRequired("address2"),b=(0,c.useCallback)((function(e){if(y&&!(0,Ve.Um)(e))return f("field_errors.address_address2_blank","Entrez un numéro d’appartement, de suite, etc.")}),[y,f]),h=(0,Ve.a8)(r.fields.address2,a.address2,b),C=Boolean(null==(t=h.value)?void 0:t.length),E=!v||y||C?Ge.Visible:Ge.Hidden,z=(0,c.useState)(E),w=(0,i.Z)(z,2),k=w[0],A=w[1];return(0,c.useEffect)((function(){var e;k===Ge.Focused&&(null==(e=g.current)||e.focus())}),[k]),(0,c.useEffect)((function(){k===Ge.Hidden&&C&&A(Ge.Visible)}),[k,C]),k===Ge.Hidden?c.default.createElement(Ae.G,null,c.default.createElement(_.r,{textDecoration:"none",onPress:function(){A(Ge.Focused)}},c.default.createElement(Me.g,{spacing:"small400",blockAlignment:"center"},c.default.createElement(ee.JO,{source:"plus",size:"extraSmall"}),f("shipping.address2_add_label","Ajouter un numéro d’appartement, de suite, etc.")))):c.default.createElement(Te.nv,(0,s.Z)({name:"address2",label:y?f("contact.address2_label","Appartement, suite, etc."):f("contact.optional_address2_label","Appartement, suite, etc. (optionnel)"),required:y,autocomplete:{group:n,field:"address-line2"},readonly:d||l},h,{ref:g,onChange:function(e){h.onChange(e),null==p||p(),V(e)||null==u||u(!0)},onInput:function(e){h.onInput(e),V(e)&&(null==u||u(!1))}}))}var Je=r(32406),We={"Field-sizeSmall":"ii1aN"},$e=new Map([[T.C.Ca,/^[A-Za-z]\d[A-Za-z]\s*\d[A-Za-z]\d$/],[T.C.Us,/^\d{5}(?:[-\s]?\d{4})?$/]]),Qe=new Map([["postal_code_label","postal_code"],["zip_code_label","zip_code"],["postcode_label","postcode"],["pincode_label","pincode"]]);function He(e){var t,r=e.country,n=e.address,a=e.addressType,o=e.addressErrors,d=e.addressSettings,l=e.loading,u=e.editDisabled,p=e.resetAddressSuggestions,f=(0,m.q)(),v=(0,c.useCallback)((function(e){if(!(0,Ve.Um)(e))return f("field_errors.address_zip_blank","Entrez un code postal")}),[f]),g=(0,F.Pg)(null!=(t=r.localizationKeys.postalCode)?t:"postal_code_label",r.labels.postalCode,Qe),y=g("label"),_=g("placeholder"),b=(0,Ve.a8)(n.fields.postalCode,o.postalCode,v),C=(0,c.useState)(b.value),E=(0,i.Z)(C,2),z=E[0],w=E[1];(0,h.bQ)(n.fields.postalCode,(function(e){e!==z&&w(e)}));var k=(0,h.KO)(n.fields.coordinates),A=(0,i.Z)(k,2)[1],S=r.autocompletionField===Je.N.PostalCode&&d.autocompleteEnabled&&(0,Oe.h0)(r.code),I=function(e){e!==b.value&&(A(void 0),b.onChange(e),null==p||p())},Z=$e.get(r.code),T=S?c.default.createElement(Xe,(0,s.Z)({},e,b,{onChange:I,label:y})):c.default.createElement(Te.J2,(0,s.Z)({name:"postalCode",label:y,placeholder:_,required:!0,inputMode:Ye(r),autocomplete:{group:a,field:"postal-code"},letterCase:"uppercase",readonly:l||u},b,{onInput:function(e){var t=e.toLocaleUpperCase();b.onInput(t),w(t),Z&&Z.test(t)&&I(t)},onChange:I,controlledValue:z}));return c.default.createElement("div",{className:We["Field-sizeSmall"]},T)}function Ye(e){return e.pureNumericPostalCode?"numeric":"text"}function Xe(e){var t=e.label,r=e.value,n=e.error,a=e.onInput,o=e.onChange,s=e.onAddressAutoComplete,i=e.loading,d=e.editDisabled,l=e.address,u=e.addressType,p=e.onBlur,f=mt(l,s,e.resetAddressSuggestions),m=(0,h.Dv)(l.fields.countryCode);return c.default.createElement(Re.w,{name:"postalCode",field:"postalCode",label:t,countryCode:m,onSelect:f,required:!0,autocomplete:{group:u,field:"postal-code"},readonly:i||d,value:r,error:n,onChange:o,onInput:a,addressType:u,onBlur:p})}function et(e){var t=e.address,r=e.addressType,n=e.addressErrors,a=e.loading,o=e.editDisabled,d=e.resetAddressSuggestions,l=(0,m.q)(),u=(0,c.useCallback)((function(e){if(!(0,Ve.Um)(e))return l("field_errors.address_city_blank","Saisissez une ville")}),[l]),p=(0,Ve.a8)(t.fields.city,n.city,u),f=(0,h.KO)(t.fields.coordinates),v=(0,i.Z)(f,2)[1];return c.default.createElement(Te.nv,(0,s.Z)({name:"city",label:l("contact.city_label","Ville"),required:!0,autocomplete:{group:r,field:"address-level2"},readonly:a||o},p,{onChange:function(e){e!==p.value&&(v(void 0),p.onChange(e),null==d||d())}}))}var tt=new Map([["province_label","province"],["county_label","county"],["state_label","state"],["region_label","region"],["prefecture_label","prefecture"],["governorate_label","governorate"],["emirate_label","emirate"],["state_and_territory_label","state_and_territory"]]);function rt(e){var t,r,n=e.country,a=e.address,o=e.addressType,d=e.addressErrors,l=e.loading,u=e.editDisabled,p=e.resetAddressSuggestions,f=(0,m.q)(),v=(0,c.useCallback)((function(e){if(!(0,Ve.Um)(e))return f("field_errors.address_province_blank","Sélectionnez un État/une province")}),[f]),g=(0,F.Pg)(null!=(t=n.localizationKeys.zone)?t:"province_label",n.labels.zone,tt),y=g("label"),_=g("placeholder"),b=(0,Ve.a8)(a.fields.zoneCode,d.zoneCode,v),C=(0,h.KO)(a.fields.coordinates),E=(0,i.Z)(C,2)[1],z=(0,h.KO)(d.postalCode),w=(0,i.Z)(z,2)[1];return(0,c.useEffect)((function(){var e=b.value;if(null!=e){var t=e.toLowerCase(),r=n.zones.find((function(r){var n;return r.code===e||r.name.toLowerCase()===t||(null==(n=r.nameWithAlternates)?void 0:n.some((function(e){return e.toLocaleLowerCase()===t})))}));r&&b.onChange(r.code)}}),[n.zones,b]),c.default.createElement(ze.P,(0,s.Z)({name:"zone",label:y,placeholder:_,options:(r=n.zones,r.map((function(e){return{label:e.name,value:e.code,alternateValues:e.nameWithAlternates}}))),required:!0,autocomplete:{group:o,field:"address-level1"},readonly:l||u},b,{onChange:function(e){e!==b.value&&(E(void 0),w(void 0),null==p||p(),b.onChange(e))}}))}function nt(e){var t,r=e.address,n=e.addressType,a=e.addressErrors,o=e.availableCountries,d=e.loading,l=e.editDisabled,u=e.resetAddressSuggestions,p=(0,m.q)(),f=(0,Ve.a8)(r.fields.countryCode,a.countryCode),g=(0,Ve.a8)(r.fields.zoneCode,a.zoneCode),y=(0,de.un)(),_=(0,h.KO)(r.fields.coordinates),b=(0,i.Z)(_,2)[1],C=(0,h.KO)(a.postalCode),E=(0,i.Z)(C,2)[1],z=(0,h.KO)(a.zoneCode),w=(0,i.Z)(z,2)[1],k=(0,U.a)(),A=(0,D.Lk)(),S=(0,N.L)().id,I=(0,M._v)(),Z=(0,v.b)(),T=(0,c.useCallback)((function(e,t){if(I.value.defaultAttributes&&k){var r,a=(null==(r=I.value.defaultAttributes)?void 0:r.uniqToken)||"",o={schemaId:B.gn.CountrySelection,payload:{checkoutToken:A.checkoutSessionIdentifier||"",shopId:parseInt((0,L.Bp)(S),10),uniqueToken:a,territoryCode:t,selectionMethod:e,context:"shipping"===n?"Shipping address":"Billing address",locale:Z}};null==k||k.record(o)}}),[I.value.defaultAttributes,k,n,Z,A.checkoutSessionIdentifier,S]);return(0,c.useEffect)((function(){T("auto-selected",f.value)}),[null==(t=I.value.defaultAttributes)?void 0:t.uniqToken,k]),c.default.createElement(ze.P,(0,s.Z)({name:"countryCode",label:p("contact.country_label","Pays/région"),options:o,required:!0,autocomplete:{group:n,field:"country"},readonly:d||l},f,{onChange:function(e){y||g.onChange(void 0),e!==f.value&&(f.onChange(e),null==u||u(),b(void 0),w(void 0),E(void 0),T("user-input",e))}}))}var at=r(72056),ot=r(14289),st=r(14257),it=r(37694);function dt(e){var t=e.country,r=e.addressType,n=e.addressErrors,a=e.addressSettings,o=e.addressFormSettings,i=e.address,d=e.loading,l=e.editDisabled,u=t.code,p=(0,m.q)(),f=a.isRequired("phone",u),v=(0,it.fD)(),g=(0,c.useCallback)((function(e){var t=(0,Ve.Um)(e);return f&&!t?p("field_errors.phone_blank","Saisir un numéro de téléphone"):t&&!v(null!=e?e:"",u)?p("field_errors.shipping_line_phone_invalid","Saisir un numéro de téléphone valide"):void 0}),[f,v,u,p]),y=(0,Ve.a8)(i.fields.phone,n.phone,g),_=(0,S.m)(),b=_?p("siberia.contact.optional_phone_label","Numéro de téléphone (facultatif)"):p("contact.optional_phone_label","Téléphone (optionnel)"),h=p(_?"siberia.contact.phone_label":"contact.phone_label","Téléphone"),C=!1!==(null==o?void 0:o.phoneTooltip)&&c.default.createElement(at.s,{overlay:c.default.createElement(ot.u,null,p("contact.phone_tooltip","Au cas où nous aurions besoin de vous contacter à propos de votre commande"))},c.default.createElement(ee.JO,{source:"question",appearance:"subdued",accessibilityLabel:p("general.tooltip_accessibility_label","En savoir plus")}));return c.default.createElement(st.$,(0,s.Z)({name:"phone",countryCode:u,label:f?h:b,hideCountries:!0,required:f,autocomplete:{group:r,field:"telephone"},readonly:d||l,accessory:C||void 0},y))}var lt="I9W0A",ut=["addressRef","additionalGroups","autocompleteDisabled","group"],ct=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).name="UnexpectedFieldError",t}return(0,l.Z)(t,e),(0,d.Z)(t)}((0,u.Z)(Error)),pt=(0,c.memo)((function(e){var t=e.id,r=e.address,n=e.countries,d=e.addressSettings,l=e.addressType,u=e.addressErrors,p=e.additionalFieldGroups,T=e.children,X=e.expanded,ee=void 0===X||X,te=e.autocompleteDisabled,re=void 0!==te&&te,ne=e.collapsible,ae=void 0!==ne&&ne,oe=e.settings,le=e.loading,ce=void 0!==le&&le,ve=e.onAddressAutoComplete,ze=e.onManualAddressEntryClick,we=e.onAutofillCaptured,Ae=e.inPaymentContext,Se=e.showSavedAddressSelector,Te=void 0===Se||Se,xe=(0,m.q)(),Ve=(0,b.Q)().geolocation,qe=(0,E.er)(),Pe=(0,x.Ew)(),Ne=(0,i.Z)(Pe,1)[0],Le=(0,h.Dv)(r.fields.countryCode),De=(0,c.useMemo)((function(){return(0,z.Yu)()}),[]),Oe=(0,F.Zu)(De,u).resetAddressSuggestions,Re=(0,O.L)().isEmailOnlySignUp,Me=(0,R.a)(),Ue=(0,h.xP)(),Be=(0,w.eS)(Z.k.Delivery,k.sC.Destination)&&"shipping"===l,Fe=(0,S.m)(),je=(0,I.J$)(Le),Ge=je.details,Ke=je.loading,Je=(0,c.useMemo)((function(){return null!=d?d:qe}),[d,qe]),We=(0,c.useMemo)((function(){return null!=Ge?Ge:Ve.country}),[Ge,Ve.country]),$e=(0,c.useMemo)((function(){return!n||Be?[{value:We.code,label:We.name}]:n}),[n,We,Be]),Qe=(0,A.Zo)(),He=(0,c.useMemo)((function(){if("CustomerProfile"===(null==Qe?void 0:Qe.__typename)){var e="shipping"===l?null==Qe?void 0:Qe.shippingAddresses:null==Qe?void 0:Qe.billingAddresses;return(null!=e?e:[]).map((function(e,t){var r=e.address;return{value:t.toString(),label:r.label,address:Object.assign({},r)}}))}return[]}),[Qe,l]),Ye=He.length>0,Xe=(0,c.useMemo)((function(){var e=We;if(Fe){var t=e.formatting.edit;e.formatting.edit=(0,z.l4)(t)}return(0,z.mt)(e,Je)}),[We,Je,Fe]),et=(0,c.useMemo)((function(){return Xe.findIndex((function(e){return"{address1}"===e.id}))+1}),[Xe]),tt=(0,c.useMemo)((function(){return gt(Xe)}),[Xe]),rt=tt.groupsBeforeCountry,nt=tt.countryGroup,at=tt.groupsAfterCountry;!function(e,t){var r=t.addressType,n=t.addressErrors,a=t.suggestions,o=t.countryCode,s=t.availableCountries,d=t.addressSettings,l=(0,h.xP)(),u=(0,W.cp)(""),p=(0,$.I)(),f="ES_STREET"===p,m=function(){var e,t,r=(0,U.a)(),n=(0,M._v)(),a=(0,D.Lk)(),o=(0,N.L)().id,s=(0,v.b)(),i=(0,de.vQ)(),d=(0,h.xP)(),l=(0,c.useMemo)((function(){return new Map}),[]);return(0,c.useCallback)((function(e,t,u,c,p,f,m){var v=d.read(t).value,g=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join("")}(JSON.stringify(v),JSON.stringify(p),f,m,u,c,e);if(r&&!l.has(g)){var y,_;l.set(g,{address:t,suggestion:p,addressType:f,addressFieldKey:m,concern:u,matchingStrategy:c});var b=(null==n||null==(y=n.value)||null==(_=y.defaultAttributes)?void 0:_.uniqToken)||"",h={schemaId:B.gn.AddressValidation,payload:{checkoutToken:a.checkoutSessionIdentifier||"",shopId:parseInt((0,L.Bp)(o),10),uniqueToken:b,locale:s,address1:v.address1,address2:v.address2,city:v.city,zip:v.postalCode,zone:v.zoneCode,country:v.countryCode||"",validationId:e,address1Suggested:null==p?void 0:p.address.address1,address2Suggested:null==p?void 0:p.address.address2,citySuggested:null==p?void 0:p.address.city,zipSuggested:null==p?void 0:p.address.postalCode,zoneSuggested:null==p?void 0:p.address.zoneCode,countrySuggested:(null==p?void 0:p.address.countryCode)||"",errorFields:u.fieldNames||[],errorCodes:[u.code],errorType:u.type,matchingStrategy:c,suggestionsCount:u.suggestionIds.length||0,checkoutView:i?"Single page":"Multi page",context:"shipping"===f?"Shipping address":"Billing address"}};r.record(h)}}),[d,r,l,null==n||null==(e=n.value)||null==(t=e.defaultAttributes)?void 0:t.uniqToken,a.checkoutSessionIdentifier,o,s,i])}(),g=(0,F.Zu)(a,n).resetAddressSuggestions,y=(0,F.kO)(n).resetAddressErrors,_="ES_STREET",b=function(e){var t,r,n,a,o,s,i,d,l,u,p=e.countryCode,f=e.countries,m=e.addressSettings,g=(t=(0,v.b)(),r=(0,Q.I)(),n=(0,c.useMemo)((function(){return new Map}),[]),a=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join("")},o=(0,N.L)().id,s=(0,D.Lk)(),i=(0,_e.c)().validation,(0,c.useCallback)((0,K.Z)((0,G.Z)().mark((function e(d,l){var u,c,p,f,m,v,g,y,_,b,h,C,E;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=d.address1,c=d.address2,p=d.zoneCode,f=d.countryCode,m=d.postalCode,v=d.city,g=d.phone,y=a(u,c,v,p,m,f,g,l),n.has(l)||n.set(l,new Map),_=n.get(l),e.prev=4,b=_.get(y)||i({address1:u,address2:c,zoneCode:p,countryCode:f,postalCode:m,city:v,phone:g},t,l,{shopId:(0,L.Bp)(o),sourceId:s.sourceId||""}),_.clear(),_.set(y,b),e.next=10,b;case 10:if(h=e.sent,C=h.data,!(E=h.errors)){e.next=15;break}throw new ye(E);case 15:return e.abrupt("return",C.validation);case 18:return e.prev=18,e.t0=e.catch(4),e.t0 instanceof ye&&e.t0.errors.length>0&&r.leaveBreadcrumb("AddressValidation service failed",{errors:e.t0.errors}),e.abrupt("return",{id:"",concerns:[],suggestions:[],locale:t,validationScope:[],fields:[]});case 22:case"end":return e.stop()}}),e,null,[[4,18]])}))),[n,i,t,o,s.sourceId,r])),y=(0,F.TC)(p,f,m),_=(d=(0,be.w)(he.AU),l=(0,be.w)(he.N8),u=(0,de.vQ)(),(0,Ce.mQ)()||d&&!l&&!u);return(0,c.useCallback)((0,K.Z)((0,G.Z)().mark((function e(t){var r,n,a,o,s,i,d,l,u,c;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.addressType,n=t.address,a=t.matchingStrategy,o=t.experimentGroup,s=t.validationTestGroup,i=t.action,d=new Map,l=y(n,r),"submit"===i&&l.forEach((function(e,t){d.set(t,{error:e,type:"error",source:void 0,matchingStrategy:a})})),!ue({addressValidationAPIEnabled:_,errors:l,addressType:r,countryCode:n.countryCode})){e.next=11;break}return e.next=7,g(n,a);case 7:u=e.sent,c=new Map,u.suggestions.forEach((function(e){return c.set(e.id,e)})),fe(u.concerns).forEach((function(e){var t=pe(e.fieldNames[0]),n=e.suggestionIds.length>0?{address:me(c.get(e.suggestionIds[0])),message:e.message,code:e.code,type:e.type.toLowerCase(),id:e.suggestionIds[0]}:void 0;"address_missing_building_number"===e.code&&"BASIC"===o||(d.set(t,{id:u.id,error:e.message,suggestion:n,concernCode:"postalCode"===t?ge(e.code||"",r):e.code,type:e.type.toLowerCase(),concern:e,source:"validation-api",matchingStrategy:a}),s&&l.set(t,e.message))}));case 11:return e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)}))),[y,_,g])}({countryCode:o,countries:s,addressSettings:d}),C=(0,c.useCallback)((function(t){return b({address:l.read(e).value,addressType:r,matchingStrategy:_,experimentGroup:p,validationTestGroup:f,action:t})}),[e,r,b,p,_,l,f]),E=(0,c.useCallback)((function(t){return b({address:l.read(e).value,addressType:r,matchingStrategy:_,experimentGroup:p,validationTestGroup:!1,action:t})}),[e,r,b,p,_,l]),z=(0,Q.I)(),w=(0,x.Ew)(),A=(0,i.Z)(w,1)[0],S=(0,c.useCallback)((function(t,n){Y({address:e,matchingStrategy:n,fieldValidationResult:t,addressType:r,trackAddressValidation:m})}),[e,r,m]),I=(0,H.y1)((0,K.Z)((0,G.Z)().mark((function t(o){var s,i,d,c;return(0,G.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("progression"!==l.read(u).value){t.next=2;break}return t.abrupt("return");case 2:return s=l.read(e),i=s.revision,t.next=5,C();case 5:return d=t.sent,l.read(e).revision===i&&se(d,e,n,a,l,m,f,_,r),t.prev=7,t.next=10,E();case 10:c=t.sent,l.read(e).revision===i&&S(c,_),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(7);case 16:case"end":return t.stop()}}),t,null,[[7,14]])}))),150);(0,h.bQ)(e,(function(e){l.write(u,""),I(e)})),(0,J.$u)((0,K.Z)((0,G.Z)().mark((function t(o){var s,d,c,p,v,b;return(0,G.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=o.reason,d=o.parts,l.write(u,s),"negotiation"!==s){t.next=4;break}return t.abrupt("return",{behavior:"allow"});case 4:if(!A){t.next=6;break}return t.abrupt("return",{behavior:"allow"});case 6:return Object.entries(n).forEach((function(e){var t,r=Object.keys(n).includes(e[0])?l.read(n[e[0]]).value:"";if("string"==typeof r&&(t=r),Object.keys(a).includes(e[0])&&(0,ie.l$)(r)){var o=l.read(a[e[0]]).value;t="error"===(null==o?void 0:o.type)?null==o?void 0:o.message:""}if(t)return z.leaveBreadcrumb("Blocking address error",{errorMessage:t}),{behavior:"block",reason:k.VO.InvalidAddress}})),t.next=9,C("submit");case 9:if(c=t.sent,"shipping"!==l.read(d.billingAddressOption).value||"billing"!==r){t.next=15;break}return y(),g(),t.abrupt("return",{behavior:"allow"});case 15:if(p=Array.from(c,(function(e){return(0,i.Z)(e,2)[1].error})).filter((function(e){return e})),E().then((function(e){(0,j.Z)(e.values()).find((function(e){return"error"===(null==e?void 0:e.type)}))&&S(e,_)})).catch((function(){})),v=Array.from(c,(function(e){return(0,i.Z)(e,2)[1]})).filter((function(e){return"error"===(null==e?void 0:e.type)})).length>0,b=Array.from(c,(function(e){return(0,i.Z)(e,2)[1]})).filter((function(e){return"validation-api"!==(null==e?void 0:e.source)})).length>0,!(f&&v||!f&&b)){t.next=22;break}return z.leaveBreadcrumb("blocking errors",{errors:p}),t.abrupt("return",{behavior:"block",reason:k.VO.InvalidAddress,perform:function(){se(c,e,n,a,l,m,f,_,r)}});case 22:return t.abrupt("return",{behavior:"allow",perform:function(){g(),f||v&&S(c,_)}});case 23:case"end":return t.stop()}}),t)}))))}(r,{countryCode:Le,availableCountries:$e,addressSettings:Je,suggestions:De,addressType:l,addressErrors:u}),function(e,t,r,n,o,s,d){var l=(0,h.xP)(),u=(0,h.Dv)(e.fields.countryCode),p=(0,c.useMemo)((function(){return t.flatMap((function(e){return e.fields}))}),[t]);(0,c.useEffect)((function(){for(var e=0,t=Object.keys(r);e<t.length;e++){var a=t[e];p.includes(a)||(l.write(r[a],void 0),Object.keys(n).includes(a)&&l.write(n[a],void 0))}}),[l,r,n,p]);var f=(0,U.a)(),m=(0,D.Lk)(),g=(0,N.L)().id,y=(0,M._v)(),_=(0,I.J$)(u).details,b=(0,v.b)(),E=(0,$.I)();var w=(0,c.useCallback)((function(e){if("error"===e.type&&null!=d&&!o){for(var t,n=e.violations,c=(0,z.YO)(d,n),p=!1,f=(0,a.Z)(c);!(t=f()).done;){var m=(0,i.Z)(t.value,2),v=m[0],g=m[1];l.write(r[v],g),s.isVisible(v,u)||(p=!0)}p&&window.location.reload()}}),[o,s,d,r,l,u]),k=(0,P.g)();(0,c.useEffect)((function(){w(k)}),[k,w]),(0,C.lH)((function(t){(function(t){if("error"===t.type&&null!=d&&!o)for(var n,s=t.violations,u=(0,z.YO)(d,s),c=(0,a.Z)(u);!(n=c()).done;){var p=(0,i.Z)(n.value,2),v=p[0],h=p[1];l.write(r[v],h)}for(var C=[],w=0,k=Object.keys(r);w<k.length;w++){var A=k[w];l.read(r[A]).value&&C.push(A)}if("invalid"===t.type||"error"===t.type||"success"===t.type&&"progression"===t.negotiationStage){var S,I=l.read(e).value;if("invalid"===t.type&&(S=t.reasons.toString()),y.value.defaultAttributes){var Z,T,x,V=(null==(Z=y.value.defaultAttributes)?void 0:Z.uniqToken)||"",q=(null==_||null==(T=_.zones)||null==(x=T.find((function(e){return e.code===I.zoneCode})))?void 0:x.name)||I.zoneCode,P={schemaId:B.gn.AddressSubmission,payload:{checkoutToken:m.checkoutSessionIdentifier||"",shopId:parseInt((0,L.Bp)(g),10),uniqueToken:V,territory:(null==_?void 0:_.name)||"",context:"shipping"===d?"Shipping address":"Billing address",address1:I.address1||"",address2:I.address2||"",city:I.city||"",zone:q||"",zip:I.postalCode||"",errorCode:S||"",errorFields:C,locale:b,matchingStrategy:E}};null==f||f.record(P)}}})(t),w(t)}))}(r,Xe,u,De,Ne,Je,l);var ot=(0,c.useState)(!1),st=(0,i.Z)(ot,2),it=st[0],dt=st[1];(0,c.useEffect)((function(){(!Re||!Me)&&!Je.isVisible("phone",We.code)&&Ue.write(r.fields.phone,"")}),[We,r.fields.phone,Je,Ue,Re,Me]),(0,c.useEffect)((function(){if(Ke||ce){var e=setTimeout((function(){return dt(!0)}),400);return function(){return clearTimeout(e)}}dt(Ke)}),[ce,Ke]);var ut=(0,h.Dv)(r.fields.address2),ct=(0,c.useState)(!V(ut||"")),pt=(0,i.Z)(ct,2),mt=pt[0],vt=pt[1],yt=(0,c.useRef)(null),_t={address:r,addressErrors:u,addressType:l,addressSettings:Je,addressRef:yt,addressFormSettings:oe,country:We,availableCountries:$e,onAddressAutoComplete:ve,missingBuildingNumberInAddress2:mt,setMissingBuildingNumberInAddress2:vt,resetAddressSuggestions:Oe},bt=(0,c.useCallback)((function(){null==ze||ze(),setTimeout((function(){var e;null==(e=yt.current)||e.focus()}))}),[ze]);return c.default.createElement("div",{id:t},c.default.createElement(q.g,{active:it},c.default.createElement(Ee.l,null,Qe&&Ye&&Te?c.default.createElement(ke,{address:r,addressOptions:He,inPaymentContext:Ae,disabled:Be}):null,ae?c.default.createElement(c.default.Fragment,null,Xe.slice(0,et).map((function(e){return c.default.createElement(ft,(0,s.Z)({key:e.id,group:e,additionalGroups:p},_t,{loading:it,autocompleteDisabled:re,editDisabled:Be}))})),!ee&&c.default.createElement(Ze,{address:r,addressType:l,country:We,availableCountries:$e,onAutofillCaptured:we}),c.default.createElement("div",{className:"_Yuii"},c.default.createElement("div",{className:lt},c.default.createElement(g.u,{id:"collapsed-fields",open:ee,renderChildrenWhenCollapsed:!0},c.default.createElement(Ee.l,null,Xe.slice(et).map((function(e){return c.default.createElement(ft,(0,s.Z)({key:e.id,group:e,additionalGroups:p},_t,{loading:it,editDisabled:Be}))})),T))),c.default.createElement("div",{className:f()(lt,(0,o.Z)({},"z4F0X",ee))},c.default.createElement(y.E,{inlineAlignment:"start"},c.default.createElement(_.r,{"aria-controls":"collapsed-fields",onPress:bt},xe("shipping.enter_address_manually_label","Saisir l'adresse manuellement")))))):c.default.createElement(c.default.Fragment,null,rt.map((function(e){return c.default.createElement(ft,(0,s.Z)({key:e.id,group:e,additionalGroups:p},_t,{loading:it,editDisabled:Be}))})),c.default.createElement(ft,(0,s.Z)({key:"country",group:nt,additionalGroups:p},_t,{loading:it,editDisabled:Be})),at.map((function(e){return c.default.createElement(ft,(0,s.Z)({key:e.id,group:e,additionalGroups:p},_t,{loading:it,editDisabled:Be}))})),T)),c.default.createElement(Ie,{address:r,addressType:l,country:We,availableCountries:$e,onAutofillCaptured:we})))}));function ft(e){var t,r=e.addressRef,a=e.additionalGroups,o=e.autocompleteDisabled,i=e.group,d=(0,n.Z)(e,ut),l=d.loading,u=null!=(t=null==a?void 0:a.filter((function(e){var t=e.after;return i.fields.includes(t)})))?t:[];return c.default.createElement(c.default.Fragment,null,c.default.createElement(Ee.T,null,i.fields.map((function(e){switch(e){case"firstName":return c.default.createElement(qe,d);case"lastName":return c.default.createElement(Ne,d);case"company":return c.default.createElement(De,d);case"address1":return c.default.createElement(Fe,(0,s.Z)({},d,{addressRef:r,autocompleteDisabled:o}));case"address2":return c.default.createElement(Ke,d);case"postalCode":return c.default.createElement(He,d);case"city":return c.default.createElement(et,d);case"zoneCode":return c.default.createElement(rt,d);case"countryCode":return c.default.createElement(nt,d);case"phone":return c.default.createElement(dt,d);default:throw new ct("Unexpected field: "+e)}}))),u.map((function(e){return c.default.createElement(Ee.T,{key:e.id},e.render({loading:l}))})))}function mt(e,t,r){var n=(0,h.xP)();return function(a){var o,s=e.fields,i=s.coordinates,d=s.address1,l=s.address2,u=s.city,c=s.zoneCode,p=s.countryCode,f=s.postalCode;n.write(i,a.coordinates),n.write(d,null!=(o=a.address1)?o:""),n.write(l,(function(e){var t;return null!=(t=a.address2)?t:e})),n.write(u,a.city),n.write(c,a.zoneCode),n.write(p,(function(e){var t=Object.values(T.C).find((function(e){var t;return e===(null==(t=a.countryCode)?void 0:t.toUpperCase())}));return null!=t?t:e})),n.write(f,a.postalCode),null==r||r(),null==t||t(a)}}function vt(e,t){var r=(0,h.xP)();return function(n){var a,o=t.fields,s=o.address1,i=o.address2,d=o.city,l=o.zoneCode,u=o.postalCode,c=null!=(a=n[e])?a:"";switch(e){case"address1":r.write(s,c);break;case"address2":r.write(i,c);break;case"city":r.write(d,c);break;case"zoneCode":r.write(l,c);break;case"postalCode":r.write(u,c)}}}function gt(e){var t=e.findIndex((function(e){return e.fields.includes("countryCode")}));return{groupsBeforeCountry:e.slice(0,t),countryGroup:e[t],groupsAfterCountry:e.slice(t+1)}}},98390:function(e,t,r){r.d(t,{w:function(){return i}}),r(66992),r(41539),r(88674),r(78783),r(33948);var n=r(59748),a=r(20658),o=r(73418),s=r(45878),i=(0,a.L)({load:function(){return(0,s.R)((function(){return r.e(9786).then(r.bind(r,9751))}))},id:function(){return 9751},renderLoading:function(e){return n.default.createElement(o.nv,e)}})},21545:function(e,t,r){r.d(t,{T:function(){return l},l:function(){return d}});var n=r(59748),a=r(97977),o=r(13866),s=r(61507),i=r(4152);function d(e){var t=e.children,r=(0,a.G)().formLayout.spacing;return n.default.createElement(o.E,{spacing:r},t)}function l(e){var t=e.children,r=(0,a.G)().formLayout.spacing,d=void 0===r?"base":r,l=(0,s.Vt)({base:!0,small:!1})?o.E:i.T;return n.default.createElement(l,{spacing:d},t)}},3182:function(e,t,r){r.d(t,{g:function(){return s}});var n=r(59748),a=r(8758),o={Wrapper:"pxSEU",Loading:"Kyqce"};function s(e){var t=e.active,r=void 0!==t&&t,s=e.size,i=void 0===s?"base":s,d=e.children;return n.default.createElement("div",{className:o.Wrapper,"aria-hidden":r?"true":"false"},r&&n.default.createElement("div",{className:o.Loading},n.default.createElement(a.$,{size:i})),d)}},77291:function(e,t,r){r.d(t,{h8:function(){return p},r5:function(){return m},Pj:function(){return f},qY:function(){return v},ch:function(){return g}});var n=r(4942),a=r(59748),o=r(94184),s=r.n(o),i=r(47242),d=r(59213),l=r(127),u=r(40915),c={Step:"VheJw",Content:"s_qAq",Header:"VUPKe",isGrouped:"USpd3",Actions:"oQEAZ","Actions-displayInline":"WD4IV"};function p(e){var t=e.children;return a.default.createElement("div",{className:c.Step},t)}function f(e){var t=e.grouped,r=e.children,o=s()(c.Content,(0,n.Z)({},c.isGrouped,t));return a.default.createElement("div",{className:o},r)}function m(e){var t=e.children,r=(0,l.Lr)("Checkout::Actions::RenderBefore"),n=(0,d.lz)().actions.display,o=void 0===n?"inline":n,p=s()(c.Actions,c[(0,i.O)("Actions-display",o)]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(u._,{extensions:r,spacing:"base"}),a.default.createElement("div",{className:p},t))}function v(e){var t=e.children;return a.default.createElement("div",{className:c.PrimaryAction},t)}function g(e){var t=e.children;return a.default.createElement("div",{className:c.SecondaryAction},t)}},87979:function(e,t,r){r.d(t,{c:function(){return v},e:function(){return m}});var n=r(43144),a=r(60136),o=r(38192),s=(r(92222),r(21703),r(96647),r(74916),r(64765),r(80040)),i=r(59748),d=r(83235),l=r(9085),u=r(62108),c=r(85822),p=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).name="MissingAutocompleteEndpointError",t}return(0,a.Z)(t,e),(0,n.Z)(t)}((0,o.Z)(Error)),f=(0,u.Q)("Autocomplete-IFrame");function m(){var e=(0,s.F)("autocomplete-sandbox"),t=(0,i.useRef)(),r=(0,c.M)(void 0,f);return(0,i.useLayoutEffect)((function(){if(!e)throw new l.br("Unable to find autocomplete sandbox URL");var n=(0,d.lJ)({id:r,url:e,privileges:["allow-scripts","allow-same-origin"]});return t.current=(0,d.r2)(n,e),function(){var e;n.remove(),null==(e=t.current)||e.terminate()}}),[e,r]),(0,i.useMemo)((function(){return{search:function(){var e;if(!t.current)throw new p("Called search without valid autocomplete endpoint");return(e=t.current.call).search.apply(e,arguments)},fetchAddress:function(){var e;if(!t.current)throw new p("Called fetchAddress without valid autocomplete endpoint");return(e=t.current.call).fetchAddress.apply(e,arguments)}}}),[])}function v(){var e=(0,s.F)("autocomplete-sandbox"),t=(0,i.useRef)();return(0,i.useLayoutEffect)((function(){var r;try{if(!e)throw new l.br("Unable to find autocomplete sandbox URL");(r=(0,d.lJ)({id:"validation",url:e,privileges:["allow-scripts","allow-same-origin"]})).addEventListener("load",(function(){t.current=(0,d.r2)(r,e)}))}catch(n){if(n instanceof l.br)return function(){}}return function(){var e;r.remove(),null==(e=t.current)||e.terminate()}}),[e]),(0,i.useMemo)((function(){return{validation:function(){var e;if(!t.current)throw new p("Called validation without valid autocomplete endpoint");return(e=t.current.call).validation.apply(e,arguments)}}}),[])}},85822:function(e,t,r){r.d(t,{M:function(){return a}});var n=r(59748);function a(e,t){var r,a=(0,n.useRef)(e);return a.current=null!=(r=null!=e?e:a.current)?r:t(),a.current}},91508:function(e,t,r){r.d(t,{$:function(){return s}}),r(66992),r(51532),r(41539),r(78783),r(33948);var n=r(93211),a=r(82481),o=new Map([[a.z.InsufficientFunds,"insufficient_funds"],[a.z.InvalidPaymentMethod,"cannot_verify"],[a.z.FundingError,"processing_error"],[a.z.CanceledPaypalBillingAgreement,"processing_error"],[a.z.TokenExpired,"processing_error"],[a.z.InvalidToken,"processing_error"],[a.z.UnilateralAuthError,"processing_error"],[a.z.ThirdPartyInternalError,"processing_error"],[a.z.AuthorizationError,"processing_error"],[a.z.InvalidCurrency,"processing_error"],[a.z.InvalidItemTotal,"processing_error"],[a.z.InvalidCurrency,"processing_error"],[a.z.UnprocessableTransaction,"processing_error"],[a.z.InvoiceAlreadyPaid,"processing_error"],[a.z.AuthenticationError,"cannot_verify"],[a.z.IncorrectNumber,"cannot_verify"],[a.z.IncorrectCvc,"cannot_verify"],[a.z.IncorrectZip,"cannot_verify"],[a.z.IncorrectAddress,"cannot_verify"],[a.z.IncorrectPin,"cannot_verify"],[a.z.AuthenticationError,"three_d_secure_failed"],[a.z.InvalidNumber,"invalid_number"],[a.z.InvalidExpiryDate,"invalid_expiry_date"],[a.z.InvalidCvc,"invalid_cvc"],[a.z.ExpiredCard,"expired_card"],[a.z.CardDeclined,"card_declined"],[a.z.CallIssuer,"call_issuer"],[a.z.PickUpCard,"pick_up_card"],[a.z.TestModeLiveCard,"test_mode_live_card"],[a.z.TransientError,"transient_error"],[a.z.InsufficientFunds,"insufficient_funds"],[a.z.InvalidShippingAddress,"invalid_shipping_address"],[a.z.MissingShippingAddress,"missing_shipping_address"],[a.z.InvalidPaymentMethod,"cannot_verify"],[a.z.PublicPaymentError,"generic_error"],[a.z.SuccessfulOffsiteWithGiftCardError,"successful_offsite_with_gift_card_error"]]);function s(e){var t=(0,n.q)(),r="generic_error";return e&&(r=o.get(e.code)||"generic_error"),t("payment_errors",{scope:r},{call_issuer:"Votre carte a été refusée. Utilisez un autre moyen de paiement ou contactez votre banque pour plus d'informations.",cannot_verify:"Les informations de votre paiement n'ont pas pu être vérifiées. Vérifiez les informations de votre carte et réessayez.",card_declined:"Votre carte a été refusée. Réessayez ou utilisez un autre moyen de paiement.",checkout_amount_changed:"Votre paiement n’a pas pu être traité, car le montant dû à la page de paiement a changé. Veuillez vérifier votre commande et réessayer.",credit_card_processing:"Votre paiement ne peut pas être traité pour des raisons techniques. Réessayez dans quelques minutes ou utilisez un autre moyen de paiement.",decision_rule_block:"Un problème est survenu lors du traitement de votre paiement. Veuillez contacter le propriétaire de la boutique.",deferred_amount_changed:"Votre paiement n’a pas pu être traité, car le montant du paiement différé a changé. Veuillez vérifier votre commande et réessayer.",deferred_date_changed:"Votre paiement n’a pas pu être traité, car la date du paiement différé a changé. Veuillez vérifier votre commande et réessayer.",deferred_payment_not_allowed:"Les paiements différés ne sont pas autorisés. Veuillez vérifier votre commande et réessayer.",deferred_payment_required:"Cette commande nécessite un paiement différé. Veuillez vérifier votre commande et réessayer.",development_store_order_limit_reached:"Vous avez atteint la limite de commandes pour la boutique de développement avec cet organisme de traitement des paiements. Pour passer une autre commande, vous devez utiliser une passerelle test de paiement. En savoir plus sur les %{development_store_order_testing_docs_link}.",development_store_order_testing_docs_link:"commandes test dans les boutiques de développement",development_store_with_order_limit:"Pour passer une commande de test, vous devez utiliser une passerelle test de paiement. En savoir plus sur les %{development_store_order_testing_docs_link}.",expired_card:"Votre carte a expiré. Utiliser un autre moyen de paiement.",generic_error:"Un problème est survenu lors du traitement de votre paiement. Réessayez ou utilisez un autre moyen de paiement.",insufficient_funds:"Votre paiement a été refusé en raison de fonds insuffisants. Réessayez ou utilisez un autre moyen de paiement.",invalid_cvc:"Saisissez un code de sécurité valide",invalid_expiry_date:"Saisissez une date d'expiration valide pour la carte",invalid_number:"Saisissez un numéro de carte valide",invalid_shipping_address:"Votre paiement n'a pas pu être traité, car nous n'avons pas trouvé votre adresse d'expédition. Vérifiez-la et réessayez.",method_not_available:"Le moyen de paiement demandé n'est pas disponible.",missing_shipping_address:"Votre paiement n'a pas pu être traité, car il manque votre adresse d'expédition. Ajoutez-en une et réessayez.",multiple_deferred_payment_not_allowed:"Un seul paiement différé est autorisé par requête. Veuillez vérifier votre requête et essayer de nouveau.",order_total_changed:"Votre paiement n'a pas pu être traité, car le total de votre commande a changé. Vérifiez le total de votre commande et réessayez.",pay_later_failed:"Une erreur s'est produite lors du traitement de votre paiement avec Pay Later. Choisissez un autre moyen de paiement et réessayez.",payment_processing:"Votre paiement ne peut pas être traité pour des raisons techniques. Réessayez ou utilisez un autre moyen de paiement.",payment_processing_no_retry:"Votre paiement ne peut pas être traité pour des raisons techniques. Veuillez essayer un autre moyen de paiement.",paypal_invalid_token:"PayPal n'était pas disponible. Réessayez ou utilisez une autre option de paiement.",paypal_zero_amount:"Vous ne pouvez pas utiliser PayPal pour les commandes de %{amount}. Confirmez l'exactitude de votre commande et passez à la caisse sans PayPal.",pick_up_card:"Votre carte a été refusée. Réessayez ou utilisez un autre moyen de paiement.",processing_error:"Un problème est survenu lors du traitement de votre paiement. Réessayez ou utilisez un autre moyen de paiement.",rejected_transaction:"Votre paiement a été refusé. Réessayez ou utilisez un autre moyen de paiement.",shipping_must_match_billing:"L’adresse de facturation doit correspondre à l’adresse d’expédition. Veuillez utiliser un autre moyen de paiement.",subscription_agreement_blank:"Pour souscrire un abonnement, vos informations de paiement doivent être enregistrées. Pour continuer, confirmez que vous acceptez ou supprimez les abonnements de votre commande.",successful_offsite_with_gift_card_error:"Un problème est survenu lors du traitement du paiement de votre carte-cadeau. Réessayez ou utilisez un autre moyen de paiement.",test_mode_live_card:"Cette boutique ne peut accepter ni les commandes réelles ni les paiements réels.",three_d_secure_failed:"Les détails de votre paiement n'ont pas pu être vérifiés. Réessayez ou utilisez un autre moyen de paiement.",three_d_secure_failed_duplicate:"L'authentification 3D Secure de la carte de crédit a échoué car une autre est déjà en cours.",three_d_secure_throttled:"Trop d'essais ; veuillez patienter avant d'essayer à nouveau",transient_error:"Un problème est survenu lors du traitement de votre paiement. Essayez d'actualiser cette page ou vérifiez votre connexion Internet."})}}}]);