"use strict";(self.webpackChunkcheckout_web=self.webpackChunkcheckout_web||[]).push([[32],{59572:(e,t,r)=>{r.d(t,{Um:()=>tt,kS:()=>et,kZ:()=>nt,bE:()=>rt,g:()=>at});var a=r(87462),n=(r(57658),r(59748)),s=r(94184),o=r.n(s),d=r(93211),i=r(9377),l=r(57884),u=r(13866),c=r(76304),p=r(98508),m=r(51224),f=r(95920),g=r(90961),v=r(1791),y=r(86749),b=r(39147),_=r(52376),C=r(13731),h=r(39624),E=r(15926),z=r(66259),k=r(8792);function w(e){return/[0-9\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\uff10-\uff19]/.test(e)}var S=r(3182),A=r(15249),I=r(13194),T=r(70578),L=r(1335),O=r(71305),Z=r(1531),P=r(39827),N=r(73967),V=r(65467),q=r(76874),D=r(62586),x=r(55399),R=r(57581),M=r(30316),B=r(28593);function U({fieldValidationResult:e,matchingStrategy:t,address:r,addressType:a,trackAddressValidation:n}){e.forEach(((e,s)=>{"validation-api"===e.source&&n(e.id,r,e.concern,t,e.suggestion,a,s)}))}var F=r(4152),j=r(1511),G=r(8428);const $={Suggestion:"vv0g120"},H={WarningIconWrapper:"TkcBT"};function J({address:e,addressErrors:t,addressSuggestions:r,suggestion:a,field:s,addressType:o,validationId:l}){const u=(0,m.Dv)(e),c=at(s,e),p=(0,d.q)(),{resetAddressFieldSuggestions:f}=(0,q.Zu)(r,t),{resetAddressFieldErrors:g}=(0,q.kO)(t),v=function(){const e=(0,N.a)(),t=(0,P._v)(),r=(0,L.Lk)(),{id:a}=(0,I.L)(),s=(0,i.b)();return(0,n.useCallback)(((n,o,d,i,l)=>{if(e){const u=t?.value?.defaultAttributes?.uniqToken||"",c={schemaId:V.gn.AddressValidationSuggestionAcceptance,payload:{shopId:parseInt((0,T.Bp)(a),10),checkoutToken:r.checkoutSessionIdentifier||"",uniqueToken:u,locale:s,country:n,validationId:o,suggestionId:d,acceptedField:i,context:"shipping"===l?"Shipping address":"Billing address"}};e.record(c)}}),[s,e,r.checkoutSessionIdentifier,a,t?.value?.defaultAttributes?.uniqToken])}(),y=()=>{a?.address&&(v(u.countryCode||"",l,a.id,s,o),c({...u,...a?.address}),f(s),g(s))},b=(e=>{let t;return t="zoneCode"===e?`${a?.address.zone}`:`${a?.address[e]}`,n.default.createElement("button",{className:$.Suggestion,onClick:y},t)})(s),_=`${a?.message}. `,C=a?.type;return n.default.createElement(n.default.Fragment,null,"warning"===C?n.default.createElement(F.T,{columns:["auto","fill"],spacing:"small300"},n.default.createElement("div",{className:H.WarningIconWrapper},n.default.createElement(j.JO,{source:"info"})),n.default.createElement(G.x,null,p("field_errors.address_suggestion_did_you_mean_html",{html:b},{options:{noWrapElementReplacements:!0}},"Vous voulez dire %{html} ?"))):n.default.createElement(n.default.Fragment,null,_,p("field_errors.address_suggestion_did_you_mean_html",{html:b},{options:{noWrapElementReplacements:!0}},"Vous voulez dire %{html} ?")))}const K=e=>({origin:"validation-api",...e});function W(e,t,r,a,s,o,d,i,l){U({address:t,fieldValidationResult:e,trackAddressValidation:o,addressType:l,matchingStrategy:i}),e.forEach(((e,o)=>{if("validation-api"===e.source){if(d)if(e.suggestion){const{id:d,suggestion:i,type:u}=e,c=n.default.createElement(J,{validationId:d,address:t,addressErrors:r,addressSuggestions:a,suggestion:i,field:o,addressType:l});s.write(r[o],K({value:c,type:u,textValue:"Invalid address"})),s.write(a[o],i)}else e.error&&("warning"===e.type?(s.write(r[o],K({value:n.default.createElement(F.T,{columns:["auto","fill"],spacing:"small300"},n.default.createElement(j.JO,{source:"info"}),n.default.createElement(G.x,null,e.error)),type:"warning",textValue:"Invalid address"})),s.write(a[o],{type:"warning",message:e.error})):s.write(r[o],K({type:"error",value:e.error,textValue:e.error})))}else s.write(r[o],{message:e.error,origin:"client",type:"on-submit"})}))}var X=r(6400),Q=r(68184);const Y=["US"];class ee extends Error{constructor(...e){super(...e),this.name="AddressValidationError"}}function te(e){switch(e){case"address1":case"street":return"address1";case"address2":return"address2";case"country_code":case"countryCode":case"country":return"countryCode";case"zip":return"postalCode";case"province":case"province_code":case"provinceCode":return"zoneCode";case"city":return"city";case"phone":return"phone";default:throw new ee(`Unknown Address Component - ${e}`)}}function re(e){return void 0===e?{}:{address1:e.address1??void 0,address2:e.address2??void 0,city:e.city??void 0,zoneCode:e.provinceCode??void 0,zone:e.province??void 0,postalCode:e.zip??void 0,countryCode:e.countryCode??void 0}}var ae=r(23084);function ne(e,t){switch(e){case"address_zip_invalid_for_country":return"shipping"===t?ae.j.DeliveryInvalidPostalCodeForCountry:ae.j.PaymentsInvalidPostalCodeForCountry;case"address_zip_blank":return"shipping"===t?ae.j.DeliveryPostalCodeRequired:ae.j.PaymentsPostalCodeRequired;case"address_zip_invalid_for_country_and_province":return"shipping"===t?ae.j.DeliveryInvalidPostalCodeForZone:ae.j.PaymentsInvalidPostalCodeForZone;case"address_zip_contains_emojis":return"shipping"===t?ae.j.DeliveryPostalCodeContainsEmojis:ae.j.PaymentsPostalCodeContainsEmojis}return"shipping"===t?"DELIVERY_POSTAL_CODE_BLANK":"PAYMENTS_POSTAL_CODE_BLANK"}class se extends Error{constructor(e){super("AddressValidationServiceError"),this.name="AddressValidationServiceError",this.errors=void 0;const t=["Not allowed"];this.errors=e.map((e=>e.message)).filter((e=>!t.includes(e)))}}var oe=r(87979),de=r(50716),ie=r(47501),le=r(59124);function ue(e,t){const{addressType:r,addressErrors:a,suggestions:s,countryCode:o,availableCountries:d,addressSettings:l}=t,u=(0,m.xP)(),c=(0,x.cp)(""),p=(0,R.I)(),f="ES_STREET"===p,g=function(){const e=(0,N.a)(),t=(0,P._v)(),r=(0,L.Lk)(),{id:a}=(0,I.L)(),s=(0,i.b)(),o=(0,Q.vQ)(),d=(0,m.xP)(),l=(0,n.useMemo)((()=>new Map),[]);return(0,n.useCallback)(((n,i,u,c,p,m,f)=>{const g=d.read(i).value,v=((...e)=>e.join(""))(JSON.stringify(g),JSON.stringify(p),m,f,u,c,n);if(e&&!l.has(v)){l.set(v,{address:i,suggestion:p,addressType:m,addressFieldKey:f,concern:u,matchingStrategy:c});const d=t?.value?.defaultAttributes?.uniqToken||"",y={schemaId:V.gn.AddressValidation,payload:{checkoutToken:r.checkoutSessionIdentifier||"",shopId:parseInt((0,T.Bp)(a),10),uniqueToken:d,locale:s,address1:g.address1,address2:g.address2,city:g.city,zip:g.postalCode,zone:g.zoneCode,country:g.countryCode||"",validationId:n,address1Suggested:p?.address.address1,address2Suggested:p?.address.address2,citySuggested:p?.address.city,zipSuggested:p?.address.postalCode,zoneSuggested:p?.address.zoneCode,countrySuggested:p?.address.countryCode||"",errorFields:u.fieldNames||[],errorCodes:[u.code],errorType:u.type,matchingStrategy:c,suggestionsCount:u.suggestionIds.length||0,checkoutView:o?"Single page":"Multi page",context:"shipping"===m?"Shipping address":"Billing address"}};e.record(y)}}),[d,e,l,t?.value?.defaultAttributes?.uniqToken,r.checkoutSessionIdentifier,a,s,o])}(),{resetAddressSuggestions:v}=(0,q.Zu)(s,a),{resetAddressErrors:y}=(0,q.kO)(a),_="ES_STREET",C=function({countryCode:e,countries:t,addressSettings:r}){const a=function(){const e=(0,i.b)(),t=(0,M.I)(),r=(0,n.useMemo)((()=>new Map),[]),{id:a}=(0,I.L)(),s=(0,L.Lk)(),{validation:o}=(0,oe.c)();return(0,n.useCallback)((async({address1:n,address2:d,zoneCode:i,countryCode:l,postalCode:u,city:c,phone:p},m)=>{const f=((...e)=>e.join(""))(n,d,c,i,u,l,p,m);r.has(m)||r.set(m,new Map);const g=r.get(m);try{const t=g.get(f)||o({address1:n,address2:d,zoneCode:i,countryCode:l,postalCode:u,city:c,phone:p},e,m,{shopId:(0,T.Bp)(a),sourceId:s.sourceId||""});g.clear(),g.set(f,t);const{data:r,errors:v}=await t;if(v)throw new se(v);return r.validation}catch(v){return v instanceof se&&v.errors.length>0&&t.leaveBreadcrumb("AddressValidation service failed",{errors:v.errors}),{id:"",concerns:[],suggestions:[],locale:e,validationScope:[],fields:[]}}}),[r,o,e,a,s.sourceId,t])}(),s=(0,q.TC)(e,t,r),o=function(){const e=(0,de.w)(ie.AU),t=(0,de.w)(ie.N8),r=(0,Q.vQ)();return(0,le.mQ)()||e&&!t&&!r}();return(0,n.useCallback)((async({addressType:e,address:t,matchingStrategy:r,experimentGroup:n,validationTestGroup:d,action:i})=>{const l=new Map,u=s(t,e);if("submit"===i&&u.forEach(((e,t)=>{l.set(t,{error:e,type:"error",source:void 0,matchingStrategy:r})})),function({addressValidationAPIEnabled:e,errors:t,addressType:r,countryCode:a}){return e&&0===t.size&&Y.includes(a||"")&&"shipping"===r}({addressValidationAPIEnabled:o,errors:u,addressType:e,countryCode:t.countryCode})){const s=await a(t,r),o=new Map;s.suggestions.forEach((e=>o.set(e.id,e))),function(e){const t=new Map([["countryCode",0],["coordinates",2],["zoneCode",4],["postalCode",8],["address1",16],["address2",32],["city",64]]),r=(e,r)=>e|(t.get(te(r))??0),a=e.reduce(((e,t)=>{if(null==t.fieldNames)return[];const a=t.fieldNames.reduce(r,0);return e[a]=((e,t)=>{if(!e&&t)return t;if(e&&!t)return e;if(e.type!==t.type)return"error"===e.type?e:t;switch(e.type){case"error":return e.typeLevel<t.typeLevel?e:t;case"warning":return e.typeLevel>t.typeLevel?e:t}})(e[a]??void 0,t),e}),{});return[...new Set(Object.values(a))]}(s.concerns).forEach((t=>{const a=te(t.fieldNames[0]),i=t.suggestionIds.length>0?{address:re(o.get(t.suggestionIds[0])),message:t.message,code:t.code,type:t.type.toLowerCase(),id:t.suggestionIds[0]}:void 0;"address_missing_building_number"===t.code&&"BASIC"===n||(l.set(a,{id:s.id,error:t.message,suggestion:i,concernCode:"postalCode"===a?ne(t.code||"",e):t.code,type:t.type.toLowerCase(),concern:t,source:"validation-api",matchingStrategy:r}),d&&u.set(a,t.message))}))}return l}),[s,o,a])}({countryCode:o,countries:d,addressSettings:l}),h=(0,n.useCallback)((t=>C({address:u.read(e).value,addressType:r,matchingStrategy:_,experimentGroup:p,validationTestGroup:f,action:t})),[e,r,C,p,_,u,f]),E=(0,n.useCallback)((t=>C({address:u.read(e).value,addressType:r,matchingStrategy:_,experimentGroup:p,validationTestGroup:!1,action:t})),[e,r,C,p,_,u]),z=(0,M.I)(),[w]=(0,k.Ew)(),S=(0,n.useCallback)(((t,a)=>{U({address:e,matchingStrategy:a,fieldValidationResult:t,addressType:r,trackAddressValidation:g})}),[e,r,g]),A=(0,B.y1)((async t=>{if("progression"===u.read(c).value)return;const{revision:n}=u.read(e),o=await h();u.read(e).revision===n&&W(o,e,a,s,u,g,f,_,r);try{const t=await E();u.read(e).revision===n&&S(t,_)}catch(d){}}),150);(0,m.bQ)(e,(e=>{u.write(c,""),A(e)})),(0,D.$u)((async({reason:t,parts:n})=>{if(u.write(c,t),"negotiation"===t)return{behavior:"allow"};if(w)return{behavior:"allow"};Object.entries(a).forEach((e=>{const t=Object.keys(a).includes(e[0])?u.read(a[e[0]]).value:"";let r;if("string"==typeof t&&(r=t),Object.keys(s).includes(e[0])&&(0,X.l$)(t)){const t=u.read(s[e[0]]).value;r="error"===t?.type?t?.message:""}if(r)return z.leaveBreadcrumb("Blocking address error",{errorMessage:r}),{behavior:"block",reason:b.VO.InvalidAddress}}));const o=await h("submit");if("shipping"===u.read(n.billingAddressOption).value&&"billing"===r)return y(),v(),{behavior:"allow"};const d=Array.from(o,(([,e])=>e.error)).filter((e=>e));E().then((e=>{[...e.values()].find((e=>"error"===e?.type))&&S(e,_)})).catch((()=>{}));const i=Array.from(o,(([,e])=>e)).filter((e=>"error"===e?.type)).length>0,l=Array.from(o,(([,e])=>e)).filter((e=>"validation-api"!==e?.source)).length>0;return f&&i||!f&&l?(z.leaveBreadcrumb("blocking errors",{errors:d}),{behavior:"block",reason:b.VO.InvalidAddress,perform:()=>{W(o,e,a,s,u,g,f,_,r)}}):{behavior:"allow",perform:()=>{v(),f||i&&S(o,_)}}}))}var ce=r(21545),pe=r(43110),me=r(21899);function fe({address:e,addressOptions:t,inPaymentContext:r=!1,disabled:a=!1}){const s=(0,m.Dv)(e),o=(0,d.q)(),i=function(e){const t=(0,m.xP)();return r=>{const{firstName:a,lastName:n,company:s,address1:o,address2:d,city:i,countryCode:l,postalCode:u,zoneCode:c,phone:p,coordinates:m}=e.fields;t.write(a,r.firstName),t.write(n,r.lastName),t.write(s,r.company),t.write(o,r.address1),t.write(d,r.address2),t.write(i,r.city),t.write(l,r.countryCode),t.write(u,r.postalCode),t.write(c,r.zoneCode),t.write(p,r.phone),t.write(m,r.coordinates)}}(e),l=t.find((e=>(0,v.LD)(s,e.address)))?.value,u=(0,n.useRef)(!1),c=(0,n.useMemo)((()=>[...t,{label:o("contact.new_address_label","Utiliser une nouvelle adresse"),value:`${t.length}`,address:(0,me.f0)({countryCode:e.fields.countryCode.init,zoneCode:e.fields.zoneCode.init})}]),[t,o,e.fields.countryCode.init,e.fields.zoneCode.init]),p=c[c.length-1].value,[f,g]=(0,n.useState)(l&&!r?l:p);if(r&&!u.current){const e=c[parseInt(f,10)].address;i(e)}return(0,n.useEffect)((()=>{const e=t.find((e=>(0,v.LD)(s,e.address)))?.value;g(e||p)}),[s,t,p]),(0,n.useEffect)((()=>{u.current=!0}),[]),n.default.createElement(pe.P,{value:f,label:o("contact.stored_addresses_label","Adresses enregistrées"),options:c,onChange:e=>{const t=c[parseInt(e,10)].address;i(t),g(e)},disabled:a})}var ge=r(57126);const ve={tabindex:"-1",label:"",ariaHidden:!0,ariaLabel:"no-label",type:"text"},ye=(0,n.memo)((function({address:e,addressType:t,availableCountries:r,country:s,onAutofillCaptured:o}){const d=(0,g.er)(),i=(0,m.xP)(),l=t=>({currentTarget:{value:r}})=>{i.write(e.fields[t],r),o?.()},u=()=>({currentTarget:{value:t}})=>{i.write(e.fields.zoneCode,t)};return n.default.createElement(ge.G,{visibility:"hidden"},n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_firstName",name:"firstName",autoComplete:c(t,"given-name"),onChange:l("firstName")})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_lastName",name:"lastName",autoComplete:c(t,"family-name"),onChange:l("lastName")})),d.isVisible("company")&&n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_company",name:"company",autoComplete:c(t,"organization"),onChange:l("company")})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_address1",name:"address1",autoComplete:c(t,d.isVisible("address2")?"address-line1":"street-address"),onChange:l("address1")})),d.isVisible("address2")&&n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_address2",name:"address2",autoComplete:c(t,"address-line2"),onChange:l("address2")})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_city",name:"city",autoComplete:c(t,"address-level2"),onChange:l("city")})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_country",name:"country",autoComplete:c(t,"country"),onChange:({currentTarget:{value:t}})=>{const a=r.find((e=>e.value===t||e.label.toLowerCase()===t.toLowerCase()));a&&i.write(e.fields.countryCode,a.value)}})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_zone",name:"zone",autoComplete:c(t,"address-level1"),onChange:u()})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_address_level1",name:"address-level1",autoComplete:c(t,"address-level1"),onChange:u()})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_province",name:"province",autoComplete:c(t,"address-level1"),onChange:u()})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_postalCode",name:"postalCode",autoComplete:c(t,"postal-code"),onChange:l("postalCode")})),d.isVisible("phone",s.code)&&n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_phone",name:"phone",autoComplete:c(t,"tel"),onChange:l("phone")})));function c(e,t){return e?`${e} ${t}`:t}})),be=(0,n.memo)((function({address:e,addressType:t,availableCountries:r,country:s,onAutofillCaptured:o}){const d=(0,g.er)(),i=(0,m.xP)(),l=t=>({currentTarget:{value:r}})=>{i.write(e.fields[t],r),o?.()};return n.default.createElement(ge.G,{visibility:"hidden"},d.isVisible("address2")&&n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_collapsed_address2",name:"address2",autoComplete:u(t,"address-line2"),onChange:l("address2")})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_collapsed_city",name:"city",autoComplete:u(t,"address-level2"),onChange:l("city")})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_collapsed_zone",name:"zone",autoComplete:u(t,"address-level1"),onChange:({currentTarget:{value:t}})=>{i.write(e.fields.zoneCode,t)}})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_collapsed_address_level1",name:"address-level1",autoComplete:u(t,"address-level1"),onChange:({currentTarget:{value:t}})=>{i.write(e.fields.zoneCode,t)}})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_postal_collapsed_postalCode",name:"postalCode",autoComplete:u(t,"postal-code"),onChange:l("postalCode")})),d.isVisible("phone",s.code)&&n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill__collapsed_phone",name:"phone",autoComplete:u(t,"tel"),onChange:l("phone")})),n.default.createElement("input",(0,a.Z)({},ve,{id:"autofill_collapsed_country",name:"country",autoComplete:u(t,"country"),onChange:({currentTarget:{value:t}})=>{const a=r.find((e=>e.value===t||e.label.toLowerCase()===t.toLowerCase()));a&&i.write(e.fields.countryCode,a.value)}})));function u(e,t){return e?`${e} ${t}`:t}}));var _e=r(73418),Ce=r(9832),he=r(61918);function Ee({address:e,addressErrors:t,addressType:r,addressSettings:s,loading:o,editDisabled:i}){const l=(0,d.q)(),{firstNameRequired:u}=(0,Ce.D)(),c=s.isRequired("firstName")||u(r),p=(0,n.useCallback)((e=>{if(c&&!(0,he.Um)(e))return l("field_errors.address_first_name_blank","Entrez un prénom")}),[c,l]),m=(0,he.a8)(e.fields.firstName,t.firstName,p);return n.default.createElement(_e.nv,(0,a.Z)({protectedInput:!0,name:"firstName",label:c?l("contact.first_name_label","Prénom"):l("contact.optional_first_name_label","Prénom (optionnel)"),required:c,autocomplete:{group:r,field:"given-name"},readonly:o||i},m))}var ze=r(6664);function ke({address:e,addressType:t,addressErrors:r,addressSettings:s,loading:o,editDisabled:i}){const l=(0,d.q)(),u=(0,ze.I)(),c=s.isRequired("lastName"),p=(0,n.useCallback)((e=>{if(c&&!(0,he.Um)(e))return l("field_errors.address_last_name_blank","Entrez un nom")}),[c,l]),m=(0,he.a8)(e.fields.lastName,r.lastName,p),f=c?l("contact.last_name_label","Nom"):l("contact.optional_last_name_label","Nom (facultatif)");return n.default.createElement(_e.nv,(0,a.Z)({name:"lastName",protectedInput:!0,label:u?l("contact.optional_recipient_label","Attention (facultatif)"):f,required:c,autocomplete:{group:t,field:"family-name"},readonly:o||i},m))}var we=r(47981);function Se({addressType:e,address:t,addressErrors:r,addressSettings:s,loading:o,editDisabled:i}){const l=(0,d.q)(),u=(0,ze.I)(),c="inactive"!==(0,we.E)(),p=s.isRequired("company"),m=(0,n.useCallback)((e=>{if(p&&!(0,he.Um)(e))return l("field_errors.address_company_blank","Entrez un nom d'entreprise")}),[p,l]),f=(0,he.a8)(t.fields.company,r.company,m),g=c&&void 0===f.value?{value:u?.shippingAddress?.company}:{};return n.default.createElement(_e.nv,(0,a.Z)({name:"company",label:p?l("contact.company_label","Entreprise"):l("contact.optional_company_label","Entreprise (optionnel)"),required:p,autocomplete:{group:e,field:"organization"},readonly:o||i},f,g))}var Ae=r(20529),Ie=r(98390),Te=r(31445);function Le(){const e=(0,d.q)();return n.default.createElement(Te.g,{blockAlignment:"center",spacing:"small200"},n.default.createElement(j.JO,{source:"info"}),n.default.createElement(G.x,null,e("contact.civic_number_warning","Ajoutez un numéro de rue, le cas échéant")))}const Oe={"Field-sizeSmall":"Vob8N","Input-AccessoryOffset":"R5Ptu"};function Ze(e){const{country:t,address:r,addressRef:s,addressType:l,addressErrors:c,addressSettings:p,loading:f,editDisabled:g,missingBuildingNumberInAddress2:v,autocompleteDisabled:y,resetAddressSuggestions:b}=e,_=(0,d.q)(),[,C]=(0,m.KO)(r.fields.coordinates),h=(0,m.Dv)(r.fields.address1),E=(0,m.Dv)(r.fields.address2),[z,k]=(0,n.useState)(!w(h||"")),S=(0,m.xP)(),A=(0,N.a)(),O=(0,L.Lk)(),{id:Z}=(0,I.L)(),q=(0,P._v)(),D=(0,i.b)(),x=(0,R.I)(),M=S.read(r).value,B=(0,n.useCallback)((e=>{if(!(0,he.Um)(e))return _("field_errors.address_address1_blank","Entrez une adresse")}),[_]),U=(0,he.a8)(r.fields.address1,c.address1,B),F=e=>{e!==U.value&&(C(void 0),U.onChange(e),b?.(),w(e)||k(!0))},j=e=>{w(e)&&k(!1),U.onInput(e)},G=p.isVisible("address2")?"address-line1":"street-address",$=!y&&(0,Ae.rx)(t,p),H={group:l,field:G};let J=!1;t.buildingNumberRequired&&(J=Boolean(z&&h),t.buildingNumberMayBeInAddress2&&(J=Boolean(z&&v&&(h||E))));const K=(0,n.useRef)(J);K.current!==J&&(J&&function(){if(q.value.defaultAttributes&&A){const e=q.value.defaultAttributes?.uniqToken||"",r={schemaId:V.gn.BuildingNumberNudge,payload:{checkoutToken:O.checkoutSessionIdentifier||"",shopId:parseInt((0,T.Bp)(Z),10),uniqueToken:e,address1:M.address1||"",address2:M.address2||"",city:M.city||"",zone:M.zoneCode||"",zip:M.postalCode||"",territory:t.code,promptType:"missing_street_number",locale:D,context:"shipping"===l?"Shipping address":"Billing address"}};A?.record(r)}}(),K.current=J);const W=$?n.default.createElement(Pe,(0,a.Z)({},e,U,{onChange:F,onInput:j,autocomplete:H})):n.default.createElement(_e.nv,(0,a.Z)({ref:s,name:"address1",label:_("contact.address1_label","Adresse"),required:!0,autocomplete:H,readonly:f||g},U,{onChange:F,onInput:j,protectedInput:!0})),X=o()(Oe["Field-sizeSmall"],{[Oe["Input-AccessoryOffset"]]:$});return n.default.createElement("div",{className:X},n.default.createElement(u.E,{spacing:"small200"},W,J&&"BASIC"===x&&n.default.createElement(Le,null)))}function Pe({value:e,error:t,onInput:r,onChange:a,onAddressAutoComplete:s,loading:o,editDisabled:i,address:l,autocomplete:u,addressType:c,onBlur:p,resetAddressSuggestions:f}){const g=(0,d.q)(),v=rt(l,s,f),y=(0,m.Dv)(l.fields.countryCode);return n.default.createElement(Ie.w,{name:"address1",field:"address1",label:g("contact.address1_label","Adresse"),accessory:n.default.createElement(j.JO,{source:"magnify",appearance:"subdued"}),countryCode:y,onSelect:v,required:!0,autocomplete:u,readonly:o||i,value:e,error:t,onChange:a,onInput:r,addressType:c,onBlur:p,protectedInput:!0})}var Ne=function(e){return e.Focused="focused",e.Visible="visible",e.Hidden="hidden",e}(Ne||{});function Ve({address:e,addressType:t,addressErrors:r,addressSettings:s,loading:o,editDisabled:i,setMissingBuildingNumberInAddress2:l,resetAddressSuggestions:u}){const p=(0,d.q)(),m=(0,Q.un)(),f=(0,n.useRef)(null),g=s.isRequired("address2"),v=(0,n.useCallback)((e=>{if(g&&!(0,he.Um)(e))return p("field_errors.address_address2_blank","Entrez un numéro d’appartement, de suite, etc.")}),[g,p]),y=(0,he.a8)(e.fields.address2,r.address2,v),b=Boolean(y.value?.length),_=!m||g||b?Ne.Visible:Ne.Hidden,[C,h]=(0,n.useState)(_);return(0,n.useEffect)((()=>{C===Ne.Focused&&f.current?.focus()}),[C]),(0,n.useEffect)((()=>{C===Ne.Hidden&&b&&h(Ne.Visible)}),[C,b]),C===Ne.Hidden?n.default.createElement(ge.G,null,n.default.createElement(c.r,{textDecoration:"none",onPress:()=>{h(Ne.Focused)}},n.default.createElement(Te.g,{spacing:"small400",blockAlignment:"center"},n.default.createElement(j.JO,{source:"plus",size:"extraSmall"}),p("shipping.address2_add_label","Ajouter un numéro d’appartement, de suite, etc.")))):n.default.createElement(_e.nv,(0,a.Z)({name:"address2",label:g?p("contact.address2_label","Appartement, suite, etc."):p("contact.optional_address2_label","Appartement, suite, etc. (optionnel)"),required:g,autocomplete:{group:t,field:"address-line2"},readonly:o||i},y,{ref:f,onChange:e=>{y.onChange(e),u?.(),w(e)||l?.(!0)},onInput:e=>{y.onInput(e),w(e)&&l?.(!1)}}))}var qe=r(32406);const De={"Field-sizeSmall":"ii1aN"},xe=new Map([[z.C.Ca,/^[A-Za-z]\d[A-Za-z]\s*\d[A-Za-z]\d$/],[z.C.Us,/^\d{5}(?:[-\s]?\d{4})?$/]]),Re=new Map([["postal_code_label","postal_code"],["zip_code_label","zip_code"],["postcode_label","postcode"],["pincode_label","pincode"]]);function Me(e){const{country:t,address:r,addressType:s,addressErrors:o,addressSettings:i,loading:l,editDisabled:u,resetAddressSuggestions:c}=e,p=(0,d.q)(),f=(0,n.useCallback)((e=>{if(!(0,he.Um)(e))return p("field_errors.address_zip_blank","Entrez un code postal")}),[p]),g=(0,q.Pg)(t.localizationKeys.postalCode??"postal_code_label",t.labels.postalCode,Re),v=g("label"),y=g("placeholder"),b=(0,he.a8)(r.fields.postalCode,o.postalCode,f),[_,C]=(0,n.useState)(b.value);(0,m.bQ)(r.fields.postalCode,(e=>{e!==_&&C(e)}));const[,h]=(0,m.KO)(r.fields.coordinates),E=t.autocompletionField===qe.N.PostalCode&&i.autocompleteEnabled&&(0,Ae.h0)(t.code),z=e=>{e!==b.value&&(h(void 0),b.onChange(e),c?.())},k=xe.get(t.code),w=E?n.default.createElement(Ue,(0,a.Z)({},e,b,{onChange:z,label:v})):n.default.createElement(_e.J2,(0,a.Z)({name:"postalCode",label:v,placeholder:y,required:!0,inputMode:Be(t),autocomplete:{group:s,field:"postal-code"},letterCase:"uppercase",readonly:l||u},b,{onInput:function(e){const t=e.toLocaleUpperCase();b.onInput(t),C(t),k&&k.test(t)&&z(t)},onChange:z,controlledValue:_}));return n.default.createElement("div",{className:De["Field-sizeSmall"]},w)}function Be(e){const{pureNumericPostalCode:t}=e;return t?"numeric":"text"}function Ue({label:e,value:t,error:r,onInput:a,onChange:s,onAddressAutoComplete:o,loading:d,editDisabled:i,address:l,addressType:u,onBlur:c,resetAddressSuggestions:p}){const f=rt(l,o,p),g=(0,m.Dv)(l.fields.countryCode);return n.default.createElement(Ie.w,{name:"postalCode",field:"postalCode",label:e,countryCode:g,onSelect:f,required:!0,autocomplete:{group:u,field:"postal-code"},readonly:d||i,value:t,error:r,onChange:s,onInput:a,addressType:u,onBlur:c})}function Fe({address:e,addressType:t,addressErrors:r,loading:s,editDisabled:o,resetAddressSuggestions:i}){const l=(0,d.q)(),u=(0,n.useCallback)((e=>{if(!(0,he.Um)(e))return l("field_errors.address_city_blank","Saisissez une ville")}),[l]),c=(0,he.a8)(e.fields.city,r.city,u),[,p]=(0,m.KO)(e.fields.coordinates);return n.default.createElement(_e.nv,(0,a.Z)({name:"city",label:l("contact.city_label","Ville"),required:!0,autocomplete:{group:t,field:"address-level2"},readonly:s||o},c,{onChange:e=>{e!==c.value&&(p(void 0),c.onChange(e),i?.())}}))}const je=new Map([["province_label","province"],["county_label","county"],["state_label","state"],["region_label","region"],["prefecture_label","prefecture"],["governorate_label","governorate"],["emirate_label","emirate"],["state_and_territory_label","state_and_territory"]]);function Ge({country:e,address:t,addressType:r,addressErrors:s,loading:o,editDisabled:i,resetAddressSuggestions:l}){const u=(0,d.q)(),c=(0,n.useCallback)((e=>{if(!(0,he.Um)(e))return u("field_errors.address_province_blank","Sélectionnez un État/une province")}),[u]),p=(0,q.Pg)(e.localizationKeys.zone??"province_label",e.labels.zone,je),f=p("label"),g=p("placeholder"),v=(0,he.a8)(t.fields.zoneCode,s.zoneCode,c),[,y]=(0,m.KO)(t.fields.coordinates),[,b]=(0,m.KO)(s.postalCode);return(0,n.useEffect)((()=>{const t=v.value;if(null==t)return;const r=t.toLowerCase(),a=e.zones.find((e=>e.code===t||e.name.toLowerCase()===r||e.nameWithAlternates?.some((e=>e.toLocaleLowerCase()===r))));a&&v.onChange(a.code)}),[e.zones,v]),n.default.createElement(pe.P,(0,a.Z)({name:"zone",label:f,placeholder:g,options:(_=e.zones,_.map((e=>{const{name:t,code:r,nameWithAlternates:a}=e;return{label:t,value:r,alternateValues:a}}))),required:!0,autocomplete:{group:r,field:"address-level1"},readonly:o||i},v,{onChange:e=>{e!==v.value&&(y(void 0),b(void 0),l?.(),v.onChange(e))}}));var _}function $e({address:e,addressType:t,addressErrors:r,availableCountries:s,loading:o,editDisabled:l,resetAddressSuggestions:u}){const c=(0,d.q)(),p=(0,he.a8)(e.fields.countryCode,r.countryCode),f=(0,he.a8)(e.fields.zoneCode,r.zoneCode),g=(0,Q.un)(),[,v]=(0,m.KO)(e.fields.coordinates),[,y]=(0,m.KO)(r.postalCode),[,b]=(0,m.KO)(r.zoneCode),_=(0,N.a)(),C=(0,L.Lk)(),{id:h}=(0,I.L)(),E=(0,P._v)(),z=(0,i.b)(),k=(0,n.useCallback)(((e,r)=>{if(E.value.defaultAttributes&&_){const a=E.value.defaultAttributes?.uniqToken||"",n={schemaId:V.gn.CountrySelection,payload:{checkoutToken:C.checkoutSessionIdentifier||"",shopId:parseInt((0,T.Bp)(h),10),uniqueToken:a,territoryCode:r,selectionMethod:e,context:"shipping"===t?"Shipping address":"Billing address",locale:z}};_?.record(n)}}),[E.value.defaultAttributes,_,t,z,C.checkoutSessionIdentifier,h]);return(0,n.useEffect)((()=>{k("auto-selected",p.value)}),[E.value.defaultAttributes?.uniqToken,_]),n.default.createElement(pe.P,(0,a.Z)({name:"countryCode",label:c("contact.country_label","Pays/région"),options:s,required:!0,autocomplete:{group:t,field:"country"},readonly:o||l},p,{onChange:e=>{g||f.onChange(void 0),e!==p.value&&(p.onChange(e),u?.(),v(void 0),b(void 0),y(void 0),k("user-input",e))}}))}var He=r(72056),Je=r(14289),Ke=r(14257),We=r(37694);function Xe({country:e,addressType:t,addressErrors:r,addressSettings:s,addressFormSettings:o,address:i,loading:l,editDisabled:u}){const{code:c}=e,p=(0,d.q)(),m=s.isRequired("phone",c),f=(0,We.fD)(),g=(0,n.useCallback)((e=>{const t=(0,he.Um)(e);return m&&!t?p("field_errors.phone_blank","Saisir un numéro de téléphone"):t&&!f(e??"",c)?p("field_errors.shipping_line_phone_invalid","Saisir un numéro de téléphone valide"):void 0}),[m,f,c,p]),v=(0,he.a8)(i.fields.phone,r.phone,g),y=(0,C.m)(),b=y?p("siberia.contact.optional_phone_label","Numéro de téléphone (facultatif)"):p("contact.optional_phone_label","Téléphone (optionnel)"),_=p(y?"siberia.contact.phone_label":"contact.phone_label","Téléphone"),h=!1!==o?.phoneTooltip&&n.default.createElement(He.s,{overlay:n.default.createElement(Je.u,null,p("contact.phone_tooltip","Au cas où nous aurions besoin de vous contacter à propos de votre commande"))},n.default.createElement(j.JO,{source:"question",appearance:"subdued",accessibilityLabel:p("general.tooltip_accessibility_label","En savoir plus")}));return n.default.createElement(Ke.$,(0,a.Z)({name:"phone",countryCode:c,label:m?_:b,hideCountries:!0,required:m,autocomplete:{group:t,field:"telephone"},readonly:l||u,accessory:h||void 0},v))}const Qe="I9W0A";class Ye extends Error{constructor(...e){super(...e),this.name="UnexpectedFieldError"}}const et=(0,n.memo)((function({id:e,address:t,countries:r,addressSettings:s,addressType:z,addressErrors:D,additionalFieldGroups:x,children:M,expanded:B=!0,autocompleteDisabled:U=!1,collapsible:F=!1,settings:j,loading:G=!1,onAddressAutoComplete:$,onManualAddressEntryClick:H,onAutofillCaptured:J,inPaymentContext:K,showSavedAddressSelector:W=!0}){const X=(0,d.q)(),{geolocation:Q}=(0,p.Q)(),Y=(0,g.er)(),[ee]=(0,k.Ew)(),te=(0,m.Dv)(t.fields.countryCode),re=(0,n.useMemo)((()=>(0,v.Yu)()),[]),{resetAddressSuggestions:ae}=(0,q.Zu)(re,D),{isEmailOnlySignUp:ne}=(0,O.L)(),se=(0,Z.a)(),oe=(0,m.xP)(),de=(0,y.eS)(E.k.Delivery,b.sC.Destination)&&"shipping"===z,ie=(0,C.m)(),{details:le,loading:pe}=(0,h.J$)(te),me=(0,n.useMemo)((()=>s??Y),[s,Y]),ge=(0,n.useMemo)((()=>le??Q.country),[le,Q.country]),ve=(0,n.useMemo)((()=>!r||de?[{value:ge.code,label:ge.name}]:r),[r,ge,de]),_e=(0,_.Zo)(),Ce=(0,n.useMemo)((()=>"CustomerProfile"===_e?.__typename?(("shipping"===z?_e?.shippingAddresses:_e?.billingAddresses)??[]).map((({address:e},t)=>({value:t.toString(),label:e.label,address:{...e}}))):[]),[_e,z]),he=Ce.length>0,Ee=(0,n.useMemo)((()=>{const e=ge;if(ie){const t=e.formatting.edit;e.formatting.edit=(0,v.l4)(t)}return(0,v.mt)(e,me)}),[ge,me,ie]),ze=(0,n.useMemo)((()=>Ee.findIndex((e=>"{address1}"===e.id))+1),[Ee]),{groupsBeforeCountry:ke,countryGroup:we,groupsAfterCountry:Se}=(0,n.useMemo)((()=>nt(Ee)),[Ee]);ue(t,{countryCode:te,availableCountries:ve,addressSettings:me,suggestions:re,addressType:z,addressErrors:D}),function(e,t,r,a,s,o,d){const l=(0,m.xP)(),u=(0,m.Dv)(e.fields.countryCode),c=(0,n.useMemo)((()=>t.flatMap((({fields:e})=>e))),[t]);(0,n.useEffect)((()=>{for(const e of Object.keys(r))c.includes(e)||(l.write(r[e],void 0),Object.keys(a).includes(e)&&l.write(a[e],void 0))}),[l,r,a,c]);const p=(0,N.a)(),g=(0,L.Lk)(),{id:y}=(0,I.L)(),b=(0,P._v)(),{details:_}=(0,h.J$)(u),C=(0,i.b)(),E=(0,R.I)();const z=(0,n.useCallback)((e=>{if("error"!==e.type||null==d||s)return;const{violations:t}=e,a=(0,v.YO)(d,t);let n=!1;for(const[s,d]of a)l.write(r[s],d),o.isVisible(s,u)||(n=!0);n&&window.location.reload()}),[s,o,d,r,l,u]),k=(0,A.g)();(0,n.useEffect)((()=>{z(k)}),[k,z]),(0,f.lH)((t=>{(function(t){if("error"===t.type&&null!=d&&!s){const{violations:e}=t,a=(0,v.YO)(d,e);for(const[t,n]of a)l.write(r[t],n)}const a=[];for(const e of Object.keys(r))l.read(r[e]).value&&a.push(e);if("invalid"===t.type||"error"===t.type||"success"===t.type&&"progression"===t.negotiationStage){const r=l.read(e).value;let n;if("invalid"===t.type&&(n=t.reasons.toString()),b.value.defaultAttributes){const e=b.value.defaultAttributes?.uniqToken||"",t=_?.zones?.find((e=>e.code===r.zoneCode))?.name||r.zoneCode,s={schemaId:V.gn.AddressSubmission,payload:{checkoutToken:g.checkoutSessionIdentifier||"",shopId:parseInt((0,T.Bp)(y),10),uniqueToken:e,territory:_?.name||"",context:"shipping"===d?"Shipping address":"Billing address",address1:r.address1||"",address2:r.address2||"",city:r.city||"",zone:t||"",zip:r.postalCode||"",errorCode:n||"",errorFields:a,locale:C,matchingStrategy:E}};p?.record(s)}}})(t),z(t)}))}(t,Ee,D,re,ee,me,z);const[Ae,Ie]=(0,n.useState)(!1);(0,n.useEffect)((function(){(!ne||!se)&&!me.isVisible("phone",ge.code)&&oe.write(t.fields.phone,"")}),[ge,t.fields.phone,me,oe,ne,se]),(0,n.useEffect)((()=>{if(pe||G){const e=setTimeout((()=>Ie(!0)),400);return()=>clearTimeout(e)}Ie(pe)}),[G,pe]);const Te=(0,m.Dv)(t.fields.address2),[Le,Oe]=(0,n.useState)(!w(Te||"")),Ze=(0,n.useRef)(null),Pe={address:t,addressErrors:D,addressType:z,addressSettings:me,addressRef:Ze,addressFormSettings:j,country:ge,availableCountries:ve,onAddressAutoComplete:$,missingBuildingNumberInAddress2:Le,setMissingBuildingNumberInAddress2:Oe,resetAddressSuggestions:ae},Ne=(0,n.useCallback)((()=>{H?.(),setTimeout((()=>{Ze.current?.focus()}))}),[H]);return n.default.createElement("div",{id:e},n.default.createElement(S.g,{active:Ae},n.default.createElement(ce.l,null,_e&&he&&W?n.default.createElement(fe,{address:t,addressOptions:Ce,inPaymentContext:K,disabled:de}):null,F?n.default.createElement(n.default.Fragment,null,Ee.slice(0,ze).map((e=>n.default.createElement(tt,(0,a.Z)({key:e.id,group:e,additionalGroups:x},Pe,{loading:Ae,autocompleteDisabled:U,editDisabled:de})))),!B&&n.default.createElement(be,{address:t,addressType:z,country:ge,availableCountries:ve,onAutofillCaptured:J}),n.default.createElement("div",{className:"_Yuii"},n.default.createElement("div",{className:Qe},n.default.createElement(l.u,{id:"collapsed-fields",open:B,renderChildrenWhenCollapsed:!0},n.default.createElement(ce.l,null,Ee.slice(ze).map((e=>n.default.createElement(tt,(0,a.Z)({key:e.id,group:e,additionalGroups:x},Pe,{loading:Ae,editDisabled:de})))),M))),n.default.createElement("div",{className:o()(Qe,{z4F0X:B})},n.default.createElement(u.E,{inlineAlignment:"start"},n.default.createElement(c.r,{"aria-controls":"collapsed-fields",onPress:Ne},X("shipping.enter_address_manually_label","Saisir l'adresse manuellement")))))):n.default.createElement(n.default.Fragment,null,ke.map((e=>n.default.createElement(tt,(0,a.Z)({key:e.id,group:e,additionalGroups:x},Pe,{loading:Ae,editDisabled:de})))),n.default.createElement(tt,(0,a.Z)({key:"country",group:we,additionalGroups:x},Pe,{loading:Ae,editDisabled:de})),Se.map((e=>n.default.createElement(tt,(0,a.Z)({key:e.id,group:e,additionalGroups:x},Pe,{loading:Ae,editDisabled:de})))),M)),n.default.createElement(ye,{address:t,addressType:z,country:ge,availableCountries:ve,onAutofillCaptured:J})))}));function tt({addressRef:e,additionalGroups:t,autocompleteDisabled:r,group:s,...o}){const{loading:d}=o,i=t?.filter((({after:e})=>s.fields.includes(e)))??[];return n.default.createElement(n.default.Fragment,null,n.default.createElement(ce.T,null,s.fields.map((t=>{switch(t){case"firstName":return n.default.createElement(Ee,o);case"lastName":return n.default.createElement(ke,o);case"company":return n.default.createElement(Se,o);case"address1":return n.default.createElement(Ze,(0,a.Z)({},o,{addressRef:e,autocompleteDisabled:r}));case"address2":return n.default.createElement(Ve,o);case"postalCode":return n.default.createElement(Me,o);case"city":return n.default.createElement(Fe,o);case"zoneCode":return n.default.createElement(Ge,o);case"countryCode":return n.default.createElement($e,o);case"phone":return n.default.createElement(Xe,o);default:throw new Ye(`Unexpected field: ${t}`)}}))),i.map((e=>n.default.createElement(ce.T,{key:e.id},e.render({loading:d})))))}function rt(e,t,r){const a=(0,m.xP)();return n=>{const{coordinates:s,address1:o,address2:d,city:i,zoneCode:l,countryCode:u,postalCode:c}=e.fields;a.write(s,n.coordinates),a.write(o,n.address1??""),a.write(d,(e=>n.address2??e)),a.write(i,n.city),a.write(l,n.zoneCode),a.write(u,(e=>Object.values(z.C).find((e=>e===n.countryCode?.toUpperCase()))??e)),a.write(c,n.postalCode),r?.(),t?.(n)}}function at(e,t){const r=(0,m.xP)();return a=>{const{address1:n,address2:s,city:o,zoneCode:d,postalCode:i}=t.fields,l=a[e]??"";switch(e){case"address1":r.write(n,l);break;case"address2":r.write(s,l);break;case"city":r.write(o,l);break;case"zoneCode":r.write(d,l);break;case"postalCode":r.write(i,l)}}}function nt(e){const t=e.findIndex((e=>e.fields.includes("countryCode")));return{groupsBeforeCountry:e.slice(0,t),countryGroup:e[t],groupsAfterCountry:e.slice(t+1)}}},98390:(e,t,r)=>{r.d(t,{w:()=>d});var a=r(59748),n=r(20658),s=r(73418),o=r(45878);const d=(0,n.L)({load:()=>(0,o.R)((()=>r.e(786).then(r.bind(r,9751)))),id:()=>9751,renderLoading:e=>a.default.createElement(s.nv,e)})},21545:(e,t,r)=>{r.d(t,{T:()=>l,l:()=>i});var a=r(59748),n=r(97977),s=r(13866),o=r(61507),d=r(4152);function i({children:e}){const{formLayout:{spacing:t}}=(0,n.G)();return a.default.createElement(s.E,{spacing:t},e)}function l({children:e}){const{formLayout:{spacing:t="base"}}=(0,n.G)(),r=(0,o.Vt)({base:!0,small:!1})?s.E:d.T;return a.default.createElement(r,{spacing:t},e)}},3182:(e,t,r)=>{r.d(t,{g:()=>o});var a=r(59748),n=r(8758);const s={Wrapper:"pxSEU",Loading:"Kyqce"};function o({active:e=!1,size:t="base",children:r}){return a.default.createElement("div",{className:s.Wrapper,"aria-hidden":e?"true":"false"},e&&a.default.createElement("div",{className:s.Loading},a.default.createElement(n.$,{size:t})),r)}},77291:(e,t,r)=>{r.d(t,{h8:()=>c,r5:()=>m,Pj:()=>p,qY:()=>f,ch:()=>g});var a=r(59748),n=r(94184),s=r.n(n),o=r(47242),d=r(59213),i=r(127),l=r(40915);const u={Step:"VheJw",Content:"s_qAq",Header:"VUPKe",isGrouped:"USpd3",Actions:"oQEAZ","Actions-displayInline":"WD4IV"};function c({children:e}){return a.default.createElement("div",{className:u.Step},e)}function p({grouped:e,children:t}){const r=s()(u.Content,{[u.isGrouped]:e});return a.default.createElement("div",{className:r},t)}function m({children:e}){const t=(0,i.Lr)("Checkout::Actions::RenderBefore"),{actions:{display:r="inline"}}=(0,d.lz)(),n=s()(u.Actions,u[(0,o.O)("Actions-display",r)]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(l._,{extensions:t,spacing:"base"}),a.default.createElement("div",{className:n},e))}function f({children:e}){return a.default.createElement("div",{className:u.PrimaryAction},e)}function g({children:e}){return a.default.createElement("div",{className:u.SecondaryAction},e)}},87979:(e,t,r)=>{r.d(t,{c:()=>p,e:()=>c});var a=r(80040),n=r(59748),s=r(83235),o=r(9085),d=r(62108),i=r(85822);class l extends Error{constructor(...e){super(...e),this.name="MissingAutocompleteEndpointError"}}const u=(0,d.Q)("Autocomplete-IFrame");function c(){const e=(0,a.F)("autocomplete-sandbox"),t=(0,n.useRef)(),r=(0,i.M)(void 0,u);return(0,n.useLayoutEffect)((()=>{if(!e)throw new o.br("Unable to find autocomplete sandbox URL");const a=(0,s.lJ)({id:r,url:e,privileges:["allow-scripts","allow-same-origin"]});return t.current=(0,s.r2)(a,e),()=>{a.remove(),t.current?.terminate()}}),[e,r]),(0,n.useMemo)((()=>({search(...e){if(!t.current)throw new l("Called search without valid autocomplete endpoint");return t.current.call.search(...e)},fetchAddress(...e){if(!t.current)throw new l("Called fetchAddress without valid autocomplete endpoint");return t.current.call.fetchAddress(...e)}})),[])}function p(){const e=(0,a.F)("autocomplete-sandbox"),t=(0,n.useRef)();return(0,n.useLayoutEffect)((()=>{let r;try{if(!e)throw new o.br("Unable to find autocomplete sandbox URL");r=(0,s.lJ)({id:"validation",url:e,privileges:["allow-scripts","allow-same-origin"]}),r.addEventListener("load",(()=>{t.current=(0,s.r2)(r,e)}))}catch(a){if(a instanceof o.br)return()=>{}}return()=>{r.remove(),t.current?.terminate()}}),[e]),(0,n.useMemo)((()=>({validation(...e){if(!t.current)throw new l("Called validation without valid autocomplete endpoint");return t.current.call.validation(...e)}})),[])}},85822:(e,t,r)=>{r.d(t,{M:()=>n});var a=r(59748);function n(e,t){const r=(0,a.useRef)(e);return r.current=e??r.current??t(),r.current}},91508:(e,t,r)=>{r.d(t,{$:()=>o});var a=r(93211),n=r(82481);const s=new Map([[n.z.InsufficientFunds,"insufficient_funds"],[n.z.InvalidPaymentMethod,"cannot_verify"],[n.z.FundingError,"processing_error"],[n.z.CanceledPaypalBillingAgreement,"processing_error"],[n.z.TokenExpired,"processing_error"],[n.z.InvalidToken,"processing_error"],[n.z.UnilateralAuthError,"processing_error"],[n.z.ThirdPartyInternalError,"processing_error"],[n.z.AuthorizationError,"processing_error"],[n.z.InvalidCurrency,"processing_error"],[n.z.InvalidItemTotal,"processing_error"],[n.z.InvalidCurrency,"processing_error"],[n.z.UnprocessableTransaction,"processing_error"],[n.z.InvoiceAlreadyPaid,"processing_error"],[n.z.AuthenticationError,"cannot_verify"],[n.z.IncorrectNumber,"cannot_verify"],[n.z.IncorrectCvc,"cannot_verify"],[n.z.IncorrectZip,"cannot_verify"],[n.z.IncorrectAddress,"cannot_verify"],[n.z.IncorrectPin,"cannot_verify"],[n.z.AuthenticationError,"three_d_secure_failed"],[n.z.InvalidNumber,"invalid_number"],[n.z.InvalidExpiryDate,"invalid_expiry_date"],[n.z.InvalidCvc,"invalid_cvc"],[n.z.ExpiredCard,"expired_card"],[n.z.CardDeclined,"card_declined"],[n.z.CallIssuer,"call_issuer"],[n.z.PickUpCard,"pick_up_card"],[n.z.TestModeLiveCard,"test_mode_live_card"],[n.z.TransientError,"transient_error"],[n.z.InsufficientFunds,"insufficient_funds"],[n.z.InvalidShippingAddress,"invalid_shipping_address"],[n.z.MissingShippingAddress,"missing_shipping_address"],[n.z.InvalidPaymentMethod,"cannot_verify"],[n.z.PublicPaymentError,"generic_error"],[n.z.SuccessfulOffsiteWithGiftCardError,"successful_offsite_with_gift_card_error"]]);function o(e){const t=(0,a.q)();let r="generic_error";return e&&(r=s.get(e.code)||"generic_error"),t("payment_errors",{scope:r},{call_issuer:"Votre carte a été refusée. Utilisez un autre moyen de paiement ou contactez votre banque pour plus d'informations.",cannot_verify:"Les informations de votre paiement n'ont pas pu être vérifiées. Vérifiez les informations de votre carte et réessayez.",card_declined:"Votre carte a été refusée. Réessayez ou utilisez un autre moyen de paiement.",checkout_amount_changed:"Votre paiement n’a pas pu être traité, car le montant dû à la page de paiement a changé. Veuillez vérifier votre commande et réessayer.",credit_card_processing:"Votre paiement ne peut pas être traité pour des raisons techniques. Réessayez dans quelques minutes ou utilisez un autre moyen de paiement.",decision_rule_block:"Un problème est survenu lors du traitement de votre paiement. Veuillez contacter le propriétaire de la boutique.",deferred_amount_changed:"Votre paiement n’a pas pu être traité, car le montant du paiement différé a changé. Veuillez vérifier votre commande et réessayer.",deferred_date_changed:"Votre paiement n’a pas pu être traité, car la date du paiement différé a changé. Veuillez vérifier votre commande et réessayer.",deferred_payment_not_allowed:"Les paiements différés ne sont pas autorisés. Veuillez vérifier votre commande et réessayer.",deferred_payment_required:"Cette commande nécessite un paiement différé. Veuillez vérifier votre commande et réessayer.",development_store_order_limit_reached:"Vous avez atteint la limite de commandes pour la boutique de développement avec cet organisme de traitement des paiements. Pour passer une autre commande, vous devez utiliser une passerelle test de paiement. En savoir plus sur les %{development_store_order_testing_docs_link}.",development_store_order_testing_docs_link:"commandes test dans les boutiques de développement",development_store_with_order_limit:"Pour passer une commande de test, vous devez utiliser une passerelle test de paiement. En savoir plus sur les %{development_store_order_testing_docs_link}.",expired_card:"Votre carte a expiré. Utiliser un autre moyen de paiement.",generic_error:"Un problème est survenu lors du traitement de votre paiement. Réessayez ou utilisez un autre moyen de paiement.",insufficient_funds:"Votre paiement a été refusé en raison de fonds insuffisants. Réessayez ou utilisez un autre moyen de paiement.",invalid_cvc:"Saisissez un code de sécurité valide",invalid_expiry_date:"Saisissez une date d'expiration valide pour la carte",invalid_number:"Saisissez un numéro de carte valide",invalid_shipping_address:"Votre paiement n'a pas pu être traité, car nous n'avons pas trouvé votre adresse d'expédition. Vérifiez-la et réessayez.",method_not_available:"Le moyen de paiement demandé n'est pas disponible.",missing_shipping_address:"Votre paiement n'a pas pu être traité, car il manque votre adresse d'expédition. Ajoutez-en une et réessayez.",multiple_deferred_payment_not_allowed:"Un seul paiement différé est autorisé par requête. Veuillez vérifier votre requête et essayer de nouveau.",order_total_changed:"Votre paiement n'a pas pu être traité, car le total de votre commande a changé. Vérifiez le total de votre commande et réessayez.",pay_later_failed:"Une erreur s'est produite lors du traitement de votre paiement avec Pay Later. Choisissez un autre moyen de paiement et réessayez.",payment_processing:"Votre paiement ne peut pas être traité pour des raisons techniques. Réessayez ou utilisez un autre moyen de paiement.",payment_processing_no_retry:"Votre paiement ne peut pas être traité pour des raisons techniques. Veuillez essayer un autre moyen de paiement.",paypal_invalid_token:"PayPal n'était pas disponible. Réessayez ou utilisez une autre option de paiement.",paypal_zero_amount:"Vous ne pouvez pas utiliser PayPal pour les commandes de %{amount}. Confirmez l'exactitude de votre commande et passez à la caisse sans PayPal.",pick_up_card:"Votre carte a été refusée. Réessayez ou utilisez un autre moyen de paiement.",processing_error:"Un problème est survenu lors du traitement de votre paiement. Réessayez ou utilisez un autre moyen de paiement.",rejected_transaction:"Votre paiement a été refusé. Réessayez ou utilisez un autre moyen de paiement.",shipping_must_match_billing:"L’adresse de facturation doit correspondre à l’adresse d’expédition. Veuillez utiliser un autre moyen de paiement.",subscription_agreement_blank:"Pour souscrire un abonnement, vos informations de paiement doivent être enregistrées. Pour continuer, confirmez que vous acceptez ou supprimez les abonnements de votre commande.",successful_offsite_with_gift_card_error:"Un problème est survenu lors du traitement du paiement de votre carte-cadeau. Réessayez ou utilisez un autre moyen de paiement.",test_mode_live_card:"Cette boutique ne peut accepter ni les commandes réelles ni les paiements réels.",three_d_secure_failed:"Les détails de votre paiement n'ont pas pu être vérifiés. Réessayez ou utilisez un autre moyen de paiement.",three_d_secure_failed_duplicate:"L'authentification 3D Secure de la carte de crédit a échoué car une autre est déjà en cours.",three_d_secure_throttled:"Trop d'essais ; veuillez patienter avant d'essayer à nouveau",transient_error:"Un problème est survenu lors du traitement de votre paiement. Essayez d'actualiser cette page ou vérifiez votre connexion Internet."})}},53037:(e,t,r)=>{r.d(t,{X:()=>g});var a=r(87462),n=r(59748),s=r(94184),o=r.n(s),d=r(47242),i=r(96555),l=r(33578),u=r(57126),c=r(97977),p=r(14849),m=r(16031),f=r(98835);function g({id:e,selectedItems:t,onChange:r,title:s,titleHidden:g,controlHidden:v=!1,allowMultiple:y=!1,children:b,loading:_}){const C=(0,n.useRef)(r);C.current=r;const h=(0,n.useMemo)((()=>({id:e,selectedItems:t,allowMultiple:y,controlHidden:v,get onChange(){return C.current}})),[y,e,t,v]),E=s&&(g?n.default.createElement(u.G,{visibility:"hidden"},n.default.createElement("legend",null,s)):n.default.createElement("legend",{className:f.Z.Title},n.default.createElement(i.X,{level:3,accessibilityRole:"presentation"},s))),{control:{background:z,border:k},optionList:{background:w,spacing:S="none",border:A,borderStyle:I="base"}}=(0,c.G)(),T=A||k||"full",L=w||z||"color3",{parent:O}=(0,p.R)(),Z=(0,n.useMemo)((()=>"transparent"===L?O:L),[L,O]),P=o()(f.Z.OptionList,f.Z[(0,d.O)("OptionList-background",L)],f.Z[(0,d.O)("OptionList-border",T)],f.Z[(0,d.O)("OptionList-borderStyle",I)],"none"===S&&f.Z.isContainer,_&&f.Z.isLoading),N=(0,n.useMemo)((()=>({parent:Z})),[Z]);return n.default.createElement(p.u.Provider,{value:N},n.default.createElement(m.z.Provider,{value:h},n.default.createElement("fieldset",{id:e},E,n.default.createElement(l.D,null,n.default.createElement("div",(0,a.Z)({className:P},(()=>{const e={};return void 0!==_&&(e["aria-live"]="polite",e["aria-busy"]=_),e})()),b)))))}},6346:(e,t,r)=>{r.d(t,{Wx:()=>v,Hj:()=>y,LB:()=>b,Z5:()=>_});var a=r(59748),n=r(94184),s=r.n(n),o=r(47242),d=r(8428),i=r(82851),l=r(75077),u=r(97977),c=r(1046),p=r(98835),m=r(16438);function f({accessibilityRole:e,...t}){const r=(0,m.U)(),n=null==r||"presentation"===e?"p":`h${r}`;return a.default.createElement(n,t)}var g=r(9966);function v({id:e,label:t,accessibilityLabel:r,details:n,children:m,disabled:v}){const{id:y,selectedItems:b,allowMultiple:_,controlHidden:C,onChange:h}=(0,c.V)(),E=_?l.Z:i.u,z=b.includes(e),{control:{background:k},optionList:{background:w,spacing:S="none",typographyStyle:A,backgroundHovered:I=!1,backgroundChecked:T="interactive"}}=(0,u.G)(),L=w||k,O=!_&&T&&"none"!==T,Z=s()(p.Z.Option,"none"!==S&&p.Z.isContainer,v&&p.Z.OptionDisabled,z&&p.Z.OptionChecked,z&&O&&"transparent"!==L&&p.Z[(0,o.O)("OptionChecked-background",T)],z&&O&&p.Z[(0,o.O)("OptionChecked-border",T)]),P=C?a.default.createElement(f,{className:s()(p.Z.OptionLabelHeading,A&&g.Z[A])},t):a.default.createElement(d.x,{style:A},t),N=m?a.default.createElement("div",{className:p.Z.OptionLabelLayout},m):P;return C?a.default.createElement("div",{className:Z},a.default.createElement("div",{className:p.Z.OptionLabel},N),n):a.default.createElement("div",{className:Z},a.default.createElement("label",{htmlFor:`${y}-${e}`,className:s()(p.Z.OptionLabel,p.Z["OptionLabel-cursorPointer"],I&&p.Z["OptionLabel-backgroundHovered"]),"aria-label":r},a.default.createElement("div",{className:p.Z.OptionControlLayout},a.default.createElement(E,{id:`${y}-${e}`,name:`${y}`,checked:z,disabled:v,onChange:()=>{h(_?z?b.filter((t=>t!==e)):[...b,e]:[e])}}),N)),n)}function y({children:e}){return a.default.createElement("div",{className:p.Z.PrimaryContent},e)}function b({children:e}){return a.default.createElement("div",{className:p.Z.SecondaryContent},e)}function _({children:e}){return a.default.createElement("div",{className:p.Z.TertiaryContent},e)}},46818:(e,t,r)=>{r.d(t,{w:()=>c});var a=r(59748),n=r(94184),s=r.n(n),o=r(47242),d=r(1046),i=r(57884),l=r(98835),u=r(97977);function c({controlledBy:e,renderChildrenWhenCollapsed:t=!1,children:r,inlinePadding:n,blockPadding:c}){const{selectedItems:p,id:m}=(0,d.V)(),{optionList:{detailsBackground:f}}=(0,u.G)(),g=p.includes(e);return r?a.default.createElement(i.u,{open:g,id:`${m}-${e}-collapsible`,renderChildrenWhenCollapsed:t},a.default.createElement("div",{className:s()(l.Z.Details,f&&l.Z[(0,o.O)("Details-background",f)],n&&l.Z[(0,o.O)("Details-inlinePadding",n)],c&&l.Z[(0,o.O)("Details-blockPadding",c)])},r)):null}},16031:(e,t,r)=>{r.d(t,{z:()=>a});const a=(0,r(59748).createContext)(null)},1046:(e,t,r)=>{r.d(t,{V:()=>o});var a=r(59748),n=r(21261),s=r(16031);function o(){const e=(0,a.useContext)(s.z);if(null===e)throw new n.j("<Option /> and <OptionDetails /> must be used inside of an <OptionList />");return e}},98835:(e,t,r)=>{r.d(t,{Z:()=>a});const a={Title:"GR30A",OptionList:"Wo4qW","OptionList-backgroundTransparent":"CsJaD","OptionList-backgroundColor1":"HMXBR","OptionList-backgroundColor2":"lfbzo","OptionList-backgroundColor3":"m5ItP",isContainer:"PuVf0",OptionLabel:"yL8c2",isLoading:"Xr2U3",OptionDisabled:"Z5rhi","OptionList-borderStyleBase":"NdTJE","OptionList-borderStyleDotted":"X7NB2","OptionList-borderFull":"NDMe9",Option:"B4zH6",Details:"b7U_P","OptionList-borderInner":"lwZ6l",OptionChecked:"Zb82w","OptionLabel-cursorPointer":"D1RJr","OptionLabel-backgroundHovered":"ij1rU",OptionLabelHeading:"zCeLR",OptionLabelLayout:"f5aCe",OptionControlLayout:"hEGyz",TertiaryContent:"SECJK","Details-inlinePaddingNone":"XJbX1","Details-blockPaddingNone":"fKPej","Details-backgroundTransparent":"lKe0j","Details-backgroundColor1":"lXug_","Details-backgroundColor2":"gBMpx","Details-backgroundColor3":"vVaOn","OptionChecked-backgroundInteractive":"HKtYc","OptionChecked-borderInteractive":"OpmPd"}}}]);