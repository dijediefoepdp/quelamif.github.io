"use strict";(self.webpackChunkcheckout_web=self.webpackChunkcheckout_web||[]).push([[8739],{93328:function(e,t,n){n.d(t,{o:function(){return k}});var a=n(74165),r=n(15861),o=n(29439),i=(n(74916),n(64765),n(91058),n(21249),n(69826),n(41539),n(34553),n(59748)),l=n(9377),u=n(98508),s=n(1335),c=n(45016),d=n(87979),p=n(20529),f=n(67403),m=n(9689),v=n(13194),g=n(70578),h=n(73967),y=n(65467),b=n(39624),E=n(39827),_=300;function k(e){var t,n,k=e.addressType,P=e.countryCode,w=e.initialAddressQuery,S=void 0===w?"":w,A=e.provider,I=void 0===A?"autocomplete-service":A,L=(0,l.b)(),x=(0,i.useState)(S),M=(0,o.Z)(x,2),Z=M[0],T=M[1],z=(0,i.useState)(Z),O=(0,o.Z)(z,2),N=O[0],R=O[1],B=(0,i.useState)(!1),q=(0,o.Z)(B,2),F=q[0],D=q[1],j=(0,i.useState)([]),G=(0,o.Z)(j,2),V=G[0],H=G[1],U=(0,i.useState)(!1),W=(0,o.Z)(U,2),J=W[0],Q=W[1],X=(0,s.Lk)(),K=(0,i.useState)(C(X.sourceId)),$=(0,o.Z)(K,2),Y=$[0],ee=$[1],te=(0,u.Q)().geolocation,ne=(0,d.e)(),ae=ne.search,re=ne.fetchAddress,oe=(0,c.h)(),ie=(0,h.a)(),le=(0,v.L)().id,ue=(0,b.J$)(P).details,se=(0,E._v)(),ce=void 0,de=(0,i.useCallback)((function(e,t,n,a){var r,o,i,l,u=(null==(r=se.value.defaultAttributes)?void 0:r.uniqToken)||"",s={schemaId:y.gn.AutocompleteSuggestion,payload:{shopId:parseInt((0,g.Bp)(le),10),checkoutToken:X.checkoutSessionIdentifier||"",uniqueToken:u,provider:null==(o=t[0])?void 0:o.completionService,context:"shipping"===e?"Shipping address":"Billing address",territoryCode:null!=P?P:te.country.code,locale:L,query:n,requestProvider:a,requestLatitude:null==(i=te.coordinates)?void 0:i.latitude,requestLongitude:null==(l=te.coordinates)?void 0:l.longitude,addressIds:t.map((function(e){return e.addressId}))}};null==ie||ie.record(s)}),[P,te.country.code,L,le,X.checkoutSessionIdentifier,null==(t=se.value.defaultAttributes)?void 0:t.uniqToken,ie,te.coordinates]);(0,i.useEffect)((function(){var e=setTimeout((function(){oe&&R(Z)}),_);return function(){clearTimeout(e)}}),[oe,Z]),(0,i.useEffect)((function(){T(S)}),[S]),(0,i.useEffect)((function(){(0,p.h0)(P||te.country.code)||H([])}),[P,te.country.code]);var pe=function(e){var t=(0,f.E)(),n=(0,u.Q)().geolocation;return(0,i.useCallback)((0,r.Z)((0,a.Z)().mark((function r(o,i,l){var u;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(o,i,l);case 2:return u=a.sent,t.distribution(m.j.PredictionDuration,{tags:{buyerCountry:n.country.code},value:u.duration.end-u.duration.start}),a.abrupt("return",u.data);case 5:case"end":return a.stop()}}),r)}))),[e,t])}(ae);(0,i.useEffect)((function(){function e(){return e=(0,r.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.length<=1)){e.next=4;break}return H([]),e.abrupt("return");case 4:return e.next=6,pe(t,{locale:L,countryCode:null!=P?P:te.country.code,location:te.coordinates,requestToken:Y,shopId:(0,g.Bp)(le),sourceId:X.sourceId||""},ce);case 6:n=e.sent,oe.current&&(H(n),(null==n?void 0:n.length)>0&&!J&&("shipping"===k||"billing"===k)&&(de(k,n,t,ce),Q(!0))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.warn("Unable to fetch predictions: "+e.t0),H([]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),e.apply(this,arguments)}(0,p.h0)(P||te.country.code)&&F&&function(t){e.apply(this,arguments)}(N)}),[N,L,Y,de,J]);var fe=(0,i.useCallback)((function(e,t,n,a){var r,o,i,l,u,s,c=(null==ue||null==(r=ue.zones.find((function(e){return e.code===t.zoneCode})))?void 0:r.name)||void 0,d=null==(o=se.value.defaultAttributes)?void 0:o.uniqToken,p=n.findIndex((function(t){return t.addressId===e}))+1,f={shopId:parseInt((0,g.Bp)(le),10),checkoutToken:X.checkoutSessionIdentifier||"",uniqueToken:d,address1:t.address1,address2:t.address2,city:t.city,zone:c,latitude:null==(i=t.coordinates)?void 0:i.latitude,longitude:null==(l=t.coordinates)?void 0:l.longitude,zip:t.postalCode,territoryCode:null!=P?P:te.country.code,position:p,query:N,context:"shipping"===a?"Shipping address":"Billing address",locale:L,requestLatitude:null==(u=te.coordinates)?void 0:u.latitude,requestLongitude:null==(s=te.coordinates)?void 0:s.longitude};null==ie||ie.record({schemaId:y.gn.AutocompleteSelection,payload:f})}),[ue,null==(n=se.value.defaultAttributes)?void 0:n.uniqToken,le,X.checkoutSessionIdentifier,P,te.country.code,te.coordinates,N,L,ie]),me=(0,i.useCallback)((0,r.Z)((0,a.Z)().mark((function e(t,n,r){var o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re(t,{locale:L,requestToken:Y,completionService:n,shopId:(0,g.Bp)(le),sourceId:X.sourceId||""});case 3:o=e.sent,oe.current&&(ee(C(X.sourceId)),"shipping"!==k&&"billing"!==k||fe(t,o,V,k),r(o)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("Unable to select prediction: "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[L,Y,le,X.sourceId,re,oe,k,fe,V]),ve=(0,i.useCallback)((function(e,t){void 0===t&&(t=!0),T(e),D(t)}),[]);return{value:Z,debouncedValue:N,setValue:ve,predictions:V,selectPrediction:me,provider:I}}function C(e){return e+"-"+Date.now()}},65674:function(e,t,n){n.d(t,{N:function(){return p}});var a=n(59748),r=n(1791),o=n(90961),i=(0,a.createContext)({}),l=n(39624),u=n(55667),s=n(77962),c=n(6664),d=n(59572);function p(e){var t=e.settings,n=e.additionalFieldGroups,p=e.customAddressSettings,f=(0,a.useContext)(i),m=(0,a.useMemo)((function(){return(null==f?void 0:f.addressErrors)||(0,r._W)()}),[null==f?void 0:f.addressErrors]),v=(0,l.fv)(),g=(0,u.gG)().billingAddress,h=(0,o.C)(),y=(0,c.I)(),b=(0,s.lz)(),E=p||y?b:(null==f?void 0:f.addressSettings)||h;return a.default.createElement(d.kS,{id:"billingAddressForm",addressType:"billing",addressErrors:m,address:g,countries:v,settings:t,additionalFieldGroups:n,addressSettings:E})}},2235:function(e,t,n){n.d(t,{U:function(){return o}}),n(66992),n(41539),n(88674),n(78783),n(33948);var a=n(20658),r=n(45878),o=(0,a.L)({load:function(){return(0,r.R)((function(){return n.e(8126).then(n.bind(n,32856))}))},id:function(){return 32856}})},15869:function(e,t,n){n.d(t,{Q:function(){return d}}),n(34553),n(69826),n(41539),n(91058);var a=n(59748),r=n(73967),o=n(13194),i=n(1335),l=n(70578),u=n(52376),s=n(86749),c=n(1531),d=function(e,t){var n=(0,a.useRef)(),d=(0,r.a)(),p=(0,i.Lk)(),f=(0,o.L)().id,m=(0,c.a)(),v=(0,u.Zo)(),g=(0,s.aJ)(),h=e||(null==g?void 0:g.selectedDeliveryMethodHandle),y=t||(null==g?void 0:g.methods);(0,a.useEffect)((function(){var e=function(e,t){var n,a,r=function(t){return t.handle===e},o=null==t?void 0:t.findIndex(r);return{locationId:null==t||null==(n=t.find(r))||null==(a=n.originLocation)?void 0:a.id,selectedLocationRank:o}}(h,y),t=e.locationId,a=e.selectedLocationRank;t&&h!==n.current&&(n.current=h,d.record({schemaId:"local_pickup_checkout/3.1",payload:{eventType:"checkout_pickup_location_selected",checkoutToken:p.checkoutSessionIdentifier||"",shopId:parseInt((0,l.Bp)(f),10),locationId:(0,l.Bp)(t),selectedLocationRank:a,userId:null!=v&&v.id?parseInt((0,l.Bp)(v.id),10):void 0,numberLocationsFound:(null==y?void 0:y.length)||0,checkoutSurface:m?"shop_pay":"guest_checkout"}}))}),[null==v?void 0:v.id,m,y,d,h,p.checkoutSessionIdentifier,f])}},42158:function(e,t,n){n.d(t,{OZ:function(){return c},kr:function(){return s},ub:function(){return u}});var a=n(59748),r=n(57126),o=n(13866),i=n(81473),l=n(68184);function u(e){var t=e.children,n=(0,l.vQ)(),i=n?"large100":"large500",u=n?void 0:"base",s=n?"subdued":void 0;return a.default.createElement(r.G,{background:s,border:u,cornerRadius:"base",padding:["large100",i]},a.default.createElement(o.E,{spacing:"small200",inlineAlignment:n?void 0:"center"},t))}function s(e){var t=e.children;return a.default.createElement(r.G,{maxInlineSize:64,maxBlockSize:64,inlineSize:"fill",blockAlignment:"center",inlineAlignment:"center"},t)}function c(e){var t=e.children,n=(0,l.vQ)();return a.default.createElement(i.a,{appearance:n?"subdued":void 0,inlineAlignment:n?void 0:"center"},t)}},25664:function(e,t,n){n.d(t,{h:function(){return o}});var a=n(87462),r=n(59748),o=(0,r.forwardRef)((function(e,t){return r.default.createElement("iframe",(0,a.Z)({},e,{ref:t}))}))},21850:function(e,t,n){n.d(t,{D:function(){return v}});var a=n(59748),r=n(65963),o=n(94184),i=n.n(o),l=n(93211),u=n(60610),s=n(25664),c={Map:"UlC9u"},d=(n(23157),n(74916),n(15306),n(38862),n(21249),n(19601),n.p+"b1cb08d9bc7f3f02ae66.svg"),p=n.p+"1d95a97370ba2873236f.svg",f="shopify_sandboxed_message:";function m(e){return null==e?void 0:e.map((function(e){switch(e.type){case"current":return Object.assign(Object.assign({},e),{},{image:d});case"destination":return Object.assign(Object.assign({},e),{},{image:p});default:return e}}))}function v(e){var t=e.className,n=e.markers,o=e.options,d=e.title,p=e.mapId,v=e.onMarkerSelect,g=e.handleBoundsChanged,h=e.handleCenterChanged,y=e.handleClick,b=e.handleDoubleClick,E=e.handleDrag,_=e.handleZoomChanged,k=e.handleDragEnd,C=(0,r.wG)(),P=(0,l.q)(),w=(0,a.useRef)(null),S=(0,a.useRef)(null!=p?p:(0,u.V)()),A=(0,a.useRef)(!1),I=function(e){var t,n,a;return null==(t=w.current)||null==(n=t.contentWindow)?void 0:n.postMessage((a=e,""+f+JSON.stringify(a)),"*")},L=(0,a.useCallback)((function(e){function t(e){var t=e();t&&null!=t&&t.action&&I(t)}var a=function(e){if("string"==typeof e&&e.startsWith(f))try{return JSON.parse(e.replace(f,""))}catch(t){}}(e.data);if((null==a?void 0:a.id)===S.current)switch(null==a?void 0:a.action){case"ready":I({action:"createMapAndMarkers",body:m(n),options:o}),A.current=!0;break;case"marker":null==v||v(null==a?void 0:a.body);break;case"bounds_changed":t((function(){return null==g?void 0:g()}));break;case"center_changed":t((function(){return null==h?void 0:h()}));break;case"click":t((function(){return null==y?void 0:y(null==a?void 0:a.body)}));break;case"dblclick":t((function(){return null==b?void 0:b(null==a?void 0:a.body)}));break;case"drag":t((function(){return null==E?void 0:E()}));break;case"zoom_changed":t((function(){return null==_?void 0:_()}));break;case"dragend":t((function(){return null==k?void 0:k()}))}}),[v,g,h,y,b,E,_]);return(0,a.useEffect)((function(){return window.addEventListener("message",L),function(){return window.removeEventListener("message",L)}})),(0,a.useEffect)((function(){A&&I({action:"updateMarkers",body:m(n),options:o})}),[n,o]),a.default.createElement(s.h,{ref:w,title:null!=d?d:P("general.google_map_title","Google Map"),className:i()(c.Map,t),src:C.sandboxGoogleMaps(S.current)})}},65912:function(e,t,n){n.d(t,{z:function(){return v}});var a=n(29439),r=(n(9653),n(59748)),o=n(93211),i=n(75077),l=n(51224),u=n(55667),s=n(73967),c=n(65467),d=n(70578),p=n(13194),f=n(1335),m=n(68184);function v(e){var t=e.isShopPay,n=e.label,v=(0,o.q)(),g=(0,l.KO)((0,u.gG)().acceptMarketing),h=(0,a.Z)(g,2),y=h[0],b=h[1],E=(0,s.a)(),_=(0,f.Lk)(),k=_.checkoutSessionIdentifier,C=_.sourceId,P=(0,p.L)(),w=P.id,S=P.myshopifyDomain,A=(0,m.un)();return r.default.createElement(i.X,{id:"marketing_opt_in",name:"marketing_opt_in",checked:y,onChange:function(e){b(e);var n={schemaId:c.gn.EmailMarketingOptInInteraction,payload:{checkoutToken:k||C,shopId:Number((0,d.Bp)(w)),shopifyDomain:S,action:e?"click_email_opt_in":"unclick_email_opt_in",origin:t?"payment_page":"contact_info_page",checkoutVersion:A?"checkout_one_redesign":"checkout_one"}};E.record(n)}},null!=n?n:v("marketing.accept_marketing_checkbox_label","Envoyez-moi les nouvelles et les offres par e-mail"))}},84637:function(e,t,n){n.d(t,{x:function(){return u}}),n(66992),n(41539),n(88674),n(78783),n(33948);var a=n(59748),r=n(20658),o=n(70773),i=n(45878),l=(0,r.L)({load:function(){return(0,i.R)((function(){return n.e(9043).then(n.bind(n,59233))}))},id:function(){return 59233}});function u(e){var t="venmo"===e.fundingSource?"Venmo":"PayPal";return a.default.createElement(o.X,{id:t},a.default.createElement(l,e))}},11229:function(e,t,n){n.d(t,{t:function(){return l}});var a=n(59748),r=n(8758),o=n(81473),i=n(42158);function l(e){var t=e.text;return a.default.createElement(i.ub,null,a.default.createElement(r.$,{size:"large"}),a.default.createElement(o.a,null,t))}},44578:function(e,t,n){n.d(t,{I:function(){return v}});var a,r,o,i=n(4942),l=n(59748),u=n(93211),s=n(94184),c=n.n(s),d=n(95923),p={xsmall:"guTuY",small:"Pffz4",medium:"P3VGi",large:"ed67Y",inline:"jOOgt"};function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f.apply(this,arguments)}var m=function(e){return l.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",fill:"inherit",preserveAspectRatio:"xMidYMid",viewBox:"0 0 424 102"},e),a||(a=l.createElement("path",{fillRule:"evenodd",d:"M204.916 30.1c3.978-4.92 10.15-8.998 17.52-8.998 16.544 0 29.576 13.696 29.565 30.595 0 17.61-13.096 30.64-28.81 30.64-8.355 0-14.75-4.277-17.087-7.845h-.222v25.864a.585.585 0 0 1-.586.589h-14.727a.598.598 0 0 1-.6-.587v-78.68c0-.16.064-.31.177-.422a.594.594 0 0 1 .423-.175h13.763a.59.59 0 0 1 .415.18c.11.11.17.26.17.418V30.1zm16.263 37.243a15.623 15.623 0 0 1-11.66-4.689 15.628 15.628 0 0 1-4.2-13.715 15.61 15.61 0 0 1 15.831-12.812 15.345 15.345 0 0 1 10.777 4.61 15.348 15.348 0 0 1 4.37 10.957 15.46 15.46 0 0 1-1.086 5.93 15.413 15.413 0 0 1-14.033 9.716z",clipRule:"evenodd"})),r||(r=l.createElement("path",{d:"M109.306 32.87c-3.402-7.136-9.852-11.746-19.57-11.746a19.486 19.486 0 0 0-15.304 7.868l-.354.432V1.454a.604.604 0 0 0-.18-.43.603.603 0 0 0-.43-.18h-13.74a.61.61 0 0 0-.599.61v80.23a.595.595 0 0 0 .596.598h14.717a.612.612 0 0 0 .61-.598v-34.21c0-6.647 4.433-11.357 11.525-11.357 7.757 0 9.718 6.383 9.718 12.888v32.68a.599.599 0 0 0 .6.597h14.683a.61.61 0 0 0 .61-.598v-34.63c0-1.185 0-2.35-.155-3.48a30.623 30.623 0 0 0-2.726-10.704zm-73.48 11.89s-7.49-1.76-10.25-2.47c-2.76-.71-7.58-2.217-7.58-5.863 0-3.646 3.89-4.81 7.833-4.81 3.944 0 8.332.954 8.675 5.33a.63.63 0 0 0 .631.575l14.505-.055a.636.636 0 0 0 .456-.198.631.631 0 0 0 .164-.467c-.898-14.008-13.187-19.017-24.523-19.017-13.44 0-23.27 8.865-23.27 18.64 0 7.136 2.016 13.83 17.873 18.483 2.782.81 6.56 1.862 9.863 2.78 3.967 1.11 6.105 2.783 6.105 5.42 0 3.06-4.43 5.186-8.786 5.186-6.305 0-10.782-2.338-11.148-6.538a.636.636 0 0 0-.632-.555l-14.472.067a.63.63 0 0 0-.632.653c.666 13.22 13.432 20.346 25.334 20.346 17.73 0 25.742-9.973 25.742-19.315.022-4.388-.987-14.384-15.89-18.196zm110.558-27.116c-13.73 0-20.578 4.666-26.074 8.4l-.167.11c-.283.195-.483.49-.56.823-.075.335-.02.687.15.984l5.43 9.355c.102.175.24.325.408.44a1.41 1.41 0 0 0 1.146.199c.192-.052.37-.146.52-.275l.433-.356c2.824-2.372 7.357-5.54 18.327-6.405 6.106-.49 11.38 1.107 15.27 4.742 4.278 3.945 6.838 10.316 6.838 17.043 0 12.378-7.292 20.157-19.005 20.312-9.653-.055-16.135-5.086-16.135-12.522 0-3.945 1.784-6.516 5.263-9.087.266-.19.454-.47.53-.788a1.356 1.356 0 0 0-.12-.94l-4.876-9.22a1.43 1.43 0 0 0-1.423-.734c-.19.025-.376.09-.54.19-5.474 3.247-12.19 9.186-11.824 20.6.443 14.528 12.522 25.62 28.224 26.075h1.863c18.66-.61 32.136-14.46 32.136-33.244 0-17.242-12.568-35.704-35.817-35.704z"})),o||(o=l.createElement("path",{fillRule:"evenodd",d:"M282.375 1.044h125.652c8.672 0 15.703 7.03 15.703 15.703V85.54c0 8.672-7.03 15.702-15.703 15.702H282.375c-8.672 0-15.702-7.03-15.702-15.702V16.747c0-8.673 7.03-15.703 15.702-15.703zm28.19 54.488c10.484 0 17.986-7.647 17.986-18.362 0-10.66-7.5-18.35-17.983-18.35H292.06a.827.827 0 0 0-.831.83v50.786c0 .22.09.43.245.585a.836.836 0 0 0 .584.248h6.96a.827.827 0 0 0 .829-.831V56.363a.832.832 0 0 1 .831-.831h9.885zm-.53-29c5.695 0 9.895 4.5 9.895 10.638 0 6.15-4.2 10.638-9.896 10.638h-9.352a.829.829 0 0 1-.832-.82V27.363a.844.844 0 0 1 .832-.831h9.352zM330.6 61.526a9.903 9.903 0 0 1 .988-4.757 9.86 9.86 0 0 1 3.136-3.71c2.704-2.03 6.892-3.08 13.11-3.325l6.592-.222v-1.95c0-3.89-2.615-5.54-6.815-5.54-4.197 0-6.846 1.484-7.466 3.91a.803.803 0 0 1-.798.577h-6.505a.802.802 0 0 1-.634-.277.81.81 0 0 1-.196-.664c.974-5.764 5.74-10.14 15.9-10.14 10.794 0 14.683 5.02 14.683 14.604V70.4a.792.792 0 0 1-.06.32.822.822 0 0 1-.77.523h-6.572a.842.842 0 0 1-.59-.244.845.845 0 0 1-.24-.595v-1.52a.634.634 0 0 0-.09-.38.633.633 0 0 0-.3-.25.644.644 0 0 0-.39-.02.626.626 0 0 0-.327.22c-1.962 2.137-5.153 3.69-10.24 3.69-7.457.02-12.41-3.88-12.41-10.617zm23.826-4.433V55.52l-8.532.444c-4.5.232-7.126 2.105-7.126 5.252 0 2.848 2.405 4.433 6.594 4.433 5.696 0 9.064-3.083 9.064-8.546v-.01zm14.772 23.626v5.927a.855.855 0 0 0 .609.864c1.16.317 2.357.463 3.558.434 6.37 0 12.19-2.327 15.514-11.392l14.625-39.018a.846.846 0 0 0-.113-.753.848.848 0 0 0-.675-.354H395.9a.831.831 0 0 0-.798.577l-8.056 24.71a.832.832 0 0 1-.314.4c-.143.1-.312.152-.485.152s-.34-.053-.484-.15a.886.886 0 0 1-.313-.4l-9.286-24.78a.849.849 0 0 0-.31-.39.847.847 0 0 0-.477-.152h-6.648a.844.844 0 0 0-.786 1.109L381.62 72.63a.82.82 0 0 1 0 .565l-.432 1.363a7.878 7.878 0 0 1-7.945 5.621 16.409 16.409 0 0 1-3.048-.29.847.847 0 0 0-.996.834z",clipRule:"evenodd"})))};function v(e){var t=e.color,n=void 0===t?"white":t,a=e.inline,r=e.size,o=void 0===r?"medium":r,s=(0,u.q)(),f="branded"===n?d.nx.toRgb():n;return l.default.createElement(m,{className:c()((0,i.Z)({},p.inline,a),p[o]),style:{fill:f},title:s("shop_pay.logo_title","Shop Pay")})}},61853:function(e,t,n){n.d(t,{D:function(){return i}});var a=n(93211),r=n(78567),o=n(13194);function i(e){var t=e.hasError,n=e.children,i=(0,o.L)(),l=(0,a.q)(),u=t?l("general.error_page_title","Erreur")+" - ":"",s=i?l("general.full_title",{pageTitle:""+u+n,shopName:i.name},"{{pageTitle}} - {{shopName}} - Paiement"):l("general.loading_title","Paiement - {{shopName}}");return(0,r.Z)(s),null}},66754:function(e,t,n){n.d(t,{IW:function(){return i},qw:function(){return r},w1:function(){return o}});var a=n(55399),r="RELOADING",o=(0,a.cp)(null),i=(0,a.cp)(!1)},19080:function(e,t,n){n.r(t),n.d(t,{default:function(){return xo}});var a=n(59748),r=n(93211),o=n(25435),i=n(86123),l=n(96555),u=n(13866),s=n(39192),c=n(31445),d=n(1511),p=n(8428),f=n(76304),m=n(61853),v=(n(41539),n(41250)),g=n(38027),h=["GooglePay","PayPal","Venmo","FacebookPay"];function y(e){var t=e.id;return(0,g.RC)({id:t,stage:function(e){var t=e.pendingComponents;return h.some((function(e){return t.has(e)}))?v.H.Usable:v.H.Complete}}),null}var b=n(77291),E=n(40915),_=n(6664);function k(){var e=(0,_.I)(),t=(0,r.q)();if(!e)return null;var n=e.firstName,o=e.lastName,i=e.email,l=e.companyName,s=n||o;return a.default.createElement(u.E,{spacing:"extraTight"},a.default.createElement(p.x,null,s&&t("general.display_name",{firstName:null!=n?n:"",lastName:null!=o?o:""},"{{firstName}} {{lastName}}")),a.default.createElement(c.g,{spacing:"extraTight"},l&&a.default.createElement(p.x,{appearance:"subdued",size:"small"},l),i&&a.default.createElement(a.default.Fragment,null,a.default.createElement(p.x,{appearance:"subdued",size:"small"},"•"),a.default.createElement(p.x,{appearance:"subdued",size:"small"},i))))}var C=n(29439),P=(n(19601),function(e){return e.Email="EMAIL",e.Phone="PHONE",e}({})),w=function(e){return e.Historical="HISTORICAL",e.Initial="INITIAL",e}({}),S=n(33335),A=n(13194),I=n(20741),L=(n(26699),n(32023),n(55667)),x=n(51224);n(74916),n(77601);var M=n(61918),Z=/\S+@\S+\.\S{2,}/;function T(e,t){if(!(0,M.Um)(e))return t}function z(e,t){return Z.test(e)?void 0:t}var O=n(98906),N=(n(66992),n(70189),n(78783),n(33948),n(55399)),R=n(13713);function B(e){var t=e.onValid,n=e.children,r=(0,x.xP)(),o=(0,x.YC)(new Set),i=(0,a.useMemo)((function(){return(0,N.cp)((function(e){for(var t,n=e(o),a=!0,r=(0,O.Z)(n);!(t=r()).done;){var i=(0,C.Z)(t.value,2),l=i[0];(0,i[1])(e(l))&&(a=!1)}return{valid:a}}))}),[o]),l=(0,a.useCallback)((function(e,t){var n=[e,t];return r.write(o,(function(e){var t=new Set(e);return t.add(n),t})),function(){r.write(o,(function(e){var t=new Set(e);return t.delete(n),t}))}}),[r,o]);(0,a.useEffect)((function(){return r.subscribe(i,(function(e){e.value.valid&&t()}))}),[r,i,t]);var u=(0,a.useMemo)((function(){return{registerValidator:l}}),[l]);return a.default.createElement(R.O.Provider,{value:u},n)}var q=n(17),F=n(40971),D=n(37694),j=n(95920),G=n(73967),V=(0,a.createContext)(null),H=function(e){var t=e.children,n=(0,a.useState)(void 0),r=(0,C.Z)(n,2),o=r[0],i=r[1],l=(0,a.useState)(void 0),u=(0,C.Z)(l,2),s=u[0],c=u[1],d=(0,a.useState)(void 0),p=(0,C.Z)(d,2),f=p[0],m=p[1],v=(0,a.useState)(void 0),g=(0,C.Z)(v,2),h=g[0],y=g[1],b=(0,a.useState)(void 0),E=(0,C.Z)(b,2),_=E[0],k=E[1],P=(0,a.useCallback)((function(e,t){i(e),m(t)}),[i,m]),w=(0,a.useCallback)((function(e){c(e)}),[c]),S=(0,a.useCallback)((function(e,t){y(e),k(t)}),[y,k]),A=(0,a.useMemo)((function(){return{prefetchTime:o,prefetchTimeHistorical:s,prefetchAddress:f,negotiateTime:h,negotiateAddress:_,setPrefetchPoint:P,setPrefetchPointHistorical:w,setNegotiatePoint:S}}),[o,s,f,h,_,P,w,S]);return a.default.createElement(V.Provider,{value:A},t)},U=function(e){return e.Autocomplete="PREFETCH_SHIPPING_RATES_ON_AUTOCOMPLETE",e.HistoricalAddress="PREFETCH_SHIPPING_RATES_USING_HISTORICAL_ADDRESS",e}({}),W=(n(91058),n(65467)),J=n(70578),Q=n(1335),X=function(){return(new Date).valueOf()},K=function(e,t){return e.name===t.name&&e.city===t.city&&e.countryCode===t.countryCode&&e.zoneCode===t.zoneCode&&e.postalCode===t.postalCode&&e.address1===t.address1&&e.address2===t.address2&&e.company===t.company&&e.firstName===t.firstName&&e.lastName===t.lastName&&e.phone===t.phone},$=function(){var e,t,n,r,o,i,l,u=(0,G.a)(),s=(0,L.gG)().shippingAddress,c=(0,x.xP)(),d=(e=(0,A.L)().id,t=(0,Q.Lk)(),n=t.checkoutSessionIdentifier,r=t.sourceId,o=n||r||"",i=(new Date).valueOf(),l=o+"-"+i,(0,a.useCallback)((function(t,n,a){return{schemaId:W.gn.PrefetchOnAddressAutocomple,payload:{eventId:l,prefetchingOfRatesProjectName:"prefetch_on_address_autocomplete",prefetchingOfRatesProjectVersion:"v2",shopId:parseInt((0,J.Bp)(e),10),checkoutToken:o,successfulEarlyFetch:a,prefetchingRoutingRequestSubmittedAt:t,normalRoutingRequestSubmittedAt:n}}}),[o,e,l])),p=function(){var e=(0,A.L)().id,t=(0,Q.Lk)(),n=t.checkoutSessionIdentifier,r=t.sourceId,o=n||r||"",i=(new Date).valueOf(),l=o+"-"+i;return(0,a.useCallback)((function(t,n){return{schemaId:W.gn.PrefetchUsingHistoricalAddress,payload:{eventId:l,prefetchingOfRatesProjectName:"prefetch_using_historical_addresses",prefetchingOfRatesProjectVersion:"v1",shopId:parseInt((0,J.Bp)(e),10),checkoutToken:o,prefetchingRoutingRequestSubmittedAt:t,normalRoutingRequestSubmittedAt:n}}}),[o,e,l])}(),f=(0,a.useContext)(V),m=(0,a.useCallback)((function(e){var t=X();if(e===U.Autocomplete){var n=c.read(s).value;null==f||f.setPrefetchPoint(t,n)}else e===U.HistoricalAddress&&(null==f||f.setPrefetchPointHistorical(t))}),[f,s,c]),v=(0,a.useCallback)((function(){var e=null==f?void 0:f.prefetchTime,t=null==f?void 0:f.prefetchAddress,n=null==f?void 0:f.negotiateTime,a=null==f?void 0:f.negotiateAddress;if(void 0!==e&&void 0!==t){var r=X(),o=c.read(s).value,i=void 0!==a&&!K(o,a);if(!n||i){var l=K(t,o);u.record(d(e,r,l)),null==f||f.setNegotiatePoint(r,o)}}}),[u,f,s,c,d]),g=(0,a.useCallback)((function(){var e=null==f?void 0:f.prefetchTimeHistorical;e&&(u.record(p(e,X())),null==f||f.setPrefetchPointHistorical(void 0))}),[u,f,p]);return{capturePrefetch:m,captureNegotiate:(0,a.useCallback)((function(){v(),g()}),[v,g])}},Y=n(68184),ee=n(21545),te=n(65912),ne=n(52376),ae=n(90889),re=n(66754),oe=n(50716),ie=n(47501),le=n(86749),ue=n(23608),se=n(20613),ce=n(32893);function de(){var e=(0,oe.w)(ie.DJ),t=(0,le.Uc)().shopPay,n=(0,le.Jw)(),r=(0,ae.U)(),o=(0,ue.m)("simulated"),i=(0,Q.Lk)().checkoutSessionIdentifier,l=void 0===i?"":i,u=(0,x.KO)(re.IW),s=(0,C.Z)(u,1)[0],c=r.searchParams.get(ce.Ql);return(0,a.useEffect)((function(){(0,se.d8)(ce.HG,c?l:"false")}),[]),(0,a.useMemo)((function(){return Boolean(!o&&!s&&t()&&(e||!n)&&!c)}),[o,s,t,e,n,c])}n(88674);var pe=n(20658),fe=n(45878),me=(0,pe.L)({load:function(){return(0,fe.R)((function(){return n.e(1232).then(n.bind(n,26062))}))},id:function(){return 26062}});function ve(e){var t,n=e.showLogoutLink,o=e.logoutUrl,i=(0,r.q)(),l=(0,ne.Zo)(),s=de(),d=(0,a.useState)(!1),m=(0,C.Z)(d,2),v=m[0],g=m[1],h=(0,ue.m)("simulated"),y=null!=(t="CustomerProfile"===(null==l?void 0:l.__typename)?l:void 0)?t:{},b=y.email,E=y.phone,_=y.firstName,k=y.lastName,P=_||k,w=(0,L.gG)().phone,S=(0,x.xP)(),A="("+(null!=b?b:E)+")";return(0,a.useEffect)((function(){S.write(w,"")}),[]),a.default.createElement(a.default.Fragment,null,a.default.createElement(c.g,{blockAlignment:"center"},a.default.createElement(u.E,{spacing:"small400"},a.default.createElement(p.x,null,P?i("general.display_name",{firstName:null!=_?_:"",lastName:null!=k?k:""},"{{firstName}} {{lastName}}"):null," ",A),n&&!h?a.default.createElement(c.g,null,a.default.createElement(f.r,{to:o},i("customer_account.sign_out_link_label","Déconnexion"))):null)),b&&s&&a.default.createElement(me,{email:b,open:v,showPopover:function(e){g(e)}}))}var ge=n(87462),he=n(74165),ye=n(15861),be=(n(54747),n(98508)),Ee=n(62586),_e=n(37303),ke=n(65963),Ce=n(23084),Pe=n(8287),we=new Set([Ce.j.BuyerIdentityPhoneNumberDoesNotMatchExpectedPattern,Ce.j.BuyerIdentityEmailDoesNotMatchExpectedPattern,Ce.j.BuyerIdentityEmailRequired]),Se=n(29919),Ae=(n(73210),n(73418)),Ie=n(46409),Le=(n(38862),"/set_tracking_consent.json");var xe={MobilePhoneIcon:"tfJbE",wobble:"FUooI","scale-up-bounce":"iy7RR"};function Me(e){var t=e.onPress,n=(0,r.q)();return a.default.createElement(s.z,{accessibilityLabel:n("shop_pay.verification_toggle","Activer l’entrée SMS de Shop Pay pour utiliser la page de paiement de Shop Pay"),onPress:t},a.default.createElement("div",{className:xe.MobilePhoneIcon},a.default.createElement(d.JO,{source:"mobile",size:"fill"})))}var Ze=n(39147),Te=n(8792),ze=new Set([Ce.j.BuyerIdentityMissingContactMethod,Ce.j.BuyerIdentityEmailDoesNotMatchExpectedPattern,Ce.j.BuyerIdentityEmailDomainIsInvalid]);function Oe(e){var t,n=e.addressType,o=void 0===n?"shipping":n,i=e.disabled,l=e.label,u=e.onInputValueChange,s=e.caretPosition,c=e.type,d=void 0===c?"email":c,p=e.violationMessage,f=e.autoFocus,m=void 0!==f&&f,v=e.onInlineValidation,g=(0,r.q)(),h=de(),y=function(e,t){var n=(0,r.q)(),a=(0,L.gG)().email,o=(0,x.xP)(),i=(0,Te.Ew)(),l=(0,C.Z)(i,1)[0];return(0,j.lH)((function(t){if("error"===t.type&&!l)for(var n,a=(0,O.Z)(t.violations);!(n=a()).done;){var r,i=n.value;if("UnprocessableTermViolation"===i.__typename&&ze.has(i.code)){var u=e||(null!=(r=i.localizedMessage)?r:i.nonLocalizedMessage);o.write(Pe.WJ,u)}}})),(0,M.qQ)(a,Pe.WJ,(function(e){if(t)return t(e);var a=T(e,n("field_errors.email_blank","Saisissez une adresse e-mail")),r=z(e,n("field_errors.email_invalid","Entrez une adresse e-mail valide"));return a||r}),Ze.VO.InvalidContactMethod),(0,M.a8)(a,Pe.WJ,t)}(p,v),b=(0,a.useState)(null!=(t=y.value)?t:""),E=(0,C.Z)(b,2),_=E[0],k=E[1],P=(0,a.useRef)(""),w=(0,a.useRef)(null),S=(0,a.useState)(!1),A=(0,C.Z)(S,2),I=A[0],Z=A[1],N=(0,a.useState)(!1),R=(0,C.Z)(N,2),B=R[0],q=R[1],F=(0,a.useCallback)((function(e,t){t&&(P.current=t),q(!e),Z(e)}),[P]);(0,a.useEffect)((function(){y.value.trim()!==P.current&&(q(!1),Z(!1))}),[y.value,P]),(0,a.useEffect)((function(){q(!1)}),[_]),(0,a.useEffect)((function(){void 0!==s&&w.current&&null!=y&&y.value&&s<y.value.length&&w.current.setSelectionRange(s,s)}),[y,s]),function(){var e=(0,L.gG)().email;(0,x.bQ)(e,(function(e){if("invalid"===z(e,"invalid"))return null;if(t=document.cookie.includes("_tracking_consent="),n=document.cookie.includes("_cmp_a="),!t||!n)return null;var t,n,a={headers:{"content-type":"application/json"},body:JSON.stringify({sync_consent:{email:e}}),method:"POST"};fetch(Le,a).catch((function(){}))}))}();var D=a.default.createElement(Ae.nv,(0,ge.Z)({label:null!=l?l:g("contact.email_label","Adresse e-mail"),id:"email",name:"email",type:d,ref:w,autocomplete:{field:"email",group:o},disabled:i,autoFocus:m},y,{onInput:(0,ye.Z)((0,he.Z)().mark((function e(t){var n,a;return(0,he.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.trim(),y.onInput(n),k(n),u&&u(n,(null==w||null==(a=w.current)?void 0:a.selectionStart)||0);case 4:case"end":return e.stop()}}),e)}))),error:y.error,protectedInput:!0}));return h?a.default.createElement(a.default.Fragment,null,a.default.createElement(Ie.E,{columns:["fill","auto"],spacing:B?"none":void 0},D,B&&a.default.createElement(Me,{onPress:function(){return F(!0)}})),a.default.createElement(me,{popoverActivator:w,email:_,open:I,showPopover:F,showToggle:q})):D}var Ne=n(14257);function Re(e){var t=e.onInputTypeChange,n=e.onInlineEmailValidation,o=e.onInlinePhoneValidation,i=(0,le.Ry)().shippingRequired,l=(0,_e.LB)(),u=(0,C.Z)(l,1)[0],s=(0,A.L)().getContactInfoOptions,c=(0,be.Q)().geolocation,d=(0,r.q)(),p=(0,le.Jw)(),f=(0,L.gG)(),m=f.email,v=f.phone,g=f.shippingAddress,h=(0,x.Dv)(g.fields.countryCode),y=(0,x.KO)(v),b=(0,C.Z)(y,1)[0],E=(0,x.KO)(m),_=(0,C.Z)(E,1)[0],k=(0,Se.yD)(),w=(0,a.useState)(""===b||""!==_&&_?P.Email:P.Phone),S=(0,C.Z)(w,2),I=S[0],Z=S[1],T=(0,a.useState)(0),z=(0,C.Z)(T,2),N=z[0],R=z[1],B=(0,x.xP)(),q=d("contact.email_or_phone_label","E‑mail ou numéro de portable"),F=d("field_errors.email_or_phone_invalid","Entrez une adresse e-mail ou un numéro de téléphone mobile valide"),D=function(e,t,n){var a=(0,L.gG)().phone,r=(0,x.xP)();return(0,j.lH)((function(t){if("error"===t.type)for(var n,a=(0,O.Z)(t.violations);!(n=a()).done;){var o=n.value;if("UnprocessableTermViolation"===o.__typename&&we.has(o.code))if(o.code===Ce.j.BuyerIdentityEmailRequired){var i,l=null!=(i=o.localizedMessage)?i:o.nonLocalizedMessage;r.write(Pe.mX,l)}else{var u,s=e||(null!=(u=o.localizedMessage)?u:o.nonLocalizedMessage);r.write(Pe.mX,s)}}})),(0,M.a8)(a,Pe.mX,n===P.Phone?t:void 0)}(F,o,I),G=function(){var e=(0,ye.Z)((0,he.Z)().mark((function e(t,n){return(0,he.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!0),H(t),void 0!==n&&R(n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){(b||_)&&k(!0)}),[k,b,_]);var V=s(h),H=(0,a.useCallback)((0,ye.Z)((0,he.Z)().mark((function e(t){var n;return(0,he.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return");case 2:(n=p||!V.includes(P.Phone)||/([A-Za-z]|\.|@)/.test(t))&&I!==P.Email?(Z(P.Email),B.write(v,""),B.write(m,t)):n||I===P.Phone||(Z(P.Phone),B.write(m,""),B.write(v,t));case 4:case"end":return e.stop()}}),e)}))),[B,V,m,v,p,I]);(0,a.useEffect)((function(){t&&t(I)}),[t,I]),(0,a.useEffect)((function(){!V.includes(P.Phone)&&I!==P.Email&&(Z(P.Email),""===_&&""!==b&&(B.write(v,""),B.write(m,b)))}),[V]),(0,Ee.$u)((0,ye.Z)((0,he.Z)().mark((function e(t){var n,a;return(0,he.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.reason,a=t.parts,"progression"===n){e.next=3;break}return e.abrupt("return",{behavior:"allow"});case 3:return e.abrupt("return",{behavior:"allow",perform:function(){""!==B.read(a.phone).value&&B.read(a.deliveryLines).value.forEach((function(e){B.write(e,Object.assign(Object.assign({},B.read(e).value),{},{deliveryMethodOptions:Object.assign(Object.assign({},B.read(e).value.deliveryMethodOptions),{},{phone:B.read(a.phone).value})}))}))}});case 4:case"end":return e.stop()}}),e)}))));var U=(0,ae.U)(),W=(0,ke.wG)(),J=!U.pathname.includes(W.stockProblems()),Q=(0,a.useMemo)((function(){var e,t,n;return null!=(e=null!=(t=null==(n=c.default)?void 0:n.code)?t:h)?e:c.country.code}),[c,h]);if(I===P.Phone)return a.default.createElement(Ne.$,(0,ge.Z)({autoFocus:J,countryCode:Q,label:q,onInputValueChange:G,caretPosition:N,inputMode:"text"},D));var X=!p&&V.includes(P.Phone)?{label:q,onInputValueChange:G,violationMessage:F,type:"text",caretPosition:N}:void 0;return a.default.createElement(Oe,(0,ge.Z)({autoFocus:J,addressType:i?"shipping":"billing",disabled:"loading"===u.status},X,{onInlineValidation:n}))}var Be=n(32409);function qe(){var e=(0,r.q)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(p.x,{appearance:"subdued",size:"small",accessibilityLive:"polite"},e("marketing.sms.disclaimer.description_transactional_html",{privacy_policy_modal_link:a.default.createElement(Be.i,{handle:"privacy-policy"}),terms_of_service_modal_link:a.default.createElement(Be.i,{handle:"terms-of-service"})},"Vous recevrez peut-être des SMS concernant la confirmation de votre commande et des mises à jour du statut de son expédition. Répondez STOP pour vous désabonner. Répondez HELP pour obtenir de l’aide. La fréquence des messages varie. Des frais de messagerie et de données peuvent s’appliquer. Consultez notre %{privacy_policy_modal_link} et nos %{terms_of_service_modal_link}.")))}function Fe(){var e=(0,r.q)(),t=(0,A.L)().emailMarketing,n=(0,I.BP)(),o=n.loggedIn,i=n.showLogoutLink,l=n.logoutUrl,u=(0,a.useState)(De(t,P.Email)),s=(0,C.Z)(u,2),c=s[0],d=s[1],p=(0,a.useState)(!1),f=(0,C.Z)(p,2),m=f[0],v=f[1],g=(0,L.gG)().shippingAddress,h=(0,x.Dv)(g.fields.countryCode),y=(0,D.fD)(),b=(0,j.JL)().negotiate,E=(0,a.useCallback)((function(e){d(De(t,e)),v(!1)}),[t]),_=function(){var e=(0,A.L)().getContactInfoOptions,t=(0,L.gG)().shippingAddress,n=(0,x.Dv)(t.fields.countryCode),o=(0,r.q)();return(0,a.useMemo)((function(){return e(n).includes(P.Phone)?o("field_errors.email_or_phone_blank","Saisissez une adresse e-mail ou un numéro de téléphone"):o("field_errors.email_blank","Saisissez une adresse e-mail")}),[e,n,o])}(),k=(0,a.useCallback)((function(t){var n=T(t,_),a=z(t,e("field_errors.email_invalid","Entrez une adresse e-mail valide"));return n||a}),[_,e]),S=(0,a.useCallback)((function(t){var n=T(t,e("field_errors.email_or_phone_blank","Saisissez une adresse e-mail ou un numéro de téléphone"));if(n)return v(!n),n;var a=y(t,null!=h?h:"ZZ")?void 0:e("field_errors.address_phone_blank","Entrez un numéro de téléphone valide");return v(!a),a}),[e,y,h]),M=(0,q.pF)(),Z=(0,F.e)(),O=$().capturePrefetch,N=(0,Y.vQ)(),R=(0,a.useCallback)((function(){O(U.HistoricalAddress),b(void 0,{silenceViolations:["all"],silenceValidations:!0,include:["email","phone"],prefetch:!N,customizeNegotiation:function(e){return!N&&e.delivery?Object.assign(Object.assign({},e),{},{delivery:Object.assign(Object.assign({},e.delivery),{},{prefetchShippingRatesStrategy:w.Historical})}):e}}),M("sectionComplete",{section:"contact",timestamp:new Date}),Z({type:"section_complete",section:"contact"})}),[O,b,N,M,Z]);return a.default.createElement(ee.l,null,o?a.default.createElement(ve,{showLogoutLink:i,logoutUrl:l}):a.default.createElement(B,{onValid:R},a.default.createElement(Re,{onInputTypeChange:E,onInlineEmailValidation:k,onInlinePhoneValidation:S})),c?a.default.createElement(te.z,null):null,m?a.default.createElement(qe,null):null)}function De(e,t){return e!==S.h.Off&&t===P.Email}n(57658),n(57327),n(69826);var je=n(84686),Ge=n(57967),Ve=n(15926),He=n(77901),Ue=n(59525),We=n(55391),Je=n(10678),Qe=n(1531),Xe=(n(21249),n(85574)),Ke=n(53037),$e=n(6346),Ye=n(4152),et=n(81473),tt=n(88710),nt=n(40431);function at(e,t){return t.every((function(t){return e.includes(t)}))}function rt(e){var t,n,o=e.options,i=e.selected,l=e.select,u=(0,r.q)(),s=(0,ne.j2)(),p=s.value,f=s.loading,m=(0,nt.ZF)(p,je.i.OneTimePurchase),v=(0,Y.vQ)(),g=null==(t=(0,ne.RL)())||null==(n=t.value)?void 0:n.lines,h=void 0!==(0,nt.Z)(g,tt.F.ApplePay),y="available"===(null==m?void 0:m.status)&&!f&&(null==m?void 0:m.hasDeliveryLineChange),b=!h&&y;return a.default.createElement(a.default.Fragment,null,b?a.default.createElement(Xe.j,{status:"critical",title:u("shipping_errors.shipping_method","Les options d’expédition de votre commande ont changé. Veuillez revoir votre sélection et réessayer.")}):null,a.default.createElement(Ke.X,{id:"delivery_strategies",title:u("general.choose_delivery_strategy","Choisir un mode de livraison"),titleHidden:!0,selectedItems:i,onChange:l},o.map((function(e){return a.default.createElement($e.Wx,{id:e.id,key:e.id,label:e.label},v?a.default.createElement(a.default.Fragment,null,a.default.createElement(Ye.T,{blockAlignment:"center"},a.default.createElement($e.Hj,null,a.default.createElement(et.a,null,e.label)),a.default.createElement(Ye.T,{inlineAlignment:"end"},a.default.createElement(d.JO,{source:e.icon,appearance:at(i,e.value)?"interactive":"subdued"})))):a.default.createElement(c.g,{blockAlignment:"center"},a.default.createElement(d.JO,{source:e.icon}),a.default.createElement($e.Hj,null,a.default.createElement(et.a,null,e.label))))}))))}var ot=n(15869),it=function(){var e=(0,G.a)(),t=(0,Q.Lk)(),n=(0,A.L)().id,r=(0,ne.Zo)(),o=(0,We.HD)(),i=o.negotiating,l=o.method,u=(0,le.aJ)(),s=(0,Qe.a)();(0,a.useEffect)((function(){i||l!==Ge.l.PickUp||e.record({schemaId:"local_pickup_checkout/3.1",payload:{checkoutToken:t.checkoutSessionIdentifier||"",eventType:"checkout_pickup_tab_selected",shopId:parseInt((0,J.Bp)(n),10),numberLocationsFound:null==u?void 0:u.methods.length,userId:null!=r&&r.id?parseInt((0,J.Bp)(r.id),10):void 0,checkoutSurface:s?"shop_pay":"guest_checkout"}})}),[null==r?void 0:r.id,s,null==u?void 0:u.methods.length,l,e,i,t.checkoutSessionIdentifier,n])};function lt(){return it(),(0,ot.Q)(),null}var ut=n(90961),st=n(49036),ct=function(e){return e.Truck="truck",e.Store="store",e.Marker="marker",e}({}),dt=(0,N.cp)(!1);function pt(e){var t,n=e.children,o=(0,r.q)(),i=(0,A.L)().enabledDeliveryMethods,l=(0,j.JL)().negotiate,u=(0,le.MW)(),s=(0,x.KO)(dt),c=(0,C.Z)(s,2),d=c[0],p=c[1],f=(0,x.KO)((0,L.gG)().billingAddressOption),m=(0,C.Z)(f,2)[1],v=(0,Je.DO)().clearBillingAddress,g=(0,Qe.a)(),h=(0,He.K2)(je.i.OneTimePurchase),y=(0,C.Z)(h,2),b=y[0],E=y[1],_=(0,He.wI)(je.i.OneTimePurchase),k=(0,C.Z)(_,2)[1],P=(0,He.K2)(je.i.Subscription),w=(0,C.Z)(P,2)[1],S=(0,He.wI)(je.i.Subscription),I=(0,C.Z)(S,2)[1],M=function(){var e=(0,x.KO)((0,L.gG)().shippingAddress),t=(0,C.Z)(e,2)[1],n=(0,ut.er)().isRequired("phone"),r=(0,x.xP)(),o=(0,Qe.a)(),i=(0,a.useCallback)((function(){var e=r.read(st.q.selectedShippingAddress).value;if(null!=e&&e.address){var a=r.read(st.q.phoneNumber).value;t(Object.assign(Object.assign({},null==e?void 0:e.address),{},{phone:!n||null!=e&&e.address.phone?null==e?void 0:e.address.phone:a}))}}),[n,t,r]);return{correctShippingAddress:(0,a.useCallback)((function(e){o&&e.includes(Ge.l.Shipping)&&i()}),[i,o])}}(),Z=M.correctShippingAddress,T=(0,x.xP)(),z=(0,Ue.pq)().loading,O=(0,a.useCallback)((function(e){var t=b.includes(Ge.l.Shipping);g||t||!e.includes(Ge.l.Shipping)||(v(),m("shipping")),E(e),Z(e),w(e),k(void 0),I(void 0),p(!0),l(void 0,{include:["deliveryLines","merchandiseLines"],onComplete:function(e){var t=T.read(z).value.has("deliveryNext");if("stale"===e.status&&t)var n=T.subscribe(z,(function(e){e.value.has("deliveryNext")||(p(!1),n())}));else p(!1)}})}),[b,g,E,Z,w,k,I,p,l,v,m,T,z]),N=i.includes(Ge.l.Local),R=(0,le.eS)(Ve.k.Delivery,Ze.sC.SelectedDeliveryStrategy),B=(t=[],i?(i.includes(Ge.l.Shipping)&&t.push({id:Ge.l.Shipping,value:N?[Ge.l.Shipping,Ge.l.Local]:[Ge.l.Shipping],label:o("delivery_options.ship","Expédier"),icon:ct.Truck}),i.includes(Ge.l.PickUp)&&t.push({id:Ge.l.PickUp,value:[Ge.l.PickUp],label:o("delivery_options.pick_up","Récupérer"),icon:ct.Store}),i.includes(Ge.l.PickupPoint)&&!u&&t.push({id:Ge.l.PickupPoint,value:[Ge.l.PickupPoint],label:o("delivery_options.pickup_point_method_definition","Expédier au point relais"),icon:ct.Marker}),R?t.filter((function(e){return b.includes(e.id)})):t):t);(0,a.useEffect)((function(){if(B.length>=1&&(!b.includes(Ge.l.Shipping)&&!b.includes(Ge.l.Local)||!i.includes(Ge.l.Shipping))){var e=B.find((function(e){return JSON.stringify(e.value)===JSON.stringify(b)}));O(e?null==e?void 0:e.value:B[0].value)}}),[]);var q=B.length>1&&a.default.createElement(rt,{options:B,selected:b,select:function(e){var t=B.find((function(t){return t.id===e[0]}));t&&O(t.value)}}),F=(0,a.useMemo)((function(){return{negotiating:d,method:b[0]}}),[d,b]);return a.default.createElement(We.oF.Provider,{value:F},a.default.createElement(lt,null),a.default.createElement(We.DV.Provider,{value:q||void 0},n))}var ft=n(65674),mt=n(75077),vt=n(24853);function gt(){var e=(0,r.q)(),t=(0,a.useState)((function(){return"true"===(0,se.ej)(vt.Rb)})),n=(0,C.Z)(t,2),o=n[0],i=n[1],l=(0,ne.Zo)(),u=(0,A.L)(),s=u.checkoutChannelConfiguration,c=u.shopPayEnabled,d=Boolean(l),p=Boolean(s),f=!c&&!d&&!p,m=(0,a.useCallback)((function(e){i(e)}),[i]);return(0,a.useEffect)((function(){(o?vt.F2:vt.w8)()}),[o]),f?a.default.createElement(mt.X,{id:"save_shipping_information",name:"save_shipping_information",checked:o,onChange:m},e("customer_account.save_my_information_label","Sauvegarder mes coordonnées pour la prochaine fois")):null}var ht=n(57126),yt=n(46818),bt=n(57884),Et=n(11127),_t=n(23403),kt=n(80040),Ct=n(66397),Pt=function(){switch((0,kt.F)("checkout-sms-checkbox-experiment")){case Ct.G3.Control:return{showBox:!1,showPhoneField:!1,showHeader:!1};case Ct.G3.TestGroupA:return{showBox:!0,showPhoneField:!1,showHeader:!1};case Ct.G3.TestGroupB:return{showBox:!0,showPhoneField:!1,showHeader:!0};case Ct.G3.TestGroupC:return{showBox:!1,showPhoneField:!0,showHeader:!1};default:return{showBox:!1,showPhoneField:!1,showHeader:!1}}},wt="SmsOptinCheckbox";function St(){var e=(0,r.q)(),t=(0,ke.wG)(),n=(0,A.L)().smsMarketing,o=Pt(),i=(0,L.gG)(),s=i.phone,c=i.acceptSmsMarketing,d=i.smsMarketingPhone,p=i.shippingAddress,m=i.locationAddress,v=(0,x.Dv)(m).countryCode,g=(0,x.KO)(c),h=(0,C.Z)(g,2),y=h[0],b=h[1],E=(0,ne.Zo)(),_=(0,x.KO)(s),k=(0,C.Z)(_,1)[0],P=(0,x.KO)(p.fields.phone),w=(0,C.Z)(P,1)[0],S=(0,x.KO)(d),I=(0,C.Z)(S,2),Z=I[0],T=I[1];function z(e){b(e),T(e?k||(null!=w?w:""):"")}(0,a.useEffect)((function(){Z||T(k||(null!=w?w:""))}),[]),(0,x.bQ)(s,(function(e){e&&!E&&T(e)}));var N=function(e){var t=(0,L.gG)().smsMarketingPhone,n=(0,x.xP)(),a=(0,M.N4)();return(0,j.lH)((function(t){if("error"===t.type)for(var r,o=(0,O.Z)(t.violations);!(r=o()).done;){var i,l=r.value;if("UnprocessableTermViolation"===l.__typename&&At.has(l.code)){var u=e||(null!=(i=l.localizedMessage)?i:l.nonLocalizedMessage);n.write(a,u)}}})),(0,M.a8)(t,a)}(e("field_errors.sms_marketing_phone_invalid","Saisir un numéro de téléphone valide")),R=(0,Y.vQ)();if(n===_t.f.Off)return null;var B=Boolean(E),q=Boolean(!k),F=a.default.createElement(et.a,{size:"small",appearance:"subdued"},e("marketing.sms.disclaimer.description_html",{privacy_policy_link:a.default.createElement(f.r,{external:!0,to:t.storefront("policies/privacy-policy"),appearance:"monochrome"},e("marketing.sms.disclaimer.privacy_policy","Politique de confidentialité")),terms_of_service_link:a.default.createElement(f.r,{external:!0,to:t.storefront("policies/terms-of-service"),appearance:"monochrome"},e("marketing.sms.disclaimer.terms_of_service","Conditions d'utilisation"))},"En vous inscrivant aux envois par SMS, vous acceptez de recevoir des messages de marketing automatisés au numéro de téléphone fourni, notamment des rappels de panier. Le consentement n'est pas une condition d'achat. Répondez STOP pour vous désabonner. Répondez HELP pour obtenir de l'aide. La fréquence des messages varie. Des frais de messagerie et de données peuvent s'appliquer. Consultez notre %{privacy_policy_link} et nos %{terms_of_service_link}."));return a.default.createElement(a.default.Fragment,null,o.showHeader?a.default.createElement(ht.G,{padding:["large200","none","none","none"]},a.default.createElement(l.X,null,e("marketing.sms.get_offers_by_text","Recevoir des offres par SMS"))):null,R?a.default.createElement(u.E,{spacing:"base"},a.default.createElement(Ke.X,{allowMultiple:!0,id:"SmsOptIn",onChange:function(e){z(e.includes(wt))},selectedItems:y?[wt]:[]},a.default.createElement($e.Wx,{id:wt,label:e("marketing.accept_sms_checkbox_label","Envoyez-moi les nouvelles et les offres par SMS"),details:a.default.createElement(yt.w,{controlledBy:wt},a.default.createElement(u.E,{padding:["none","none","base","none"]},a.default.createElement(Ne.$,(0,ge.Z)({countryCode:null!=v?v:"",label:e("marketing.sms.mobile_phone_number","Numéro de téléphone mobile"),disabled:!B&&!q,caretPosition:0,prefillCountryCode:!0,icon:"mobile"},N))),F)},a.default.createElement($e.Hj,null,a.default.createElement(et.a,null,e("marketing.accept_sms_checkbox_label","Envoyez-moi les nouvelles et les offres par SMS")))))):a.default.createElement(ht.G,{border:o.showBox?"base":void 0,padding:o.showBox?"large100":void 0,borderRadius:o.showBox?"base":void 0},a.default.createElement(mt.X,{id:"sms_marketing_opt_in",name:"sms_marketing_opt_in",checked:y,onChange:z,"aria-expanded":Boolean(y),"aria-controls":"acceptSmsMarketingCollapsible"},e("marketing.accept_sms_checkbox_label","Envoyez-moi les nouvelles et les offres par SMS")),a.default.createElement(bt.u,{open:y||o.showPhoneField,id:"acceptSmsMarketingCollapsible"},a.default.createElement(ht.G,{padding:["base","none","none","large200"]},a.default.createElement(u.E,{padding:["none","none","none","small200"]},a.default.createElement(u.E,{maxInlineSize:Et.bg.when({viewportInlineSize:{min:"small"}},360)},a.default.createElement(Ne.$,(0,ge.Z)({countryCode:null!=v?v:"",label:e("marketing.sms.mobile_phone_number","Numéro de téléphone mobile"),disabled:!B&&!q,caretPosition:0,prefillCountryCode:!0,icon:"mobile"},N))),F)))))}var At=new Set([Ce.j.BuyerIdentityPhoneNumberDoesNotMatchExpectedPattern]),It=n(2235),Lt=n(7906),xt=n(57284),Mt=n(127),Zt=n(20948),Tt=n(45711),zt=n(93433),Ot=(n(92222),n(18763)),Nt=n(83325),Rt=n(36802),Bt=n(28968),qt=n(85107),Ft=n(94123),Dt="AmazonPayButtonContainer";function jt(){var e=(0,ne.Ew)().value,t=(0,Rt.H)().inMemoryAmazonPayParts,n=null==e?void 0:e.find((function(e){return"walletsPlatform"===e.type&&e.name===Ft.P3.AmazonPay})),r=(n||{}).configurationParams,o=(0,x.Dv)(t.sdkStatus),i=(0,x.KO)(t.buttonStatus),l=(0,C.Z)(i,2),u=l[0],s=l[1],c=(0,x.xP)(),d="available"===o.status&&o.sdk.Pay;return(0,a.useEffect)((function(){var e=t.buttonStatus;return c.write(e,{status:"not_rendered"}),function(){"rendered"===c.read(e).value.status&&c.write(e,{status:"not_rendered"})}}),[]),(0,a.useEffect)((function(){n&&d&&"rendered"!==u.status&&document.getElementById(Dt)&&(d.renderButton("#"+Dt,r),s({status:"rendered"}))}),[d,r,n,s,u.status]),a.default.createElement("div",{id:Dt})}n(23157),n(26833);var Gt=n(9377),Vt=n(75138),Ht=n(75059),Ut=n(44586),Wt=n(55165),Jt=n(45695),Qt=n(69349),Xt=n(74577),Kt=n(73774);function $t(e){var t=e.enabled,n=(0,ne.Yh)().value,r=(0,Xt.w)().selectedBillingAddress,o=(0,Qt.X)().eligible,i=(0,x.KO)(st.q.showShopCashTerms),l=(0,C.Z)(i,2)[1],u=(0,Kt.J)(r.countryCode),s=function(e){var t=e.enabled,n=(0,Vt.k)(),r=(0,Q.Lk)(),o=r.checkoutSessionIdentifier,i=r.sourceId,l=o||i,u=(0,Gt.b)().startsWith("en"),s=(0,a.useMemo)((function(){return{subjectId:l}}),[l]),c=t&&!n&&u,d=(0,Jt.K)({handle:Ut.pf,subject:s,controlVariant:Ct.Wy.Control,enabled:c&&!Ht.y});c||(d=Ct.Wy.Control);var p=(0,Wt.T)({disabled:!c,key:"cash_msg",variants:Object.values(Ct.Wy)});return p&&(d=p),{variant:d}}({enabled:t&&o&&u&&null!=(null==n?void 0:n.amount)&&(null==n?void 0:n.amount)>0}),c=s.variant,d=(0,a.useMemo)((function(){return{variant:c,needsLargerButtonGaps:c!==Ct.Wy.Control&&c!==Ct.Wy.Treatment4,showShopCashRewardMessaging:c!==Ct.Wy.Control}}),[c]);return(0,a.useEffect)((function(){d.showShopCashRewardMessaging&&setTimeout((function(){return l(!0)}),0)}),[d.showShopCashRewardMessaging,l]),d}var Yt=n(94184),en=n.n(Yt),tn=n(91757),nn=n(42948),an=n(78452),rn=n(30316),on=n(24799),ln={ApplePayButton:"Mh1MJ",dark:"OiqsO",light:"wxoTu"},un=n(63366),sn=(n(47042),n(85827),n(82526),n(41817),n(4723),n(66259)),cn=n(17936);function dn(e){var t=e.subtotal,n=e.duties,a=e.taxes,r=e.deliveryNext,o=e.discountLines,i=e.paymentLines,l=e.tipLines,u=e.lineItemsLabels,s=e.deliveryOptionGroupTypeLabels,c=e.deliveryMethodTitlePrefixes,d=e.formattedRecurringTotals,p=e.formattedRecurringTotalTooltip,f=void 0===t?[]:[{label:u.subtotal,amount:t?(0,nn.Dh)(t.amount):void 0}],m=(0,nt.$_)(r).map((function(e,t,n){var a=e.line,r=e.method;return{label:pn(a,r,n,s,c),amount:(0,nn.Dh)(r.costAfterDiscounts.amount)}})),v=n&&"available_total"===(null==n?void 0:n.status)&&0!==(null==n?void 0:n.totalDuty.amount)?[{label:u.duties,amount:(0,nn.Dh)(n.totalDuty.amount)}]:[],g=a&&"available_total"===a.status&&0!==a.totalTax.amount?[{label:u.taxes,amount:(0,nn.Dh)(a.totalTax.amount)}]:[],h=o&&o.lines.map((function(e){if((0,Ze.g8)(e))return{label:e.title,amount:(0,cn.Sd)((0,nn.Dh)(e.amount.amount))}})).filter((function(e){return void 0!==e}))||[],y=(null==i?void 0:i.lines.filter((function(e){return"giftCard"===e.method.type})).map((function(e){if(e.cost)return{label:u.giftCards,amount:(0,cn.Sd)((0,nn.Dh)(e.cost.amount))}})).filter((function(e){return void 0!==e})))||[],b=l&&l.lines[0],E=b&&b.amount.amount>0?[{label:u.tip,amount:(0,nn.Dh)(b.amount.amount)}]:[],_=d?d.map((function(e){return{label:e,amount:"0.00",type:"pending"}})):[],k=_.length>0&&p?[{label:p,amount:"0.00",type:"pending"}]:[];return[].concat(f,(0,zt.Z)(m),v,g,(0,zt.Z)(h),(0,zt.Z)(y),E,(0,zt.Z)(_),k)}function pn(e,t,n,a,r){var o=r[t.methodType];return 1===n.length?o:o+" ("+a[e.type]+")"}function fn(e,t,n){var a=(n||[]).filter(nt.aZ).map(nn.it);return(0,nn.LC)(a).filter((function(e){return e.length>0})).map((function(n){return{label:gn(n,e,t),amount:hn(n),detail:bn(n,t),identifier:(0,nn.JG)(n)}}))}var mn=", ";function vn(e,t){switch(e.length){case 0:case 1:return e.join("");case 2:return t(e[0],e[1]);default:return t(e.slice(0,e.length-1).join(mn),e[-1])}}function gn(e,t,n){var a=e.find((function(e){return e.deliveryLine.type===je.i.OneTimePurchase})),r="";a&&(r=a.methodType===Ge.l.PickUp?t[a.methodType]:a.title);var o=e.find((function(e){return e.deliveryLine.type===je.i.Subscription})),i="";if(o){var l;if(o.methodType===Ge.l.PickUp||o.methodType===Ge.l.Local)return o.title;i=o.title,r=null!=(l=null==a?void 0:a.title)?l:""}return vn((0,zt.Z)(new Set([r,i])).filter(Boolean),n)}function hn(e){return(0,nn.Dh)(e.reduce((function(e,t){return e+t.costAfterDiscounts.amount}),0))}function yn(e,t){return e.add(t),e}function bn(e,t){return vn((0,zt.Z)(e.map((function(e){var t,n=e.methodType,a=e.pickupLocation,r=e.deliveryPromisePresentmentTitle,o=e.description;return n===Ge.l.PickUp||n===Ge.l.PickupPoint?null!=(t=function(e){if(e){var t=e.address1,n=void 0===t?"":t,a=e.address2,r=void 0===a?"":a,o=e.city,i=void 0===o?"":o,l=e.company,u=void 0===l?"":l,s=e.zoneCode,c=void 0===s?"":s,d=e.countryCode,p=void 0===d?"":d;return[u,[n,r].filter(Boolean).join(" "),i,c,p].filter(Boolean).join(", ")}}(null==a?void 0:a.address))?t:"":r?r.short:o||""})).reduce(yn,new Set)),t)}function En(e,t){return{label:e,amount:(0,nn.Dh)(t.amount)}}function _n(e){var t,n,a={firstName:e.givenName||void 0,lastName:e.familyName||void 0,address1:null==e||null==(t=e.addressLines)?void 0:t[0],address2:(null==e||null==(n=e.addressLines)?void 0:n[1])||void 0,city:e.locality||void 0,postalCode:e.postalCode||void 0,zoneCode:e.administrativeArea||e.subLocality||void 0,countryCode:Cn(e.countryCode),phone:e.phoneNumber||void 0};return a.countryCode===sn.C.Hk&&(a.postalCode=void 0,a.zoneCode=e.postalCode),a.lastName||(a.lastName=a.firstName),a}function kn(e){return(0,nn.u7)(_n(e))}function Cn(e){return(null==e?void 0:e.toUpperCase())||sn.C.Zz}function Pn(e){var t=e.match(/ (\d+)$/);if(t)return t[1]}var wn=n(14565),Sn=n(4942),An=function(){var e=(0,r.q)(),t=(0,A.L)().name,n=e("order_summary.recurring_total_tooltip","N'inclut pas les frais d'expédition, les taxes, les frais de douane ou les réductions applicables."),o=(0,a.useMemo)((function(){return{total:t,subtotal:e("order_summary.subtotal_label","Sous-total"),duties:e("order_summary.duties_label","Frais de douane"),taxes:e("order_summary.taxes_label","Taxes"),giftCards:e("order_summary.gift_card_label","Carte-cadeau"),tip:e("order_summary.tip_label","Pourboire")}}),[t,e]),i=(0,a.useMemo)((function(){var t;return t={},(0,Sn.Z)(t,je.i.OneTimePurchase,e("shipping.shipping_method_one_time_purchase_group_title","Achat unique")),(0,Sn.Z)(t,je.i.Subscription,e("shipping.shipping_method_subscription_group_title","Abonnement")),t}),[e]),l=(0,a.useMemo)((function(){var t;return t={},(0,Sn.Z)(t,Ge.l.Shipping,e("wallets.shipping_line_label","Expédition")),(0,Sn.Z)(t,Ge.l.Local,e("shipping.local_delivery","Livraison locale")),(0,Sn.Z)(t,Ge.l.PickUp,e("delivery_options.pick_up","Récupérer")),(0,Sn.Z)(t,Ge.l.PickupPoint,e("delivery_options.pickup_point_method_definition","Expédier au point relais")),(0,Sn.Z)(t,Ge.l.Retail,e("delivery_options.retail_method_definition","Expédition au détail")),(0,Sn.Z)(t,Ge.l.None,e("delivery_options.none_method_definition","Aucune expédition")),t}),[e]),u=(0,a.useMemo)((function(){return function(t,n){return e("wallets.connect_shipping_methods",{method1:t,method2:n},"{{method1}} et {{method2}}")}}),[e]);return(0,a.useMemo)((function(){return{formattedRecurringTotalTooltip:n,lineItemsLabels:o,deliveryOptionGroupTypeLabels:i,deliveryMethodTitlePrefixes:l,connectTwoShippingTitles:u}}),[n,o,i,l,u])},In=["paymentDue","recurringTotals"],Ln=(n(21703),n(96647),n(51532),n(39714),n(96827)),xn=n(18841),Mn=function(){var e=(0,L.gG)(),t=e.email,n=e.shippingAddress,r=(0,Te.WL)(),o=(0,xn.zk)(),i=(0,ut.er)(),l=(0,He.st)(),u=(0,C.Z)(l,2)[1],s=(0,x.xP)();return(0,a.useCallback)((function(e){var a=(void 0===e?{clearBuyerState:!0}:e).clearBuyerState;o(),r||u(void 0),a&&(s.write(t,""),r||s.write(n,Object.assign({city:void 0,address1:void 0,address2:void 0,company:void 0,firstName:void 0,lastName:void 0,name:void 0,phone:void 0,postalCode:void 0,coordinates:void 0},i.defaultShippingDetails)))}),[i.defaultShippingDetails,r,t,n,o,u,s])},Zn=function(){var e=(0,x.xP)(),t=(0,on.Ij)(),n=(0,Te.N3)(on.w3.ApplePay,t),r=Mn(),o=(0,Rt.H)(),i=o.inMemoryApplePayParts,l=o.activeWalletSessionAtom,u=(0,Ln.d)();return(0,a.useCallback)((function(t,a){var o=e.read(a).value;u.incrementCounter("apple_pay_on_cancel",1,new Map([["completion_in_progress",o.toString()]])),o?e.write(i.paymentSheetError,{type:"payment_cancelled_while_processing"}):(t.abort(),r(),e.write(l,!1)),n(on.RM.Cancelled)}),[l,r,i.paymentSheetError,e,n,u])},Tn=n(11336),zn=n(43144),On=n(60136),Nn=n(38192),Rn=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).name="ApplePayAPIError",t}return(0,On.Z)(t,e),(0,zn.Z)(t)}((0,Nn.Z)(Error)),Bn=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).name="AbortedSessionError",t}return(0,On.Z)(t,e),(0,zn.Z)(t)}((0,Nn.Z)(Error)),qn=n(39116),Fn=n(49008),Dn=n(47356),jn=n(13229),Gn=function(e){function t(t,n,a,r){var o;return(o=e.call(this)||this).logger=t,o.translations=n,o.state=a,o.inMemoryApplePayParts=r,o}return(0,On.Z)(t,e),(0,zn.Z)(t,[{key:"negotiationResultMapper",get:function(){var e=this;return new Fn.ex({success:function(t){var n=t.result,a=t.violationActions,r=t.defaultMapper;return"errors"in n&&e.getMergedPaymentSheetAction({resultViolations:n.errors,violationActions:a}).firstPaymentSheetAction||r()},invalid:function(){return e.logger.notify(new Rn("Intercepted negotiation returned invalid"),{severity:"error"}),{action:"abort",effects:[function(){e.state.write(e.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_negotiation_status"})}]}},stale:function(){return e.logger.notify(new Rn("Intercepted negotiation returned stale"),{severity:"error"}),{action:"abort",effects:[function(){e.state.write(e.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_negotiation_status"})}]}},denied:function(){return{action:"abort"}},throttled:function(){return{action:"abort"}}},(function(){return e.mapUnhandledNegotiation()}),(function(){return e.getNegotiationViolationActions()}))}},{key:"completionResultMapper",get:function(){var e=this;return new Fn.ex({success:function(e){var t=e.result,n=e.defaultMapper;return"receipt"in t?{action:"submit"}:n()},rejected:function(t){var n=t.result,a=t.violationActions,r=t.defaultMapper,o="violations"in n;if(!o)return r();var i=o?n.violations:[];return e.getUnhandledErrors(i,a).forEach((function(t){e.logger.notify(new Rn("violation not handled: "+t.code),{severity:"error",errorClass:tn.TR.Api})})),e.getMergedPaymentSheetAction({resultViolations:i,violationActions:a}).generatePrioritizedPaymentSheetAction()||{action:"abort"}},invalid:function(){return e.logger.notify(new Rn("Intercepted negotiation returned invalid"),{severity:"error"}),{action:"abort",effects:[function(){e.state.write(e.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_completion_status"})}]}},stale:function(){return e.logger.notify(new Rn("Intercepted negotiation returned stale"),{severity:"error"}),{action:"abort",effects:[function(){e.state.write(e.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_completion_status"})}]}},fetch_failed:function(){return{action:"abort",effects:[function(){e.state.write(e.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_completion_status"})}]}},alreadyCompleted:function(){return{action:"abort"}},denied:function(){return{action:"abort"}},throttled:function(){return{action:"abort"}}},(function(t){return e.mapUnhandledCompletion(t)}),(function(){return e.getCompletionViolationActions()}))}},{key:"validateBilling",value:function(e){return e.billingContact?{shouldPersist:!0}:{shouldPersist:!1,paymentSheetAction:{action:"abort"}}}},{key:"validateShipping",value:function(e,t,n,a,r){var o=e.shippingContact;if(!t)return{shouldPersist:!1};if(!o)return{shouldPersist:!1,paymentSheetAction:{action:"abort"}};var i=_n(o),l=[];return n&&!i.address2&&l.push(new ApplePayError("shippingContactInvalid","addressLines",this.translations.addressLine2Error)),a&&!i.firstName&&l.push(new ApplePayError("shippingContactInvalid","name",this.translations.firstNameBlank)),r&&!i.phone&&l.push(new ApplePayError("shippingContactInvalid","phoneNumber",this.translations.phoneBlank)),l.length>0?{shouldPersist:!1,paymentSheetAction:{action:"show_error",errors:l}}:{shouldPersist:!0}}},{key:"getCompletionViolationActions",value:function(){var e=this;return[{violations:(0,zt.Z)(jn.lO),generateAction:function(){return{action:"abort"}}},{violations:Dn.w3,generateAction:function(){return{action:"abort"}}},{violations:[jn.UD],generateAction:function(){return{action:"abort"}}},{violations:Dn.lW,generateAction:function(){return{action:"abort",effects:[function(){e.state.write(e.inMemoryApplePayParts.paymentSheetError,{type:"unusable_partial_address"})}]}}},{violations:Dn.OM,generateAction:function(){return{action:"abort",effects:[function(){e.state.write(e.inMemoryApplePayParts.paymentSheetError,{type:"shipping_options_changed"})}]}}},{violations:Dn.MG,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","emailAddress",e.translations.emailInvalidError)]}}},{violations:Dn.mg,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",e.translations.firstNameBlank)]}}},{violations:Dn.vW,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",e.translations.lastNameBlank)]}}},{violations:Dn.R$,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",e.translations.addressLine1Blank)]}}},{violations:Dn.g8,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",e.translations.addressLine2Blank)]}}},{violations:Dn.mx,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",e.translations.cityBlank)]}}},{violations:Dn.rN,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",e.translations.deliveryZoneBlank)]}}},{violations:Dn.FU,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","country",e.translations.countryBlank)]}}},{violations:Dn.qX,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",e.translations.postalCodeBlank)]}}},{violations:Dn.w2,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",e.translations.phoneBlank)]}}},{violations:Dn.ik,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",e.translations.zoneNotFoundError)]}}},{violations:[Ce.j.DeliveryInvalidPostalCodeForCountry,Ce.j.DeliveryInvalidPostalCodeForZone],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",e.translations.postalCodeInvalidError)]}}},{violations:[Dn.Un],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",e.translations.firstNameTooLongError)]}}},{violations:[Dn._Q],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",e.translations.lastNameTooLongError)]}}},{violations:Dn.E7,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",e.translations.nameContainsEmojisError)]}}},{violations:Dn.VL,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",e.translations.nameContainsEmojisError)]}}},{violations:Dn.YG,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",e.translations.firstNameTooLongError)]}}},{violations:Dn.v6,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",e.translations.lastNameTooLongError)]}}},{violations:Dn.oc,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","administrativeArea",e.translations.zoneNotFoundError)]}}},{violations:[Ce.j.PaymentsInvalidPostalCodeForCountry,Ce.j.PaymentsInvalidPostalCodeForZone],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",e.translations.postalCodeInvalidError)]}}},{violations:Dn.zQ,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",e.translations.postalCodeEmojiError)]}}},{violations:Dn.hv,generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",e.translations.postalCodeNotSupportedError)]}}},{violations:[Ce.j.PaymentsFirstNameRequired],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",e.translations.firstNameBlank)]}}},{violations:[Ce.j.PaymentsLastNameRequired],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",e.translations.lastNameBlank)]}}},{violations:[Ce.j.PaymentsAddress1Required],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",e.translations.addressLine1Blank)]}}},{violations:[Ce.j.PaymentsCityRequired],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","locality",e.translations.cityBlank)]}}},{violations:[Ce.j.PaymentsPostalCodeRequired],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",e.translations.postalCodeBlank)]}}},{violations:[Ce.j.PaymentsCountryRequired],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","country",e.translations.countryBlank)]}}},{violations:[Ce.j.PaymentsZoneRequiredForCountry],generateAction:function(){return{action:"show_error",errors:[new ApplePayError("billingContactInvalid","administrativeArea",e.translations.deliveryZoneBlank)]}}}]}},{key:"mapUnhandledCompletion",value:function(e){var t=this;return this.logger.notify(new Rn("Intercepted completion returned unhandled status: "+e.status),{severity:"error",errorClass:tn.TR.Api}),{action:"abort",effects:[function(){t.state.write(t.inMemoryApplePayParts.paymentSheetError,{type:"unhandled_completion_status"})}]}}},{key:"getNegotiationViolationActions",value:function(){var e=this;return[{violations:[jn.UD],generateAction:function(){return{action:"abort"}}},{violations:(0,zt.Z)(jn.lO),generateAction:function(){return{action:"abort"}}},{violations:Dn.ik,generateAction:function(){return{action:"update",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",e.translations.zoneNotFoundError)]}}},{violations:Dn.oc,generateAction:function(){return{action:"update",errors:[new ApplePayError("billingContactInvalid","administrativeArea",e.translations.zoneNotFoundError)]}}},{violations:Dn.OM,generateAction:function(){return{action:"update",errors:[new ApplePayError("addressUnserviceable")]}}},{violations:[Ce.j.DeliveryInvalidPostalCodeForCountry,Ce.j.DeliveryInvalidPostalCodeForZone],generateAction:function(){return{action:"update",errors:[new ApplePayError("shippingContactInvalid","postalCode",e.translations.postalCodeInvalidError)]}}},{violations:[Ce.j.PaymentsInvalidPostalCodeForCountry,Ce.j.PaymentsInvalidPostalCodeForZone],generateAction:function(){return{action:"update",errors:[new ApplePayError("billingContactInvalid","postalCode",e.translations.postalCodeInvalidError)]}}}]}},{key:"mapUnhandledNegotiation",value:function(){return{action:"update",errors:[]}}}]),t}(Fn.$F);function Vn(){var e=(0,r.q)(),t=(0,rn.I)(),n=(0,x.xP)(),o=(0,Rt.H)().inMemoryApplePayParts,i=(0,a.useMemo)((function(){return{firstNameTooLongError:e("wallets.errors.formatting.first_name_too_long","Le prénom contient trop de lettres"),lastNameTooLongError:e("wallets.errors.formatting.last_name_too_long","Le nom contient trop de lettres"),nameContainsEmojisError:e("wallets.errors.formatting.name_contains_emojis","Supprimez l’emoji de votre nom"),zoneNotFoundError:e("wallets.errors.invalid.zone","Entrez un État/une province valide"),addressLine2Error:e("wallets.errors.missing.address2","Entrez un numéro d’appartement, de suite, etc."),emailInvalidError:e("wallets.errors.invalid.email","Entrez une adresse e-mail valide"),postalCodeInvalidError:e("wallets.errors.invalid.postal_code","Saisir un code postal valide"),postalCodeEmojiError:e("wallets.errors.formatting.postal_code_contains_emoji","Supprimez l’emoji de votre code postal"),postalCodeNotSupportedError:e("wallets.errors.unsupported.postal_code","Cet emplacement n’est pas pris en charge"),addressLine1Blank:e("wallets.errors.missing.address1","Entrez une adresse"),addressLine2Blank:e("wallets.errors.missing.address2","Entrez un numéro d’appartement, de suite, etc."),firstNameBlank:e("wallets.errors.missing.first_name","Entrez un prénom"),lastNameBlank:e("wallets.errors.missing.last_name","Entrez un nom"),cityBlank:e("wallets.errors.missing.city","Entrez une ville"),countryBlank:e("wallets.errors.missing.country","Sélectionnez un pays/une région"),deliveryZoneBlank:e("wallets.errors.missing.province","Sélectionnez un État/une province"),postalCodeBlank:e("wallets.errors.missing.zip","Entrez un code postal"),phoneBlank:e("wallets.errors.missing.phone","Saisir un numéro de téléphone")}}),[e]);return(0,a.useMemo)((function(){return new Gn(t,i,n,o)}),[i,o,t,n])}var Hn=function(){var e=Vn();return(0,a.useCallback)((function(t){if(!e.negotiationResultMapper)throw new Rn("NegotiationResultMapper not set up correctly");return e.negotiationResultMapper.mapResultToPaymentSheetAction(t)}),[e.negotiationResultMapper])},Un=function(){var e=(0,x.xP)(),t=(0,on.Ij)(),n=(0,Te.N3)(on.w3.ApplePay,t),r=(0,rn.I)(),o=(0,Rt.H)(),i=o.activeWalletSessionAtom,l=o.inMemoryApplePayParts,u=Mn();return(0,a.useCallback)((function(t){var a=t.session,o=t.isProcessing,s=void 0!==o&&o,c=t.error;if(!(c instanceof Bn)&&(n(on.RM.Failure),s||e.write(l.paymentSheetError,{type:"session_terminated"}),r.notify(c,{severity:"error",errorClass:tn.TR.Api}),e.write(i,!1),a))try{a.abort()}catch(d){}finally{u()}}),[i,l.paymentSheetError,r,e,n,u])},Wn=["paymentDue","recurringTotals"],Jn=function(e,t){return(0,nn.ZD)(e,kn(t),qn.S.ApplePay)},Qn=function(){var e=(0,Rt.H)().activeWalletSessionAtom,t=(0,x.xP)(),n=Un(),r=Mn(),o=Hn(),i=(0,j.JL)().negotiate,l=(0,wn.h)(),u=(0,ne.ii)(),s=(0,le.Ry)().shippingRequired,c=(0,Ln.d)(),d=An(),p=d.formattedRecurringTotalTooltip,f=d.lineItemsLabels,m=d.deliveryOptionGroupTypeLabels,v=d.deliveryMethodTitlePrefixes;return(0,a.useCallback)((0,ye.Z)((0,he.Z)().mark((function a(d,g){var h,y;return(0,he.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(y=function(){var e=(0,nn.X8)(u),t=e.paymentDue,a=e.recurringTotals,r=(0,un.Z)(e,Wn);if(null==t)return n({session:g,error:new Rn("Missing negotiated payment due")});try{g.completePaymentMethodSelection({newTotal:En(f.total,t),newLineItems:dn(Object.assign(Object.assign({},r),{},{formattedRecurringTotals:l(a),formattedRecurringTotalTooltip:p,lineItemsLabels:f,deliveryOptionGroupTypeLabels:m,deliveryMethodTitlePrefixes:v}))})}catch(o){o instanceof Error&&(c.log(Tn.in.Error,"[ApplePayButton.session.onpaymentmethodselected] session terminated due to error thrown",{error:o,session:g}),n({error:o,session:g}))}},h=d.paymentMethod.billingContact,s||!h){a.next=5;break}return a.next=5,i(void 0,{silenceValidations:!0,silenceViolations:["all"],fieldsToResolve:["duties","taxes"],customizeNegotiation:function(e){return Jn(e,h)},progression:!1,onComplete:function(n){var a;if(t.read(e).value){var i=o(n);null==(a=i.effects)||a.forEach((function(e){return e()})),"abort"===i.action&&(c.log(Tn.in.Info,"[ApplePayButton.session.onpaymentmethodselected] session aborted due to blocking error",{errors:i.errors,session:g}),g.abort(),r())}else r()}});case 5:g&&t.read(e).value&&y();case 6:case"end":return a.stop()}}),a)}))),[e,r,v,m,l,p,o,f,i,u,s,t,c,n])},Xn=function(){var e=Mn();return(0,a.useCallback)((function(t){var n=t.session,a=t.paymentSheetAction,r=t.onProceed;switch(a.action){case"abort":n.abort(),e();break;case"update":r(a.errors);break;default:throw new Rn('Missing handler for payment sheet action "'+a.action+'"')}}),[e])},Kn=["paymentDue","recurringTotals"],$n=n(76386),Yn=n(47940),ea=JSON.parse('{"id":"d9f071c731aecba22773de93d4a37b01327b6bb7efae9eeee0564b38f184ae28","name":"ApplePaySessionQuery","source":"query ApplePaySessionQuery($applePaySessionCreate:ApplePaySessionCreateInput,$pendingTask:PendingTaskInput){applePaySession(input:{applePaySessionCreate:$applePaySessionCreate,pendingTask:$pendingTask}){...on ApplePaySessionCreationSuccess{body id __typename}...on ApplePaySessionCreationFailed{code message __typename}...on PendingTask{taskId pollDelay __typename}__typename}}"}'),ta=function(){var e=(0,ye.Z)((0,he.Z)().mark((function e(t,n,a,r){var o,i,l,u,s;return(0,he.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=function(){var e=(0,ye.Z)((0,he.Z)().mark((function e(r){var o,i,l;return(0,he.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query(ea,{cache:!1,variables:r?{pendingTask:{taskId:r}}:{applePaySessionCreate:{resourceId:n,validationUrl:a}}});case 2:if(o=e.sent,i=o.data,!(l=o.error)){e.next=7;break}throw new Rn("ApplePaySession Query error: "+JSON.stringify(l,["type","message"]));case 7:if(i){e.next=9;break}throw new Rn("ApplePaySession Query error: no data returned by GraphQL");case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=0,l="";case 3:if(!r.aborted){e.next=5;break}throw new Bn;case 5:return e.next=7,o(l);case 7:u=e.sent,s=u.applePaySession,e.t0=s.__typename,e.next="ApplePaySessionCreationSuccess"===e.t0?12:"ApplePaySessionCreationFailed"===e.t0?13:"PendingTask"===e.t0?14:21;break;case 12:return e.abrupt("return",s);case 13:throw new Rn("ApplePaySession Query error: fail to create apple pay session with "+s.code);case 14:if(l=s.taskId,!((i+=1)>=5)){e.next=18;break}throw new Rn("ApplePaySession Query error: reached maximum amount of polls");case 18:return e.next=20,(0,cn._v)(s.pollDelay);case 20:return e.abrupt("break",22);case 21:(0,Yn.mE)(s);case 22:e.next=3;break;case 23:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),na=["paymentDue","recurringTotals"],aa=function(){var e=(0,x.xP)(),t=Un(),n=(0,xn.zk)(),r=(0,j.JL)().progress,o=(0,Q.Lk)().checkoutSessionIdentifier,i=(0,ne.ii)(),l=(0,ut.er)(),u=(0,Te.ev)(),s=(0,ne.Zo)(),c=(0,le.Jw)(),d=(0,Te.FZ)(),p=(0,Te.w_)(tt.F.ApplePay),f=(0,Rt.H)(),m=f.walletUsedForSubmissionAtom,v=f.activeWalletSessionAtom,g=Vn(),h=function(){var e=Vn();return(0,a.useCallback)((function(t){if(!e.completionResultMapper)throw new Rn("CompletionResultMapper not set up correctly");return e.completionResultMapper.mapResultToPaymentSheetAction(t)}),[e.completionResultMapper])}(),y=Mn(),b=(0,L.gG)(),E=b.email,_=b.shippingAddress,k=b.billingAddress,C=b.paymentLines;return(0,a.useCallback)((0,ye.Z)((0,he.Z)().mark((function a(f,b,P){var w,S,A,I,L,x,M,Z,T,z,O,N,R,B,q,F;return(0,he.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(S=function(a,r){var i;switch(null==(i=r.effects)||i.forEach((function(e){return e()})),r.action){case"submit":var l=(null==p?void 0:p.walletOrderTypeIdentifier)&&(null==p?void 0:p.walletServiceUrl)&&(null==p?void 0:p.walletAuthenticationToken),u=o&&l?{status:ApplePaySession.STATUS_SUCCESS,orderDetails:{orderTypeIdentifier:p.walletOrderTypeIdentifier,orderIdentifier:o,webServiceURL:p.walletServiceUrl,authenticationToken:p.walletAuthenticationToken}}:ApplePaySession.STATUS_SUCCESS;try{a.completePayment(u)}catch(d){t({session:a,error:d,isProcessing:!0})}finally{e.write(v,!1)}e.write(m,tt.F.ApplePay);break;case"show_error":var s=(0,Fn.f9)(r),c={status:ApplePaySession.STATUS_FAILURE,errors:s};try{a.completePayment(c),0===c.errors.length?(e.write(v,!1),y()):y({clearBuyerState:!1})}catch(d){t({session:a,error:d})}break;case"abort":try{a.completePayment(ApplePaySession.STATUS_FAILURE),e.write(v,!1)}catch(d){t({session:a,error:d})}finally{n()}break;default:t({session:a,error:new Rn('Missing handler for payment sheet action "'+r.action+'"')})}},A=l.isRequired("address2"),I=l.isRequired("firstName"),L=l.isRequired("phone"),x=f.payment,M=x.token,Z=x.billingContact,T=x.shippingContact,(z=g.validateBilling(f.payment)).shouldPersist&&Z&&(O=_n(Z),e.write(k,O)),!z.paymentSheetAction){a.next=10;break}return S(b,z.paymentSheetAction),a.abrupt("return");case 10:if((N=g.validateShipping(f.payment,u,A,I,L)).shouldPersist&&T&&(d({postalCode:T.postalCode,countryCode:Cn(T.countryCode),city:T.locality,zoneCode:T.administrativeArea||T.subLocality},tt.F.ApplePay),R=_n(T),e.write(_,R)),!N.paymentSheetAction){a.next=15;break}return S(b,N.paymentSheetAction),a.abrupt("return");case 15:return(B=null!=(w=null==s?void 0:s.email)?w:null==T?void 0:T.emailAddress)&&e.write(E,B),((q=i.state.read(i.current.fields.paymentDue).value)&&q.amount>0||c)&&(F=e.read(C).value,e.write(C,(0,xn.JR)(F,{method:{type:"wallet",name:tt.F.ApplePay,walletContent:Object.assign(Object.assign({},M.paymentData),{},{lastDigits:Pn(M.paymentMethod.displayName),paymentMethodIdentifier:null==p?void 0:p.paymentMethodIdentifier})}}))),e.write(P,!0),a.next=22,r((function(e){var t=h(e);S(b,t)}),{skipToCompletion:!0});case 22:e.write(P,!1);case 23:case"end":return a.stop()}}),a)}))),[l,g,u,null==s?void 0:s.email,i,c,e,r,t,null==p?void 0:p.walletOrderTypeIdentifier,null==p?void 0:p.walletServiceUrl,null==p?void 0:p.walletAuthenticationToken,null==p?void 0:p.paymentMethodIdentifier,o,m,v,n,k,d,_,E,C,h,y])},ra=function(){var e=Un(),t=(0,Rt.H)(),n=t.inMemoryApplePayParts,r=t.activeWalletSessionAtom,o=t.telemetry,i=(0,x.xP)(),l=Zn(),u=function(){var e=(0,x.xP)(),t=(0,$n.a)(),n=(0,Q.Lk)().sourceId,r=(0,on.Ij)(),o=(0,Te.N3)(on.w3.ApplePay,r),i=Un(),l=(0,Rt.H)().activeWalletSessionAtom;return(0,a.useCallback)((function(a,r,u){var s;s=r===sn.C.Cn?"https://cn-apple-pay-gateway.apple.com/paymentservices/startSession":"https://apple-pay-gateway.apple.com/paymentservices/startSession",ta(t,n,s,u.signal).then((function(t){o(on.RM.Success);try{a.completeMerchantValidation(JSON.parse(t.body))}catch(n){if(e.read(l).value)throw n}})).catch((function(e){i({error:e,session:a})}))}),[l,t,n,e,i,o])}(),s=Qn(),c=function(){var e=(0,x.xP)(),t=Un(),n=Mn(),r=(0,wn.h)(),o=Hn(),i=(0,j.JL)().negotiate,l=(0,ne.ii)(),u=(0,Te.WL)(),s=(0,He.st)(),c=(0,C.Z)(s,2)[1],d=(0,Rt.H)().activeWalletSessionAtom,p=(0,L.gG)().shippingAddress,f=An(),m=f.formattedRecurringTotalTooltip,v=f.lineItemsLabels,g=f.deliveryOptionGroupTypeLabels,h=f.deliveryMethodTitlePrefixes,y=Xn();return(0,a.useCallback)((0,ye.Z)((0,he.Z)().mark((function a(s,f){var b,E,_;return(0,he.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return _=function(e){var n=(0,nn.X8)(l),a=n.paymentDue,o=n.recurringTotals,i=(0,un.Z)(n,Kn);if(null==a)return t({session:e,error:new Rn("Missing negotiated payment due")});try{e.completeShippingMethodSelection({newTotal:En(v.total,a),newLineItems:dn(Object.assign(Object.assign({},i),{},{formattedRecurringTotals:r(o),formattedRecurringTotalTooltip:m,lineItemsLabels:v,deliveryOptionGroupTypeLabels:g,deliveryMethodTitlePrefixes:h}))})}catch(u){u instanceof Error&&t({error:u,session:e})}},b=e.read(p).value,E=(0,nn.QM)(s.shippingMethod.identifier),c(E),a.next=6,i(void 0,{silenceValidations:!0,silenceViolations:["all"],fieldsToResolve:["deliveryNext","duties","taxes"],progression:!1,customizeNegotiation:u?void 0:function(e){return(0,nn.Yi)(e,b,qn.S.ApplePay)},onComplete:function(a){if(e.read(d).value)try{var r,i=o(a);null==(r=i.effects)||r.forEach((function(e){return e()})),y({session:f,paymentSheetAction:i,onProceed:function(){return _(f)}})}catch(l){l instanceof Error&&t({error:l,session:f})}else n()}});case 6:case"end":return a.stop()}}),a)}))),[d,n,h,g,r,m,o,y,u,v,i,l,p,c,e,t])}(),d=function(){var e=(0,x.xP)(),t=Un(),n=Mn(),r=(0,wn.h)(),o=Hn(),i=(0,j.JL)().negotiate,l=(0,ne.ii)(),u=(0,Te.WL)(),s=(0,He.st)(),c=(0,C.Z)(s,2)[1],d=(0,Rt.H)().activeWalletSessionAtom,p=(0,L.gG)().shippingAddress,f=An(),m=f.formattedRecurringTotalTooltip,v=f.lineItemsLabels,g=f.deliveryOptionGroupTypeLabels,h=f.deliveryMethodTitlePrefixes,y=f.connectTwoShippingTitles,b=Xn();return(0,a.useCallback)((0,ye.Z)((0,he.Z)().mark((function a(s,f){var E,_;return(0,he.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return _=function(e,n){var a=(0,nn.X8)(l),o=a.paymentDue,i=a.recurringTotals,u=(0,un.Z)(a,na);if(null==o)return t({session:e,error:new Rn("Missing negotiated payment due")});try{e.completeShippingContactSelection({errors:n,newTotal:En(v.total,o),newLineItems:dn(Object.assign(Object.assign({},u),{},{formattedRecurringTotals:r(i),formattedRecurringTotalTooltip:m,lineItemsLabels:v,deliveryOptionGroupTypeLabels:g,deliveryMethodTitlePrefixes:h})),newShippingMethods:fn(h,y,(0,nt.$_)(u.deliveryNext).map((function(e){return e.line})))})}catch(s){s instanceof Error&&t({error:s,session:e})}},c(void 0),E=kn(s.shippingContact),e.write(p,E),a.next=6,i(void 0,{silenceValidations:!0,silenceViolations:["all"],fieldsToResolve:["deliveryNext","duties","taxes"],progression:!1,customizeNegotiation:u?void 0:function(e){return(0,nn.Yi)(e,E,qn.S.ApplePay)},onComplete:function(t){var a,r=o(t);null==(a=r.effects)||a.forEach((function(e){return e()})),e.read(d).value?b({session:f,paymentSheetAction:r,onProceed:function(e){return _(f,e)}}):n()}});case 6:case"end":return a.stop()}}),a)}))),[c,e,p,i,u,o,d,b,n,l,t,v,r,m,g,h,y])}(),p=aa();return(0,a.useCallback)((function(t,a){i.write(n.paymentSheetError,void 0),i.write(r,!0),i.write(o.lastClickedWallet,tt.F.ApplePay);var f,m=(0,N.cp)(!1),v=new AbortController;try{f=new ApplePaySession(6,t)}catch(g){return void(g instanceof Error&&e({error:g}))}return f.oncancel=function(){return l(v,m)},f.onvalidatemerchant=function(){return u(f,a,v)},f.onpaymentmethodselected=function(e){return s(e,f)},f.onshippingmethodselected=function(e){return c(e,f)},f.onshippingcontactselected=function(e){return d(e,f)},f.onpaymentauthorized=function(e){return p(e,f,m)},f}),[r,n.paymentSheetError,l,p,s,d,c,u,i,o.lastClickedWallet,e])},oa=function(e){var t=(0,be.Q)().shop.country.code,n=(0,rn.I)(),r=(0,ne.ii)(),o=(0,on.Ij)(),i=function(){var e=(0,ne.ii)(),t=(0,ut.er)().isRequired("phone"),n=(0,Te.ev)(),r=(0,Te.rm)(),o=(0,ne.Zo)(),i=(0,wn.h)(),l=(0,le.vu)().value,u=(0,nn.X8)(e),s=u.paymentDue,c=u.recurringTotals,d=(0,un.Z)(u,In),p=An();return(0,a.useCallback)((function(e,a){var u=function(e){var t=e.phoneRequired,n=e.emailRequired,a=e.shippingRequired,r=["name","postalAddress"],o=[].concat((0,zt.Z)(t?["phone"]:[]),(0,zt.Z)(n?["email"]:[]));return{requiredShippingContactFields:a?[].concat(r,(0,zt.Z)(o)):o,requiredBillingContactFields:r}}({phoneRequired:t,emailRequired:r,shippingRequired:n}),f=u.requiredShippingContactFields,m=u.requiredBillingContactFields,v=En(p.lineItemsLabels.total,s),g=function(e){var t={};return null!=e&&e.email&&(t.emailAddress=e.email),null!=e&&e.phone&&(t.phoneNumber=e.phone),t}("CustomerProfile"===(null==o?void 0:o.__typename)?o:void 0),h=dn(Object.assign(Object.assign({},d),{},{formattedRecurringTotals:i(c)},p)),y=fn(p.deliveryMethodTitlePrefixes,p.connectTwoShippingTitles,l);return{total:v,currencyCode:s.currencyCode,countryCode:a,lineItems:h,shippingMethods:y,shippingType:"shipping",merchantCapabilities:["supports3DS"],supportedNetworks:e,requiredShippingContactFields:f,requiredBillingContactFields:m,shippingContact:g,billingContact:g}}),[o,l,r,i,p,d,s,t,c,n])}(),l=ra(),u=(0,Te.N3)(on.w3.ApplePay,o),s=(0,an.X)(),c=(0,C.Z)(s,2)[1];return(0,a.useCallback)((function(){if(!(0,nn.X8)(r).paymentDue)return u(on.RM.Failure),c({type:"session_terminated"}),void n.notify(new Rn("Missing paymentDue"),{severity:"error",errorClass:tn.TR.Api});var a=i(e,t),o=l(a,t);null==o||o.begin()}),[i,l,t,n,r,c,e,u])};function ia(e){var t=e.supportedNetworks,n=e.color,o=(0,r.q)(),i=(0,Gt.b)(),l=oa(t);return a.default.createElement("button",{className:en()(ln.ApplePayButton,ln[n]),lang:i,onClick:l,type:"button","aria-label":o("wallets.call_to_action",{walletName:o("brand.apple_pay","Apple Pay")},"Payer avec {{walletName}}")})}var la=n(70773),ua=(0,pe.L)({load:function(){return(0,fe.R)((function(){return Promise.all([n.e(3866),n.e(1926)]).then(n.bind(n,45187))}))},id:function(){return 45187}});function sa(){return a.default.createElement(la.X,{id:"GooglePay"},a.default.createElement(ua,null))}var ca=n(84637),da=n(95923),pa=n(97977),fa={small:"2px",base:"5px",large:"10px",fullyRounded:"36px"},ma=n(87343),va=n(44578),ga=n.p+"058138c2e3b386b0b20f.png",ha={ShopCashRewardMessaging:"MZlR0",ShopCashRewardMessagingBadge:"Si6bV",ShopCashRewardMessagingRibbon:"rnbTs",ShopCashRewardMessagingCoin:"qSlFM",ShopCashRewardMessagingRibbonWithFold:"F1tEg",t6:"lpF9r",t1:"MTHQt",t3:"pKATV",t2:"nwppz",t4:"hTUj_",t5:"iyACQ"};function ya(e){var t,n,r,o=e.variant,i=(0,a.useRef)(null),l=(0,pa.G)(),u=l.cornerRadius,s=l.global.cornerRadius,c=l.primaryButton.cornerRadius||s||"base",d={none:0,small:null!=(t=u.small)?t:parseInt(fa.small,10),base:null!=(n=u.base)?n:parseInt(fa.base,10),large:null!=(r=u.large)?r:parseInt(fa.large,10),fullyRounded:parseInt(fa.fullyRounded,10)}[c],p=en()(ha.ShopCashRewardMessaging,o===Ct.Wy.Treatment4?ha.ShopCashRewardMessagingBadge:[ha.ShopCashRewardMessagingRibbon,d<11&&ha.ShopCashRewardMessagingRibbonWithFold],ha[o]);switch(o){case Ct.Wy.Treatment1:return a.default.createElement(a.default.Fragment,null,a.default.createElement(va.I,{size:"medium"}),a.default.createElement("span",{ref:i,className:p},"Earn 1%",a.default.createElement("span",{className:ha.ShopCashRewardMessagingCoin},a.default.createElement(ma.E,{source:ga,accessibilityDescription:"Shop Cash"}))));case Ct.Wy.Treatment2:return a.default.createElement(a.default.Fragment,null,a.default.createElement(va.I,{size:"medium"}),a.default.createElement("span",{ref:i,className:p},"+1% Shop Cash"));case Ct.Wy.Treatment3:case Ct.Wy.Treatment4:return a.default.createElement(a.default.Fragment,null,a.default.createElement(va.I,{size:"medium"}),a.default.createElement("span",{ref:i,className:p},"Earn rewards"));case Ct.Wy.Treatment5:return a.default.createElement(a.default.Fragment,null,a.default.createElement(va.I,{size:"medium"}),a.default.createElement("span",{ref:i,className:p},"Get Shop Cash"));case Ct.Wy.Treatment6:return a.default.createElement(a.default.Fragment,null,a.default.createElement(va.I,{size:"medium"}),a.default.createElement("span",{ref:i,className:p},"1%",a.default.createElement("span",{className:ha.ShopCashRewardMessagingCoin},a.default.createElement(ma.E,{source:ga,accessibilityDescription:"Shop Cash"}))));default:return a.default.createElement(va.I,{size:"medium"})}}var ba={Button:"KVEbf","Button--contrast":"LqPnM"},Ea="shop-pay-button";function _a(){var e=(0,ae.U)(),t=e.origin,n=e.prefix,r=(0,G.a)(),o=(0,A.L)().id,i=(0,Mt.IX)(),l=(0,on.Ij)(),u=(0,Y.sK)({foregroundColor:da.nx}),s=(0,da.t6)(),c=(0,Te.GM)(),d=(0,C.Z)(c,2)[1],p=$t({enabled:!0}).variant,f=(0,a.useCallback)((function(e){var t=parseInt((0,J.Bp)(o),10),n=(0,on.c)(on.w3.ShopifyPay,e,t,l);null==r||r.recordImmediately(n),d(tt.F.ShopPay)}),[o,r,l,d]),m=(0,a.useMemo)((function(){return""+t+n+"?payment=shop_pay&redirect_source=direct_checkout_checkout"+(i?"&"+i:"")}),[t,n,i]),v=en()(ba.Button,(0,Sn.Z)({},ba["Button--contrast"],!u&&!s));return a.default.createElement("a",{id:Ea,href:m,className:v,"aria-label":"Shop Pay",onClick:function(){return f(on.RM.Success)}},a.default.createElement(ya,{variant:p}))}var ka=(0,pe.L)({load:function(){return(0,fe.R)((function(){return n.e(3841).then(n.bind(n,10249))}))},id:function(){return 10249}});function Ca(){return a.default.createElement(la.X,{id:"FacebookPay"},a.default.createElement(ka,null))}var Pa,wa,Sa=n(9582);function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Aa.apply(this,arguments)}var Ia=function(e){return a.createElement("svg",Aa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 102 20"},e),Pa||(Pa=a.createElement("path",{fill:"#333e48",d:"M75.19 1.786c-.994 0-1.933.326-2.815.98v5.94c.896.683 1.82 1.023 2.774 1.023 1.932 0 2.899-1.32 2.899-3.96 0-2.655-.953-3.983-2.858-3.983zm-2.962-.277A5.885 5.885 0 0 1 73.93.444a4.926 4.926 0 0 1 1.85-.362c.672 0 1.282.127 1.827.383a3.763 3.763 0 0 1 1.387 1.108c.378.482.669 1.068.872 1.757.203.689.305 1.466.305 2.332 0 .88-.109 1.675-.326 2.385-.217.71-.522 1.314-.914 1.81a4.137 4.137 0 0 1-1.429 1.16 4.165 4.165 0 0 1-1.87.416c-1.26 0-2.346-.419-3.256-1.256v4.983c0 .284-.14.426-.42.426h-1.24c-.28 0-.42-.142-.42-.426V.827c0-.284.14-.426.42-.426h.925c.28 0 .441.142.483.426l.105.682zm13.194 8.37a4.21 4.21 0 0 0 1.45-.277 5.463 5.463 0 0 0 1.45-.81V6.62c-.35-.085-.719-.152-1.104-.202a8.8 8.8 0 0 0-1.124-.075c-1.583 0-2.374.617-2.374 1.853 0 .54.147.955.441 1.246.294.29.715.437 1.261.437zm-2.458-7.625-.158.053a.561.561 0 0 1-.179.033c-.182 0-.273-.128-.273-.384V1.38c0-.199.028-.337.084-.415.056-.078.169-.153.337-.224.448-.199 1-.359 1.66-.48.657-.12 1.316-.18 1.974-.18 1.33 0 2.311.277 2.942.83.63.554.945 1.413.945 2.577v7.284c0 .284-.14.426-.42.426h-.903c-.267 0-.42-.135-.463-.405l-.105-.702a5.74 5.74 0 0 1-1.67 1.022 4.908 4.908 0 0 1-1.817.362c-1.009 0-1.807-.288-2.395-.863-.589-.575-.883-1.345-.883-2.31 0-1.037.364-1.864 1.092-2.481.73-.618 1.71-.927 2.942-.927.784 0 1.667.12 2.647.362V3.852c0-.767-.168-1.307-.504-1.619-.336-.313-.925-.469-1.764-.469-.982 0-2.01.163-3.09.49zm14.16 10.84c-.379.98-.816 1.683-1.314 2.109-.496.426-1.144.639-1.943.639-.448 0-.847-.05-1.197-.15a.606.606 0 0 1-.336-.202c-.07-.093-.105-.237-.105-.437V14.5c0-.27.105-.405.315-.405.07 0 .175.014.315.043.14.028.33.043.567.043.532 0 .946-.128 1.24-.384.294-.255.56-.724.798-1.406l.4-1.086-4.056-10.137c-.098-.241-.146-.411-.146-.511 0-.17.097-.256.294-.256h1.26c.224 0 .378.036.463.106.083.072.167.228.251.47l2.942 8.263L99.708.976c.084-.24.168-.397.252-.469.084-.07.238-.106.462-.106h1.177c.196 0 .294.086.294.256 0 .1-.05.27-.147.51l-4.622 11.927M40.15 15.47c-3.761 2.814-9.216 4.31-13.912 4.31-6.583 0-12.51-2.466-16.996-6.572-.352-.322-.038-.763.385-.513 4.84 2.855 10.825 4.574 17.006 4.574 4.17 0 8.753-.877 12.971-2.691.636-.273 1.17.425.547.891"})),wa||(wa=a.createElement("path",{fill:"#333e48",d:"M41.717 13.657c-.482-.624-3.181-.296-4.394-.148-.368.044-.425-.281-.093-.517 2.153-1.533 5.682-1.09 6.092-.577.413.518-.108 4.104-2.127 5.816-.31.263-.605.122-.468-.225.455-1.15 1.471-3.724.99-4.349M37.429 2.06V.57A.365.365 0 0 1 37.8.193l6.59-.001c.21 0 .38.155.38.376v1.278c-.003.214-.18.494-.496.938L40.86 7.722c1.267-.03 2.607.163 3.757.818.26.148.33.367.35.582v1.59c0 .218-.237.472-.485.34-2.028-1.077-4.718-1.194-6.96.013-.23.124-.47-.126-.47-.345V9.209c0-.242.005-.656.246-1.024l3.953-5.75H37.81a.369.369 0 0 1-.38-.375M13.4 11.365h-2.005a.38.38 0 0 1-.358-.343L11.038.595a.38.38 0 0 1 .387-.375h1.866a.38.38 0 0 1 .365.35v1.36h.037C14.18.615 15.096 0 16.331 0c1.253 0 2.039.614 2.6 1.93C19.418.615 20.521 0 21.7 0c.842 0 1.758.351 2.32 1.141.635.878.505 2.15.505 3.27l-.002 6.58a.38.38 0 0 1-.387.374h-2.001a.378.378 0 0 1-.36-.374V5.463c0-.438.037-1.535-.056-1.952-.15-.703-.6-.9-1.179-.9-.486 0-.991.33-1.197.855-.206.527-.188 1.405-.188 1.997v5.527a.38.38 0 0 1-.386.375h-2.002a.379.379 0 0 1-.36-.374l-.001-5.528c0-1.163.186-2.874-1.235-2.874-1.44 0-1.384 1.668-1.384 2.874l-.001 5.527a.38.38 0 0 1-.387.375m37.059-9.236c-1.478 0-1.571 2.04-1.571 3.312 0 1.273-.02 3.993 1.552 3.993 1.554 0 1.628-2.194 1.628-3.532 0-.877-.038-1.93-.3-2.764-.224-.724-.673-1.01-1.31-1.01zM50.439 0c2.975 0 4.584 2.59 4.584 5.88 0 3.181-1.777 5.705-4.584 5.705-2.918 0-4.508-2.59-4.508-5.814C45.93 2.523 47.539 0 50.439 0zm8.441 11.365h-1.997a.379.379 0 0 1-.36-.374L56.52.561a.381.381 0 0 1 .386-.34L58.764.22c.175.009.32.13.356.291v1.595h.038C59.72.68 60.505 0 61.89 0c.898 0 1.778.329 2.339 1.229.524.834.524 2.237.524 3.247v6.561a.382.382 0 0 1-.385.328H62.36a.38.38 0 0 1-.357-.328V5.376c0-1.141.13-2.809-1.253-2.809-.487 0-.936.33-1.16.834-.281.636-.319 1.272-.319 1.975v5.614a.386.386 0 0 1-.39.375m-24.684.075a.41.41 0 0 1-.473.047c-.665-.56-.785-.82-1.149-1.354-1.1 1.136-1.879 1.477-3.304 1.477-1.687 0-3-1.055-3-3.166 0-1.65.882-2.77 2.138-3.32 1.087-.484 2.606-.572 3.769-.704v-.264c0-.484.037-1.055-.245-1.473-.243-.374-.712-.528-1.124-.528-.765 0-1.444.397-1.611 1.22-.035.183-.167.364-.348.374l-1.943-.214c-.164-.037-.346-.17-.299-.425C27.055.721 29.183 0 31.09 0c.975 0 2.25.263 3.018 1.011.975.924.881 2.155.881 3.497v3.165c0 .952.39 1.37.757 1.882.128.185.156.405-.007.54-.409.348-1.136.988-1.537 1.35l-.005-.005zm-2.02-4.953v-.44c-1.45 0-2.98.314-2.98 2.045 0 .88.45 1.473 1.218 1.473.562 0 1.069-.352 1.387-.923.394-.704.376-1.363.376-2.155zM7.926 11.44a.41.41 0 0 1-.473.047c-.667-.56-.786-.82-1.15-1.354C5.204 11.27 4.425 11.61 3 11.61c-1.688 0-3-1.055-3-3.166 0-1.65.88-2.77 2.137-3.32 1.087-.484 2.606-.572 3.768-.704v-.264c0-.484.038-1.055-.243-1.473-.244-.374-.713-.528-1.125-.528-.764 0-1.444.397-1.61 1.22-.036.183-.168.364-.35.374l-1.94-.214c-.165-.037-.347-.17-.3-.425C.783.721 2.911 0 4.818 0c.975 0 2.25.263 3.018 1.011.975.924.882 2.155.882 3.497v3.165c0 .952.39 1.37.756 1.882.128.185.157.405-.006.54a78.47 78.47 0 0 0-1.537 1.35l-.005-.005zm-2.02-4.953v-.44c-1.45 0-2.982.314-2.982 2.045 0 .88.45 1.473 1.219 1.473.562 0 1.069-.352 1.387-.923.394-.704.375-1.363.375-2.155z"})))},La={AmazonPayClassicButton:"md7D4"};function xa(){var e=(0,A.L)(),t=e.id,n=e.currencyCode,o=(0,Gt.b)(),i=(0,r.q)(),l=(0,rn.I)(),u=(0,ne.Lm)().value,s=(0,ne.NO)().value,c=(0,le.Jw)(),d=(0,Q.Lk)(),p=d.checkoutSessionIdentifier,f=d.type,m=(0,Te.GM)(),v=(0,C.Z)(m,2)[1],g=function(){var e=(0,ye.Z)((0,he.Z)().mark((function e(){return(0,he.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(tt.F.AmazonPayClassic),e.next=3,(0,Sa.xU)({logger:l,checkoutSessionIdentifier:p,sourceType:f,shopId:t,shopCurrency:n,buyerCurrency:null==u?void 0:u.presentmentCurrency,countryCode:null==u?void 0:u.countryCode,merchandiseLines:s,hasSellingPlan:c});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.default.createElement("button",{className:en()(La.AmazonPayClassicButton),lang:o,onClick:g,type:"button","aria-label":i("wallets.call_to_action",{walletName:i("brand.amazon_pay","Amazon Pay")},"Payer avec {{walletName}}")},a.default.createElement(Ia,null))}var Ma=n(91754),Za=n(93839),Ta=n(91508),za=n(875),Oa=n(42635),Na={Text:"bCAGz"};function Ra(){var e=(0,a.useState)(!1),t=(0,C.Z)(e,2),n=t[0],o=t[1],i=(0,r.q)(),l=(0,A.L)().merchantPolicies,u=null==l?void 0:l.find((function(e){return"subscription-policy"===e.handle})),s=a.default.createElement(p.x,{appearance:"subdued",size:"small"},i("payment.purchase_options_cancellation_policy_label","politique de résiliation")),c=u?a.default.createElement(f.r,{appearance:"monochrome",onPress:function(){return o(!0)}},s):s;return a.default.createElement(a.default.Fragment,null,a.default.createElement(p.x,{appearance:"subdued",size:"small"},a.default.createElement("div",{className:Na.Text},i("payment.purchase_options_agreement_label",{cancellation_policy_label:c},"Je comprends qu’un ou plusieurs articles de mon panier constituent un achat différé ou récurrent. En continuant, j’accepte la %{cancellation_policy_label} et vous autorise à facturer mon moyen de paiement aux prix, fréquences et dates indiqués sur cette page, jusqu’à ce que ma commande soit traitée ou que je l’annule, si cela est autorisé."))),u&&a.default.createElement(Oa.u_,{open:n,title:i("shop_policies.purchase_options_cancellation_policy","Politique de résiliation"),source:u.url,onClose:function(){return o(!1)},padding:!0}))}var Ba=function(){var e=(0,r.q)();return a.default.createElement(Oa.u_,{open:!0,blocking:!0,accessibilityLabel:e("wallets.payment_in_progress_title","Paiement en cours")},a.default.createElement(u.E,{spacing:"loose",padding:"large200"},a.default.createElement(l.X,{level:1},e("wallets.payment_in_progress_title","Paiement en cours")),a.default.createElement(p.x,null,e("wallets.payment_in_progress_body","Votre paiement est en cours de traitement. Votre commande sera bientôt terminée."))))};function qa(e){var t=e.open,n=e.setOpen,o=(0,r.q)();return a.default.createElement(Oa.u_,{open:t,onClose:function(){return n(!1)},title:o("payment.preview_not_available.title","Aperçu non disponible"),padding:!0},a.default.createElement(p.x,null,o("payment.preview_not_available.content","Ne vous inquiétez pas, ce paiement express fonctionne pour vos clients.")),a.default.createElement(ht.G,{inlineAlignment:"end"},a.default.createElement(s.z,{onPress:function(){return n(!1)}},o("payment.preview_not_available.button","OK"))))}var Fa=n(11901);function Da(){var e=(0,r.q)(),t=(0,Y.vQ)(),n=e("alternative_payment_method_banner.or","OU"),o=Et.bg.default(["large100","none","large300","none"]).when({viewportInlineSize:{min:"small"}},["large200","none"]),i=Et.bg.default(["large300","none","large300","none"]).when({viewportInlineSize:{min:"small"}},["large300","none","large300","none"]),l=t?o:i;return a.default.createElement(ht.G,{padding:l},a.default.createElement(Fa.i,null,a.default.createElement(et.a,{inlineAlignment:"center"},a.default.createElement(p.x,{appearance:"subdued"},n))))}var ja={Header:"UxvQ2",Text:"aHlIb",StackWrapper:"lAHfA",SkeletonWrapper:"zYzn1",ready:"mRGKh",ButtonWrapper:"A35vI",disableIframe:"_BCnl",Stack:"_19K_",ShopPayEmphasis:"lRMEA",DrawerLink:"TMCjZ",InnerDrawerLink:"yQLpY",ShowVenmo:"bVLl7",DrawerHideButtons:"ik0Ix",WithLargerButtonGaps:"DZzJ2"},Ga="express-checkout-wallets-wrapper";function Va(e){var t,n=e.buttonCount,o=e.venmoStatus,i=e.children,l=e.waitUntilLoaded,u=void 0===l||l,s=e.isInCheckoutEditorProfilePreview,c=e.withLargerButtonGaps,m=(0,Y.vQ)(),v=function(e){var t=(0,A.L)().shopPayEnabled,n=window.innerWidth;return n<=300?3:t&&n<=383?4:3===e&&!t&&n>=300&&n<383?3:5}(n),g=(0,a.useState)(!1),h=(0,C.Z)(g,2),y=h[0],b=h[1],E=(0,a.useState)(!1),_=(0,C.Z)(E,2),k=_[0],P=_[1],w=(0,a.useState)(!1),S=(0,C.Z)(w,2),I=S[0],L=S[1];(0,a.useEffect)((function(){b(n>=v)}),[n,v]),(0,a.useLayoutEffect)((function(){var e="not_eligible"!==(null==o?void 0:o.status)&&"rendered"===(null==o?void 0:o.status);P(e)}),[o]);var x=(0,r.q)(),M=(0,Za.wJ)(),Z=(0,Te.Qq)(),T=(0,C.Z)(Z,2),z=T[0],O=T[1],N=(0,za.e)(),R=(0,C.Z)(N,2)[1],B=(0,an.X)(),q=(0,C.Z)(B,1)[0],F=(0,Te.gc)(),D=!!u&&F,j=(0,le.Jw)(),V=(0,Rt.H)().walletPaymentMethods,H=(0,A.L)(),U=H.id,W=H.shopPayEnabled,Q=(0,xn.zk)(),X=(0,G.a)(),K=(0,on.Ij)();(0,on.W8)(V,n);var $=(0,a.useCallback)((function(e){var t=parseInt((0,J.Bp)(U),10),a=(0,on.OE)({state:on.RM.NascarDrawerOpen,shopId:t,nascarData:Object.assign(Object.assign({},e),{},{walletsRenderedCount:n}),paymentMethods:V});null==X||X.record(a)}),[U,X,n,V]),ee=(0,Ta.$)("failed"===(null==M?void 0:M.status)&&"payment"===M.failure.type&&m?null==M?void 0:M.failure:void 0);"failed"===(null==M?void 0:M.status)&&(z!==tt.F.ApplePay&&z!==tt.F.GooglePay&&z!==tt.F.FacebookPay||R(ee)),(0,a.useEffect)((function(){"failed"===(null==M?void 0:M.status)&&"payment"===M.failure.type&&Q()}),[M,null==M?void 0:M.status]),(0,a.useEffect)((function(){return function(){O(void 0),R(void 0)}}),[]);var te=x("alternative_payment_method_banner.express_checkout","Paiement express");return a.default.createElement(a.default.Fragment,null,a.default.createElement(ht.G,null,a.default.createElement("div",{className:ja.Container},a.default.createElement("div",{className:en()(ja.Header)},a.default.createElement("span",{className:ja.Text},a.default.createElement(p.x,{appearance:"subdued"},te))),a.default.createElement("div",{className:en()(ja.StackWrapper)},a.default.createElement(Ha,{ready:!D,hideWallets:y},(0,zt.Z)(Array(n).keys()).filter((function(e,t){return t<=3})).map((function(e){return a.default.createElement(Ma.O,{key:e})}))),a.default.createElement("div",{id:Ga,className:en()(ja.Stack,ja.ButtonWrapper,(t={},(0,Sn.Z)(t,ja.ready,!D),(0,Sn.Z)(t,ja.DrawerHideButtons,y),(0,Sn.Z)(t,ja.ShopPayEmphasis,W),(0,Sn.Z)(t,ja.ShowVenmo,k),(0,Sn.Z)(t,ja.WithLargerButtonGaps,c),(0,Sn.Z)(t,ja.disableIframe,s),t)),onClickCapture:function(e){var t,n;(null==(t=e.target)?void 0:t.id)!==Ea&&s&&(null==(n=e.target)?void 0:n.id)!==Ga&&(e.stopPropagation(),e.preventDefault(),L(!0))}},i),y&&a.default.createElement("div",{className:ja.DrawerLink},a.default.createElement(f.r,{onPress:function(){b(!1),$(K)}},a.default.createElement("div",{className:ja.InnerDrawerLink},a.default.createElement(p.x,null,x("alternative_payment_method_banner.show_more_options","Afficher plus d’options")),a.default.createElement(d.JO,{source:"chevronDown",display:"inline",size:"extraSmall"})))),j&&a.default.createElement(Ra,null))),a.default.createElement(Da,null)),s&&a.default.createElement(qa,{open:I,setOpen:L}),"payment_cancelled_while_processing"===(null==q?void 0:q.type)&&a.default.createElement(Ba,null))}function Ha(e){var t,n=e.children,r=e.ready,o=e.hideWallets,i=(0,a.useState)(!0),l=(0,C.Z)(i,2),u=l[0],s=l[1],c=(0,A.L)().shopPayEnabled;return u?a.default.createElement("div",{className:en()(ja.Stack,ja.SkeletonWrapper,(t={},(0,Sn.Z)(t,ja.ready,r),(0,Sn.Z)(t,ja.ShopPayEmphasis,c),(0,Sn.Z)(t,ja.DrawerHideButtons,o),t)),onTransitionEnd:function(){r&&s(!1)}},n):null}var Ua=function(e){return e};function Wa(){var e=(0,ue.m)("simulated"),t=(0,r.q)(),n=(0,Rt.H)().walletPaymentMethods,o=(0,qt._)(),i=o.buttonCount,l=o.venmoStatus,u=(0,Nt.M)(),s=n.some((function(e){return e.name===tt.F.PaypalExpress&&e.venmoEnabled})),c=(0,_e.wd)(),d=(0,Te.cI)(),f=(0,x.KO)(re.IW),m=(0,C.Z)(f,1)[0],v=n.some((function(e){return e.name===tt.F.ShopPay})),g=$t({enabled:d&&v}).needsLargerButtonGaps,h=(0,Mt.Lr)("Checkout::Dynamic::Render",Ot.M.Wallets1),y=!e&&!m,b=n.map((function(e){return a.default.createElement(Ja,{key:e.name,method:e,triggerProgression:c})}));if(u&&s){var _=a.default.createElement(ca.x,{fundingSource:"venmo",buttonColor:"blue",progressToNextStep:c});b=[].concat((0,zt.Z)(b),[_])}var k=d&&0!==n.length?a.default.createElement(a.default.Fragment,null,a.default.createElement(E._,{extensions:h,spacing:"large200",render:Ua}),h.length>0&&a.default.createElement(Bt.c,{spacing:"large200"}),a.default.createElement(Va,{buttonCount:i,venmoStatus:l,waitUntilLoaded:y,isInCheckoutEditorProfilePreview:m,withLargerButtonGaps:g},e&&a.default.createElement(ht.G,{padding:"large200",cornerRadius:"base",blockAlignment:"center",inlineAlignment:"center",minInlineSize:"fill",className:"QXKQS"},a.default.createElement(p.x,null,t("payment.simulated_checkout","Aperçu bientôt disponible"))),!e&&b)):null;return a.default.createElement(a.default.Fragment,null,k)}function Ja(e){var t=e.method,n=e.triggerProgression,r=(0,Te.CW)();switch(t.name){case tt.F.ApplePay:return a.default.createElement(ia,{supportedNetworks:t.supportedNetworks,color:r});case tt.F.PaypalExpress:return a.default.createElement(ca.x,{progressToNextStep:n});case tt.F.ShopPay:return a.default.createElement(_a,null);case tt.F.GooglePay:return a.default.createElement(sa,null);case tt.F.FacebookPay:return a.default.createElement(Ca,null);case tt.F.AmazonPayClassic:return a.default.createElement(xa,null);case Ft.P3.AmazonPay:return a.default.createElement(jt,null);default:return null}}var Qa=n(84987),Xa=n(47981),Ka=n(99034),$a=n(63238),Ya=n(25918),er=n(53621),tr=n(91809),nr=n(99796);function ar(){var e=(0,r.q)()("contact.delivery_option_title","Mode de livraison"),t=(0,We.cz)(),n=(0,Y.un)();return t?a.default.createElement(i.$,{accessibilityLabel:e},a.default.createElement(u.E,null,n?null:a.default.createElement(l.X,null,e),t)):null}var rr=n(39624),or=n(13731),ir=function(){var e=(0,Y.un)(),t=(0,or.m)(),n=!e&&!t,r=(0,A.L)().prefetchShippingRatesEnabled,o=(0,j.JL)().negotiate,i=$().capturePrefetch;return(0,a.useCallback)((function(){n&&r&&(i(U.Autocomplete),o(void 0,{include:["shippingAddress"],silenceValidations:!0,silenceViolations:["non-stock"],prefetch:!0}))}),[i,o,r,n])},lr=n(59572);function ur(e){var t=e.addressErrors,n=e.additionalFieldGroups,r=e.settings,o=e.addressSettings,i=(0,L.gG)().shippingAddress,l=(0,_e.LB)(),u=(0,C.Z)(l,1)[0],s=(0,rr.UU)(),c=ir();return a.default.createElement(lr.kS,{id:"shippingAddressForm",addressType:"shipping",addressErrors:t,address:i,countries:s,settings:r,additionalFieldGroups:n,loading:"loading"===u.status,onAddressAutoComplete:c,addressSettings:o})}var sr=n(76874),cr=n(9832),dr=n(11229),pr=n(9966),fr=n(1319),mr={timeout:8e3,enableHighAccuracy:!0};function vr(e){var t=e.onSuccess,n=e.onError,o=e.options,i=void 0===o?mr:o,l=(0,r.q)(),u=(0,pa.G)().textField.errorTypographyStyle,p=(0,a.useState)(!1),f=(0,C.Z)(p,2),m=f[0],v=f[1],g=(0,a.useState)(void 0),h=(0,C.Z)(g,2),y=h[0],b=h[1],E=l("pickup_point.geolocation.shared_location_button","Utiliser mon emplacement"),_=l("pickup_point.geolocation.errors.unsuported_by_browser","La géolocalisation n'est pas prise en charge par votre navigateur. Réessayez ou utilisez un autre navigateur."),k=l("pickup_point.geolocation.errors.permission_not_allowed","Autorisez le partage de votre emplacement."),P=l("pickup_point.geolocation.errors.permission_denied","Impossible d'obtenir votre emplacement. Veuillez réessayer."),w=function(e){v(!1),t(e)},S=function(e){v(!1),b(3===e.code?P:k),null==n||n(e)};function A(){return(A=(0,ye.Z)((0,he.Z)().mark((function e(){var t;return(0,he.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(void 0),v(!0),!navigator.permissions){e.next=9;break}return e.next=5,navigator.permissions.query({name:"geolocation"});case 5:"granted"===(t=e.sent).state||"prompt"===t.state?navigator.geolocation.getCurrentPosition(w,S,i):b(P),e.next=10;break;case 9:navigator.geolocation?navigator.geolocation.getCurrentPosition(w,S,i):b(_);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.default.createElement(a.default.Fragment,null,a.default.createElement(s.z,{inlineSize:"fill",kind:"secondary",onPress:function(){return A.apply(this,arguments)},loading:m},a.default.createElement(c.g,{blockAlignment:"center",spacing:"small400"},a.default.createElement(d.JO,{source:"geolocation"}),a.default.createElement(et.a,null,E))),y?a.default.createElement("span",{className:en()(u&&pr.Z[u])},a.default.createElement(fr.b,null,y)):null)}n(91038);var gr=n(43110),hr=n(1791),yr=n(20529),br=n(93328),Er=n(98390),_r=["address","onInput","onSelect","value","country","hiddenFields"];function kr(e){var t=e.address,n=(e.onInput,e.onSelect),r=e.value,o=e.country,i=e.hiddenFields,l=void 0===i?["firstName","lastName","company","zoneCode","countryCode","phone"]:i,u=(0,un.Z)(e,_r),s=(0,br.o)({addressType:u.addressType,countryCode:o.code,initialAddressQuery:t.coordinates?(0,hr.Tg)(t,o,l):r}),c=s.value,d=s.setValue;return a.default.createElement(Er.w,(0,ge.Z)({onSelect:function(e){d((0,hr.Tg)(e,o,l)),n&&n(e)},value:c,countryCode:o.code},u))}function Cr(e){var t=e.onSearch,n=e.loading,o=e.addressAutoFocus,i=e.addressSettings,l=(0,r.q)(),u=(0,be.Q)().geolocation,c=(0,rr.MF)(),d=c.shippingCountries,p=c.loading,f=(0,L.gG)().locationAddress,m=(0,x.xP)(),v=(0,a.useMemo)((function(){return(0,N.ej)({countryCode:void 0,address:void 0,zoneCode:void 0})}),[]),g=(0,M.a8)(f.fields.countryCode,v.countryCode),h=(0,M.a8)(f.fields.zoneCode,v.zoneCode),y=(0,M.a8)(f.fields.postalCode,v.address),b=(0,rr.J$)(g.value),E=b.details,_=b.loading,k=(0,a.useMemo)((function(){return null!=E?E:u.country}),[E,u.country]),P=(0,x.KO)(v.address),w=(0,C.Z)(P,1)[0],S=(0,a.useMemo)((function(){return null!=d&&d.length?d:[{value:k.code,label:k.name}]}),[d,k]),A=(0,ut.er)(),I=(0,a.useMemo)((function(){return null!=i?i:A}),[i,A]),Z=(0,a.useMemo)((function(){return(0,hr.mt)(k,I)}),[k,I]),T=_||p||n,z=!!g.value&&(0,yr.h0)(g.value),R=l("pickup_point.search_button","Rechercher"),B=l("contact.address1_label","Adresse"),q=(0,a.useState)(""),F=(0,C.Z)(q,2),D=F[0],j=F[1],G=(0,sr.v9)(f);!function(e,t,n){var a=(0,r.q)(),o=(0,x.xP)(),i=(0,rn.I)();(0,Ee.$u)((0,ye.Z)((0,he.Z)().mark((function r(){var l,u;return(0,he.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l=o.read(e).value,u=new Map,n||(0,M.Um)(l.postalCode)?l.coordinates||u.set("address",a("field_errors.address_address1_blank","Entrez une adresse")):u.set("address",a("field_errors.address_zip_blank","Entrez un code postal")),(0,M.Um)(l.countryCode)||u.set("countryCode",a("field_errors.address_country_blank","Sélectionner un pays/une région")),!u.size){r.next=7;break}return i.leaveBreadcrumb("Blocking address errors",{errors:Array.from(u).map((function(e){return(0,C.Z)(e,2)[1]}))}),r.abrupt("return",{behavior:"block",reason:Ze.VO.UnknownReason,perform:function(){for(var e,n=(0,O.Z)(u);!(e=n()).done;){var a=(0,C.Z)(e.value,2),r=a[0],i=a[1];o.write(t[r],i)}}});case 7:return r.abrupt("return",{behavior:"allow"});case 8:case"end":return r.stop()}}),r)}))))}(f,v,z);var V=k.zones,H=m.read(f).value,U=(0,a.useCallback)((function(){V.length||(H.zoneCode=void 0),t(H)}),[V,H,t]),W=(0,a.useMemo)((function(){return Z.some((function(e){return e.fields.includes("zoneCode")}))&&(null==V?void 0:V.length)>0}),[Z,V]);return a.default.createElement(ee.l,null,a.default.createElement(ee.T,null,a.default.createElement(gr.P,(0,ge.Z)({name:"countryCode",label:k.labels.country,options:S,required:!0,autocomplete:{group:"location",field:"country"},readonly:n},g,{onChange:function(e){j(""),G({countryCode:e})}})),W&&a.default.createElement(gr.P,(0,ge.Z)({name:"zone",label:k.labels.zone,placeholder:k.labels.zone,options:Pr(V),required:!0,autocomplete:{group:"location",field:"address-level1"},readonly:n},h,{onChange:function(e){j(""),G({zoneCode:e,countryCode:g.value})}}))),a.default.createElement(Ie.E,{columns:["fill","auto"]},z?a.default.createElement(kr,{autoFocus:o,address:H,error:w,country:k,name:"location address",label:B,onSelect:function(e){return G(e)},value:D,onInput:function(e){H.coordinates?G({zoneCode:h.value,countryCode:g.value}):j(e)},field:"address1"}):a.default.createElement(Ae.nv,(0,ge.Z)({autoFocus:o,name:"postalCode",label:k.labels.postalCode,required:!0,autocomplete:{group:"location",field:"postal-code"},readonly:n},y)),a.default.createElement(s.z,{disabled:Boolean(!H.coordinates&&D),onPress:U,loading:T},R)))}function Pr(e){return e.map((function(e){return{label:e.name,value:e.code}}))}n(34553);var wr=n(21261),Sr=n(48054),Ar=n(62108),Ir=(n(88690),n(60476),{Tabs:"qbjone6",TabList:"qbjone8 _1fragem19 _1fragem7",Tab:"qbjonea _1fragemah _1fragem19 _1fragem38 _1fragem4",TabPanel:"qbjonec",tabPanelBordered:"qbjoned",tabSelected:"qbjoneb"}),Lr=(0,Ar.Q)("Tabs"),xr=(0,a.createContext)(null);function Mr(e){var t=e.tabs,n=e.selected,r=e.ariaLabel,o=e.bordered,i=e.onChange,l=e.children,u=(0,Ar.M)(void 0,Lr),s=(0,a.useRef)(null),c=t.length-1,d=a.Children.count(l),p=(0,a.useCallback)((function(e){var t=n-1<0?c:n-1,a=n+1>c?0:n+1,r=new Map([["ArrowLeft",t],["Left",t],["ArrowRight",a],["Right",a],["Home",0],["End",c]]).get(e.key);null!=r&&(e.preventDefault(),i(r))}),[i,n,c]);(0,a.useEffect)((function(){var e=s.current;if(null!=e)return e.addEventListener("keydown",p,!1),function(){e.removeEventListener("keydown",p,!1)}}),[s,p]),(0,a.useEffect)((function(){d!==t.length&&console.warn("<Tabs /> has "+t.length+" tabs and "+d+" children. A mismatch will cause some content to be unavailable.")}),[d,t.length]);var f=[],m=[];a.Children.forEach(l,(function(e,r){var o=t[r];if(null!=o){var l="string"==typeof o?{label:o,icon:void 0}:o,s=l.label,c=l.icon;f.push(a.default.createElement(Zr,{key:s,label:s,icon:c,selected:n,onChange:i,id:u,index:r}))}m.push(a.default.createElement(Tr,{index:r},e))}));var v=(0,a.useMemo)((function(){return{id:u,selected:n,bordered:o}}),[u,n,o]);return a.default.createElement(xr.Provider,{value:v},a.default.createElement("div",{className:Ir.Tabs},a.default.createElement("div",{ref:s,role:"tablist","aria-label":r,className:Ir.TabList},f),m))}function Zr(e){var t=e.label,n=e.icon,r=e.index,o=e.selected,i=e.onChange,l=e.id;if(null==r)throw new wr.j("`index` is missing");var u=(0,a.useRef)(null),s=(0,a.useRef)(!1),p=o===r,f=null==n?t:a.default.createElement(c.g,{spacing:"small400",blockAlignment:"center"},a.default.createElement(d.JO,{source:n}),a.default.createElement("span",null,t)),m=(0,Sr.z)();return(0,a.useEffect)((function(){u.current&&p&&s.current?u.current.focus():s.current=!0}),[u,p]),a.default.createElement("button",{type:"button",role:"tab","aria-selected":p,id:l+"Tab"+r,"aria-controls":l+"TabPanel"+r,onClick:function(){return i(r)},className:en()(Ir.Tab,p&&Ir.tabSelected),ref:u,tabIndex:m?-1:void 0},f)}function Tr(e){var t=e.index,n=e.children,r=function(){var e=(0,a.useContext)(xr);if(null==e)throw new wr.j("No tabs found in context");return e}(),o=r.selected,i=r.id,l=r.bordered,u=o===t;return a.default.createElement("div",{role:"tabpanel",id:i+"TabPanel"+t,"aria-labelledby":i+"Tab"+t,hidden:!u,className:en()(Ir.TabPanel,l&&Ir.tabPanelBordered)},n)}var zr=n(21850),Or={colissimo:{mapLogo:n.p+"1e7271e4849a261ddaab.svg",fullLogo:n.p+"d369c28f6e488feb3e0e.svg",pin:n.p+"f40918fc61b5a04d4a7a.svg"},mondial_relay:{mapLogo:n.p+"4978e813462243e8b8d5.svg",fullLogo:n.p+"e36d79825c7c19fe161e.svg",pin:n.p+"9251f5243a4b210a5be0.svg"},chronopost:{mapLogo:n.p+"c4e55806e7bf639ac3c8.svg",fullLogo:n.p+"be400a0f65e8839494a9.svg",pin:n.p+"e7f47a364ae2db94c7bb.svg"}},Nr=n.p+"c0b02582b5a271ce4f3e.svg",Rr={PickupPointMap:"YG_zD"},Br=function(e){return e[e.ActiveMarker=1001]="ActiveMarker",e[e.BuyerMarker=1e3]="BuyerMarker",e[e.InactiveMarker=0]="InactiveMarker",e}(Br||{}),qr=[{horizontal:15,vertical:0},{horizontal:-15,vertical:0},{horizontal:0,vertical:-15},{horizontal:0,vertical:-15}],Fr=6378,Dr=.002;function jr(e){var t,n,r,o,i=e.onPickupPointSelect,l=(0,x.xP)(),u=(0,cr.p)(),s=u.pickupPoints,c=u.proposedPickupPoint,d=null==(t=l.read(c).value)?void 0:t.handle,p=(0,L.gG)().locationAddress,f=l.read(p.fields.coordinates).value,m=[],v=s.map((function(e,t){var n,a,r,o=e.pickupLocation,i=d===e.handle,l=i?(r=o.carrierCode,Or[r].pin):function(e){return Or[e].mapLogo}(o.carrierCode),u=i?{width:68,height:78}:{width:40,height:40},s={latitude:(null==(n=o.address.coordinates)?void 0:n.latitude)||0,longitude:(null==(a=o.address.coordinates)?void 0:a.longitude)||0},c=function(e,t){var n={latitude:0,longitude:0},a=t.filter((function(t){return Math.abs(t.latitude-e.latitude)<Dr&&Math.abs(t.longitude-e.longitude)<Dr})).length;if(0===a)return n;var r=Math.min(a,qr.length)-1,o=qr[r];return n.longitude=o.horizontal/1e3/Fr*(180/Math.PI)/Math.cos(e.latitude*Math.PI/180),n.latitude+=o.vertical/1e3/Fr*(180/Math.PI),n}(s,m);return m.push(s),{title:o.name,label:o.carrierName,blockInfoWindow:!0,position:{lat:s.latitude+c.latitude,lng:s.longitude+c.longitude},zIndex:i?Br.ActiveMarker:Br.InactiveMarker,image:l,style:u,id:e.handle,notInBounds:!i&&t>5,clusterable:!i}})),g={lat:null!=(n=null==f?void 0:f.latitude)?n:0,lng:null!=(r=null==f?void 0:f.longitude)?r:0};v.push({id:"buyer",image:Nr,notInBounds:!1,position:g,style:{width:36,height:36},blockInfoWindow:!0,clusterable:!1,zIndex:Br.BuyerMarker});var h={clustererOptions:{averageCenter:!0,clusterClass:"pickup_point_map__cluster",styles:{height:32,width:32,textColor:"#ffffff",textSize:16,textLineHeight:32,fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"}},mapOptions:{gestureHandling:"greedy",scrollwheel:!0,center:(null==(o=v.find((function(e){return e.id===d})))?void 0:o.position)||g,boundsPadding:0,panToCenter:!0,maxZoom:19,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#737373"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#f0f0f0"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#e6e6e6"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#d0ecd3"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{saturation:-100}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{saturation:-100}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{saturation:-100}]},{featureType:"transit",elementType:"labels.icon",stylers:[{saturation:-100},{lightness:15}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#d1e6f5"}]}]}};return a.default.createElement(zr.D,{className:Rr.PickupPointMap,markers:v,title:"Shopify HQ",mapId:"test_map_id",onMarkerSelect:i,options:h})}var Gr=n(18638),Vr=n(60691),Hr=n(40483),Ur={Rates:"wKsVx",RateEntry:"JtD_u",Carrier:"Axp5F",LocationName:"qqHQg",LocationAddress:"orOHC",carrierLogo:"DGH4r"};function Wr(e){var t=e.businessHours,n=(0,Gr.qM)(),o=(0,r.q)(),i=(0,be.Q)().geolocation,l=(0,a.useMemo)((function(){return(0,Vr.k8)(null==i?void 0:i.country.code)}),[i]),s=(0,Vr.Q5)(l),d={};s.forEach((function(e){d[Vr.Jc[e]]=t.filter((function(t){return t.day===Vr.Jc[e].toUpperCase()}))}));var f=[],m=[];return s.forEach((function(e){if(f.push(a.default.createElement(p.x,{key:Vr.Jc[e],appearance:"subdued",size:"small"},n(Vr.Jc[e].toLowerCase()),":")),0===d[Vr.Jc[e]].length)m.push(a.default.createElement(p.x,{appearance:"subdued",size:"small"},o("pickup_point.location_is_currently_closed","Fermé")));else{var t="";d[Vr.Jc[e]].forEach((function(e){t=t+(""===t?"":", ")+e.openingTime+" - "+e.closingTime})),m.push(a.default.createElement(p.x,{appearance:"subdued",size:"small"},t))}})),a.default.createElement(u.E,{spacing:"small400"},a.default.createElement(et.a,null,o("pickup_point.business_hours","Heures d'ouverture")),a.default.createElement(c.g,null,a.default.createElement(u.E,{spacing:"none"},f),a.default.createElement(u.E,{spacing:"none"},m)))}function Jr(e){var t,n,r=e.pickupPoint,o=e.displayExtraDetails,i=(0,Hr.n)(),l=r.pickupLocation,s=(0,sr.Bn)(l.address,{hiddenFields:["countryCode"]});return a.default.createElement(u.E,{spacing:"small200"},a.default.createElement(Ye.T,{spacing:"small400",columns:["75%","25%"]},a.default.createElement(u.E,{spacing:"none"},a.default.createElement(et.a,null,a.default.createElement("span",{className:Ur.LocationName},null==(t=l.name)?void 0:t.toLowerCase())),a.default.createElement(et.a,{appearance:"subdued",size:"small"},a.default.createElement("span",{className:Ur.LocationAddress},null==s?void 0:s.toLowerCase()))),a.default.createElement(u.E,{spacing:"none"},a.default.createElement(et.a,{emphasis:"bold",inlineAlignment:"end"},i(r.cost.amount,{form:"short",currency:r.cost.currencyCode})))),a.default.createElement("div",{className:Ur.Carrier},l.carrierCode&&a.default.createElement("div",{className:Ur.carrierLogo},a.default.createElement("img",{src:(n=l.carrierCode,Or[n].fullLogo),alt:l.carrierName,height:"24"}))),o&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Wr,{businessHours:l.businessHours})))}var Qr={Paginator:"qA_tR",PaginatorCaption:"SzkIc",Button:"tYVCC"};function Xr(e){var t=e.page,n=e.pageCount,o=e.currentPageLabel,i=e.onPageChange,l=e.firstPage,u=void 0===l?1:l,c=(0,r.q)(),p=(0,a.useCallback)((function(e){return function(){i(t+e)}}),[t,i]),f=t<=u,m=t>=n+u-1;return a.default.createElement("div",{className:Qr.Paginator},a.default.createElement("div",{className:Qr.Button},a.default.createElement(s.z,{onPress:p(-1),disabled:f,kind:"plain",inlineSize:"fill"},a.default.createElement(d.JO,{source:"arrowLeft",appearance:f?"subdued":void 0,accessibilityLabel:c("pickup_point.paginator.next_accessibility_label","Page suivante")}))),a.default.createElement("div",{className:Qr.PaginatorCaption},a.default.createElement(et.a,null,o)),a.default.createElement("div",{className:Qr.Button},a.default.createElement(s.z,{onPress:p(1),disabled:m,kind:"plain",inlineSize:"fill"},a.default.createElement(d.JO,{source:"arrowRight",appearance:m?"subdued":void 0,accessibilityLabel:c("pickup_point.paginator.previous_accessibility_label","Page précédente")}))))}var Kr={HeaderCaption:"Q7qtX"};function $r(e){var t,n=e.pickupPoints,o=e.index,i=(0,r.q)(),l=(0,x.xP)(),u=(0,cr.p)(),s=u.proposedPickupPoint,c=u.setProposedPickupPoint,d=(0,a.useState)(""),p=(0,C.Z)(d,2)[1],f=(0,a.useCallback)((function(e){c({pickupPointHandle:e[0]}),p(e[0])}),[c,p]),m=null==(t=l.read(s).value)?void 0:t.handle,v=(0,a.useCallback)((function(e){var t=n.findIndex((function(t){return t.handle===e}));return Math.floor(t/6)+1}),[n]),g=(0,a.useState)(m?v(m):1),h=(0,C.Z)(g,2),y=h[0],b=h[1],E=(0,a.useCallback)((function(e){b(e)}),[]),_=(0,a.useMemo)((function(){return n.slice(6*(y-1),6*y)}),[n,y,6]),k=Math.ceil(n.length/6),P=6*(y-1)+1,w=Math.min(6*y,n.length);(0,a.useEffect)((function(){m&&b(v(m))}),[m,v,o]);var S=0===n.length?i("pickup_point.no_pickup_points_found","Aucun point relais trouvé"):i("pickup_point.paginator.header",{first:P,last:w,count:n.length},{one:"Affichage de %{first} – %{last} point sur %{count}",other:"Affichage de %{first} – %{last} points sur %{count}",many:"Affichage de %{first} – %{last} points sur %{count}"}),A=0===n.length?i("pickup_point.no_pickup_points_found","Aucun point relais trouvé"):i("pickup_point.paginator.selected_page",{first:P,last:w,count:n.length},{one:"%{first} - %{last} de %{count} point",other:"%{first} - %{last} de %{count} points",many:"%{first} - %{last} de %{count} points"});return a.default.createElement(Ke.X,{id:"pickup-points-option-list",selectedItems:m?[m]:[],onChange:f},a.default.createElement("div",{className:Kr.HeaderCaption},a.default.createElement(et.a,null,S)),_.map((function(e){return a.default.createElement($e.Wx,{key:e.handle,id:e.handle,label:e.pickupLocation.name||""},a.default.createElement(Jr,{pickupPoint:e,displayExtraDetails:e.handle===m}))})),a.default.createElement(Xr,{page:y,pageCount:k,currentPageLabel:A,onPageChange:E}))}var Yr={PickupPointSelectorBlock:"or2tk",PickupPointSelectorInnerBlock:"qZnfb"};function eo(e){var t=e.negotiating,n=(0,r.q)(),o=(0,a.useState)(0),i=(0,C.Z)(o,2),l=i[0],u=i[1],s=(0,x.xP)(),c=(0,a.useState)(null),d=(0,C.Z)(c,2)[1],p=(0,cr.p)(),f=p.proposedPickupPoint,m=p.pickupPoints,v=p.setProposedPickupPoint,g=(0,a.useCallback)((function(e){var t;v({pickupPoint:m[e-1]}),d(null==(t=m[e-1])?void 0:t.handle)}),[v,m]),h=(0,a.useCallback)((function(e){v({pickupPointHandle:e}),d(e)}),[v,d]),y=s.read(f).value,b=(0,a.useMemo)((function(){return m.findIndex((function(e){return e.handle===(null==y?void 0:y.handle)}))+1}),[m,null==y?void 0:y.handle]);if(t)return a.default.createElement(dr.t,{text:n("pickup_point.waiting_on_pickup_point_location_notice","Recherche de points relais en cours...")});var E=0===m.length?n("pickup_point.no_pickup_points_found","Aucun point relais trouvé"):n("pickup_point.paginator.selected_pickup_point_label",{pickup_point_index:b,count:m.length},{one:"%{pickup_point_index} de %{count} point",other:"%{pickup_point_index} de %{count} points",many:"%{pickup_point_index} de %{count} points"});return a.default.createElement(Mr,{tabs:[{label:n("pickup_point.selector_tab_map","Carte"),icon:"map"},{label:n("pickup_point.selector_tab_list","Liste"),icon:"list"}],selected:l,onChange:u,ariaLabel:n("pickup_point.selector_tabs","Sélecteur de point relais")},a.default.createElement("div",{className:Yr.PickupPointSelectorBlock},a.default.createElement(jr,{onPickupPointSelect:h}),y&&a.default.createElement("div",{className:Yr.PickupPointSelectorInnerBlock},a.default.createElement(Jr,{pickupPoint:y,displayExtraDetails:!0})),a.default.createElement(Xr,{page:b,pageCount:m.length,currentPageLabel:E,onPageChange:g})),a.default.createElement(a.default.Fragment,null,a.default.createElement($r,{pickupPoints:m,index:l})))}function to(){var e=(0,r.q)(),t=(0,be.Q)().geolocation,n=(0,a.useRef)(!1),o=e("pickup_point.title","Point relais"),s=e("pickup_point.or","ou"),c=(0,a.useState)(1),d=(0,C.Z)(c,2),p=d[0],m=d[1],v=(0,a.useState)(!1),g=(0,C.Z)(v,2),h=g[0],y=g[1],b=(0,L.gG)().locationAddress,_=(0,x.xP)().read(b).value,k=(0,sr.v9)(b),P=(0,j.JL)().negotiate,w=(0,cr.p)(),S=w.pickupPoints,A=w.setProposedPickupPoint,I=(0,a.useState)(!0),M=(0,C.Z)(I,2),Z=M[0],T=M[1],z=(0,a.useState)(),O=(0,C.Z)(z,2),N=O[0],R=O[1],B=(0,Mt.Lr)("Checkout::PickupPoints::RenderBefore"),q=(0,Mt.Lr)("Checkout::PickupPoints::RenderAfter"),F=(0,a.useCallback)((function(e){R((function(t){return t===e?void 0:t}))}),[R]);(0,a.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[]);var D=(0,a.useState)(!1),G=(0,C.Z)(D,2),V=G[0],H=G[1],U=(0,a.useCallback)((function(){T(!1),H(!0),P(void 0,{include:["deliveryLines"],fieldsToResolve:["deliveryNext"],silenceViolations:["delivery-method"],onComplete:function(t){switch(t.status){case"success":case"error":if(n.current){H(!1);var a=e("pickup_point.no_pickup_points_near_you","Aucun point relais trouvé près de l'adresse sélectionnée");if(t.negotiated.deliveryNext)switch(t.negotiated.deliveryNext.status){case"filled":t.negotiated.deliveryNext.lines.length>0?(m(2),F(a)):(R(a),m(1));break;case"unavailable":R(a),m(1);break;default:(0,Yn.vE)(t.negotiated.deliveryNext)}}break;case"invalid":case"stale":case"denied":case"throttled":case"alreadyCompleted":break;default:(0,Yn.vE)(t)}}})}),[P,F,R,e]);(0,a.useEffect)((function(){_.coordinates&&_.countryCode&&Z&&(S&&S.length>0?m(2):U())}),[m,_,U,S,Z]);var W=(0,a.useCallback)((function(e){var n;k({zoneCode:null==(n=t.zone)?void 0:n.code,countryCode:t.country.code,coordinates:{latitude:e.coords.latitude,longitude:e.coords.longitude}}),U()}),[t,k,U]),J=(0,a.useCallback)((function(t){k({zoneCode:t.zoneCode,countryCode:t.countryCode,coordinates:t.coordinates});var n=e("pickup_point.could_not_resolve_address","Votre adresse n'a pas pu être localisée. Réessayez ou utilisez une autre adresse.");t.coordinates?(U(),F(n)):R(n)}),[k,U,F,e]);no(S.length>0);var Q=0===S.length?e("pickup_point.no_pickup_points_near_location","Aucun point relais trouvé près de votre emplacement"):e("pickup_point.number_of_pickup_points_near_location",{count:S.length},{one:"%{count} point relais trouvé près de votre emplacement",other:"%{count} points relais trouvés près de votre emplacement",many:"%{count} points relais trouvés près de votre emplacement"});return a.default.createElement(i.$,{accessibilityLabel:o},a.default.createElement(u.E,null,a.default.createElement(l.X,null,o),a.default.createElement(E._,{extensions:B,options:{locationFormVisible:1===p}}),1===p&&!V&&a.default.createElement(a.default.Fragment,null,a.default.createElement(vr,{onSuccess:W}),a.default.createElement(et.a,{inlineAlignment:"center",appearance:"subdued"},s),a.default.createElement(Cr,{loading:!1,onSearch:J,addressAutoFocus:h}),N?a.default.createElement(Xe.j,{status:"warning",title:N}):null),2===p&&!V&&a.default.createElement(a.default.Fragment,null,a.default.createElement(et.a,null,Q," ",a.default.createElement(f.r,{onPress:function(){m(1),y(!0),k({zoneCode:_.zoneCode,countryCode:_.countryCode,coordinates:void 0}),A({pickupPoint:void 0})}},e("pickup_point.change","Modifier"))),a.default.createElement(eo,{negotiating:V})),V&&a.default.createElement(dr.t,{text:e("pickup_point.waiting_on_pickup_point_location_notice","Recherche de points relais en cours...")}),a.default.createElement(E._,{extensions:q,options:{locationFormVisible:1===p}})))}function no(e){var t=(0,rn.I)();(0,Ee.$u)((0,ye.Z)((0,he.Z)().mark((function n(a){return(0,he.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("negotiation"!==a.reason){n.next=3;break}return n.abrupt("return",{behavior:"allow"});case 3:if(e){n.next=6;break}return t.leaveBreadcrumb("Pickup point not selected"),n.abrupt("return",{behavior:"block",reason:Ze.VO.UnknownReason,perform:function(){}});case 6:return n.abrupt("return",{behavior:"allow"});case 7:case"end":return n.stop()}}),n)}))))}var ao=n(30176),ro=n(61507),oo=n(46773),io=n(59900),lo=n(25781);function uo(e){var t=e.titleHidden,n=void 0!==t&&t,o=(0,r.q)();return a.default.createElement(a.default.Fragment,null,n?null:a.default.createElement(lo.N,{size:"small",inlineSize:"large"},o("shipping.waiting_on_pickup_location_notice","Obtenir des emplacements de récupération disponibles…")),a.default.createElement(Ke.X,{id:"skeleton-loading",title:n?o("shipping.waiting_on_pickup_location_notice","Obtenir des emplacements de récupération disponibles…"):"",titleHidden:n,onChange:function(){},selectedItems:[],loading:!0},[1,2].map((function(e){return a.default.createElement($e.Wx,{disabled:!0,id:""+e,key:e},a.default.createElement($e.Hj,null,a.default.createElement(u.E,{spacing:"none"},a.default.createElement(lo.N,{inlineSize:"small"}),a.default.createElement(lo.N,{inlineSize:"base"}))),a.default.createElement($e.LB,null,a.default.createElement(u.E,{spacing:"none",inlineAlignment:"end"},a.default.createElement(lo.N,{inlineSize:"small"}),a.default.createElement(lo.N,{inlineSize:"base"}))))}))))}function so(e){var t=e.onSearch,n=e.searchOnSelect,o=(0,r.q)(),i=(0,be.Q)().geolocation,l=(0,rr.MF)(),u=l.shippingCountries,c=l.loading,d=(0,x.xP)(),p=d.read((0,L.gG)().locationAddress).value,f=(0,x.yc)((function(){return(0,hr.LN)(p.address1?p:{countryCode:i.country.code})})),m=(0,a.useMemo)((function(){return(0,N.ej)({countryCode:void 0,address:void 0})}),[]),v=(0,M.a8)(f.fields.countryCode,m.countryCode),g=(0,M.a8)(f.fields.postalCode,m.address),h=(0,rr.J$)(v.value),y=h.details,b=h.loading,E=(0,a.useMemo)((function(){return null!=y?y:i.country}),[y,i.country]),_=(0,x.KO)(m.address),k=(0,C.Z)(_,1)[0],P=(0,a.useMemo)((function(){return null!=u&&u.length?u:[{value:E.code,label:E.name}]}),[u,E]),w=(0,a.useCallback)((function(e){return(0,hr.Tg)(e,E,["company","firstName","lastName","phone","countryCode","zoneCode"])}),[E]),S=E.zones,A=d.read(f).value,I=(0,a.useState)(w(A)),Z=(0,C.Z)(I,2),T=Z[0],z=Z[1],R=(0,a.useState)(void 0),B=(0,C.Z)(R,2),q=B[0],F=B[1],D=b||c,j=!!v.value&&(0,yr.h0)(v.value);!function(e,t,n){var a=(0,r.q)(),o=(0,x.xP)(),i=(0,rn.I)();(0,Ee.$u)((0,ye.Z)((0,he.Z)().mark((function r(){var l,u;return(0,he.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l=o.read(e).value,u=new Map,n||(0,M.Um)(l.postalCode)?l.coordinates||u.set("address",a("field_errors.address_address1_blank","Entrez une adresse")):u.set("address",a("field_errors.address_zip_blank","Entrez un code postal")),(0,M.Um)(l.countryCode)||u.set("countryCode",a("field_errors.address_country_blank","Sélectionner un pays/une région")),!u.size){r.next=7;break}return i.leaveBreadcrumb("Blocking address errors",{errors:Array.from(u).map((function(e){return(0,C.Z)(e,2)[1]}))}),r.abrupt("return",{behavior:"block",reason:Ze.VO.UnknownReason,perform:function(){for(var e,n=(0,O.Z)(u);!(e=n()).done;){var a=(0,C.Z)(e.value,2),r=a[0],i=a[1];o.write(t[r],i)}}});case 7:return r.abrupt("return",{behavior:"allow"});case 8:case"end":return r.stop()}}),r)}))))}(f,m,j);var G=(0,sr.v9)(f),V=function(e){void 0===e&&(e=A),e.coordinates?(S.length||(e.zoneCode=void 0),F(""),t(e)):F(o("local_pickup.could_not_resolve_address","Votre adresse n’a pas pu être localisée. Réessayez ou utilisez une autre adresse"))},H=n?{source:"magnify",position:"end"}:void 0,U=j&&n,W=U?null:a.default.createElement(s.z,{disabled:Boolean(!A.coordinates||!T.length),onPress:V,loading:D},o("local_pickup.search_button","Trouver des boutiques")),J=U?["fill"]:["fill","auto"];return a.default.createElement(ee.l,null,a.default.createElement(ee.T,null,a.default.createElement(gr.P,(0,ge.Z)({name:"countryCode",label:E.labels.country,options:P,required:!0,autocomplete:{group:"location",field:"country"},readonly:D},v,{onChange:function(e){F(""),z(""),G({countryCode:e}),v.onChange(e)}}))),a.default.createElement(Ie.E,{columns:J},j?a.default.createElement(Er.w,{error:k||q,countryCode:E.code,name:"location address",label:o("contact.address1_label","Adresse"),onSelect:function(e){G(e),z(w(e)),n&&V(e)},value:T,onInput:function(e){A.coordinates?G({countryCode:v.value}):z(e)},field:"address1",icon:H}):a.default.createElement(Ae.nv,(0,ge.Z)({name:"postalCode",label:E.labels.postalCode,required:!0,autocomplete:{group:"location",field:"postal-code"},readonly:D},g,{error:g.error||q,icon:H})),W))}function co(e){var t=e.locationFormVisible,n=e.toggleLocationFormVisibility,r=e.children,o=e.onLocationChange;return(0,Qe.a)()?a.default.createElement(a.default.Fragment,null,r,a.default.createElement(po,{open:t,onModalClose:function(){return n(!1)},onLocationChange:o})):t?a.default.createElement(fo,{onLocationChange:o}):r}function po(e){var t=e.open,n=e.onModalClose,o=e.onLocationChange,i=(0,r.q)();return a.default.createElement(Oa.u_,{padding:!0,title:i("local_pickup.toggle_location","Modifier mon emplacement"),open:t,onClose:n,maxInlineSize:400},a.default.createElement(fo,{onLocationChange:o,changeLocationOnSelect:!0}),a.default.createElement(ht.G,{minBlockSize:Et.bg.default(320).when({viewportInlineSize:{min:"small"}},120)}),a.default.createElement(s.z,{onPress:n,inlineSize:"fill",kind:"plain",size:"extraLarge"},i("local_pickup.cancel","Annuler")))}var fo=function(e){var t=e.onLocationChange,n=e.changeLocationOnSelect,o=e.hideFormOnGeoCoordinatesShare,i=(0,be.Q)().geolocation,l=(0,L.gG)().locationAddress,c=(0,sr.v9)(l),d=(0,r.q)(),f=(0,a.useState)(!0),m=(0,C.Z)(f,2),v=m[0],g=m[1];return a.default.createElement(u.E,null,a.default.createElement(vr,{onSuccess:function(e){var n;o&&g(!1),c({zoneCode:null==(n=i.zone)?void 0:n.code,countryCode:i.country.code,coordinates:{latitude:e.coords.latitude,longitude:e.coords.longitude}}),t(e)}}),v?a.default.createElement(u.E,null,a.default.createElement(Ye.T,{blockAlignment:"center",columns:["fill","auto","fill"]},a.default.createElement(Fa.i,{direction:"inline"}),a.default.createElement(ht.G,{padding:["none","base"]},a.default.createElement(p.x,{appearance:"subdued"},d("local_pickup.or","OU"))),a.default.createElement(Fa.i,{direction:"inline"})),a.default.createElement(so,{searchOnSelect:n,onSearch:function(e){c(e),t(e)}})):a.default.createElement(s.z,{inlineAlignment:"start",kind:"plain",onPress:function(){return g(!0)}},d("shipping.local_pickup.search_address","Rechercher l’adresse")))};n(40561),n(30541);var mo=5;var vo=function(e){return e.Kilometers="KILOMETERS",e.Miles="MILES",e}({});function go(){var e=(0,r.q)(),t=(0,le.MW)(),n=e("delivery_options.pick_up_locations","Centres de retrait"),o=t&&a.default.createElement(et.a,null,e("delivery_options.subscription_pickup_information","Ce mode de livraison sera appliqué à tous les articles de cette commande ainsi qu'à toutes les futures commandes de cet abonnement."));return a.default.createElement(i.$,{accessibilityLabel:n},a.default.createElement(u.E,null,a.default.createElement(l.X,{level:2},n),o,a.default.createElement(ho,null)))}function ho(){var e=(0,r.q)(),t=(0,ne.j2)().value,n=(0,We.HD)().negotiating,o=(0,le.aJ)(),i=(0,Qe.a)(),l=(0,oe.w)(ie.Ei),c=a.default.createElement(uo,null),d=(0,a.useState)(!1),p=(0,C.Z)(d,2),f=p[0],m=p[1],v=(0,ao.O)(!1),g=v.setFalse,h=v.toggle,y=v.value,b=(0,L.gG)().locationAddress,_=(0,x.Dv)(b),k=(0,sr.Bn)(_)||"",P=(0,j.JL)().negotiate,w=(0,ro.Vt)({base:!0,medium:!1}),S=(0,Mt.Lr)("Checkout::PickupLocations::RenderBefore"),A=(0,Mt.Lr)("Checkout::PickupLocations::RenderAfter");if(n||f)return c;if(o){var I,M,Z=o.methods,T=o.type,z=a.default.createElement(et.a,{appearance:"subdued"},e("local_pickup.location_information",{count:Z.length,address:_.address1?k:e("local_pickup.your_location","votre emplacement")},{one:"Il y a %{count} boutique avec le produit en stock près de %{address}",other:"Il y a %{count} boutiques avec le produit en stock près de %{address}",many:"Il y a %{count} boutiques avec le produit en stock près de %{address}"})),O=null!==(null==(I=Z[0])||null==(M=I.pickupLocation)?void 0:M.distanceFromBuyer),N=(i||l)&&O&&Z.length>5?a.default.createElement(s.z,{kind:"plain",onPress:h},y?e("local_pickup.cancel","Annuler"):e("local_pickup.toggle_location","Modifier mon emplacement")):null;return a.default.createElement(u.E,null,a.default.createElement(E._,{extensions:S,options:{locationFormVisible:y}}),(z||N)&&a.default.createElement(oo.rj,{spacing:w?void 0:"large500",columns:w?["fill"]:["fill","auto"],inlineAlignment:"start",blockAlignment:"start",rows:"auto"},z,N),a.default.createElement(co,{locationFormVisible:y,toggleLocationFormVisibility:g,onLocationChange:function(){m(!0),g(),P(void 0,{include:["deliveryLines"],fieldsToResolve:["deliveryNext"],silenceViolations:["delivery-method"],onComplete:function(){m(!1)}})}},a.default.createElement(Eo,{methods:Z,type:T})),a.default.createElement(E._,{extensions:A,options:{locationFormVisible:y}}))}return"unavailable"===(null==t?void 0:t.status)&&null!=t&&t.hasNoDeliveryMethods?a.default.createElement(a.default.Fragment,null,a.default.createElement(Xe.j,{status:"critical"},e("order_summary.no_pickup_location","Le retrait n’est pas disponible pour cette commande. Veuillez choisir un autre mode de livraison.")),a.default.createElement(yo,null)):c}function yo(){return(0,j.n4)({active:!0}),null}function bo(e){var t=e.instructions;return a.default.createElement(ht.G,{maxInlineSize:200},a.default.createElement(et.a,{appearance:"subdued",size:"small"},t))}function Eo(e){var t=e.methods,n=e.type,o=(0,r.q)(),i=(0,Gt.b)(),l=(0,Hr.n)(),c=(0,j.JL)().negotiate,d=(0,le.yx)(),f=(0,ro.Vt)({base:!0,medium:!1}),m=(0,He.G2)(n),v=(0,C.Z)(m,2),g=v[0],h=v[1],y=function(e,t){var n=(0,a.useMemo)((function(){if(e.length<=mo)return e;var n=e.findIndex((function(e){return e.handle===t}));if(n>=mo){var a=(0,zt.Z)(e);return a.splice(n,1),a.unshift(e[n]),a}return e}),[e,t]),r=function(e){var t,n,a=e||{},r=a.selectedDeliveryMethodHandle,o=a.methods,i=void 0===o?[]:o,l=(0,G.a)(),u=(0,Q.Lk)(),s=(0,A.L)().id,c=(0,Qe.a)(),d=(0,ne.Zo)(),p=function(e){return e.handle===r},f=null==(t=i.find(p))||null==(n=t.originLocation)?void 0:n.id,m=i.findIndex(p);return function(e){return void 0===e&&(e="checkout_pickup_change_buyer_location"),l.record({schemaId:"local_pickup_checkout/3.1",payload:{eventType:e,checkoutToken:u.checkoutSessionIdentifier||"",shopId:parseInt((0,J.Bp)(s),10),locationId:f&&(0,J.Bp)(f),selectedLocationRank:m,userId:null!=d&&d.id?parseInt((0,J.Bp)(d.id),10):void 0,numberLocationsFound:i.length||0,checkoutSurface:c?"shop_pay":"guest_checkout"}})}}({methods:e,selectedDeliveryMethodHandle:t}),o=(0,a.useState)(n.slice(0,mo)),i=(0,C.Z)(o,2),l=i[0],u=i[1],s=n.length-l.length,c=l.length>=n.length;return{revealedMethods:l,amountLeft:s,allRevealed:c,revealMore:function(){if(!c){var e=n.slice(0,l.length+mo);u(e),r("checkout_pickup_buyer_reveal_more")}}}}(t,g),b=y.revealedMethods,E=y.amountLeft,_=y.allRevealed,k=y.revealMore,P=(0,He.FV)(t,n),w=P.setInverseGroupDeliveryMethodHandle,S=P.getInverseGroupDeliveryMethodHandle,I=(0,Qe.a)(),L=(0,a.useCallback)((function(e){var t=(0,C.Z)(e,1)[0];if(h(t),d){var n=S(t);w(n)}c(void 0,{include:["deliveryLines","merchandiseLines"]})}),[d,h,S,w,c]),x=(0,pa.G)().optionList.typographyStyle,M=null==x;return a.default.createElement(u.E,null,a.default.createElement(Ke.X,{id:"local_pickup_methods",title:"",titleHidden:!0,selectedItems:g?[g]:[],onChange:L,controlHidden:!I&&1===b.length},b.map((function(e){var t=e.handle,n=e.cost,r=n.amount,u=n.currencyCode,s=e.pickupLocation,c=s.address,d=s.instructions,m=s.name,v=s.distanceFromBuyer,g=function(e,t){return 0===e?o("shipping.free_rate_label","Gratuit"):l(e,{currency:t})}(r,u),h=function(e,t){var n=e||"";if(t){var r="("+function(e,t){var n=t&&(t.unit===vo.Miles?"mi":"km");return[t&&t.value.toLocaleString(e,{minimumFractionDigits:0,maximumFractionDigits:1}),n].join(" ").trim()}(i,t)+")";n=a.default.createElement(a.default.Fragment,null,e," ",a.default.createElement(p.x,{appearance:"subdued"},r))}return n}(m,v),y=d&&(I||f),b=d&&!I&&!f;return a.default.createElement($e.Wx,{id:t,key:t,label:m},a.default.createElement($e.Hj,null,a.default.createElement(et.a,{style:x},h),a.default.createElement(et.a,{appearance:"subdued"},a.default.createElement(io.k,{address:c,textSize:"small",hiddenFields:["postalCode","countryCode","phone"]})),y&&a.default.createElement(bo,{instructions:d})),a.default.createElement("div",{style:{textAlign:"right"}},a.default.createElement($e.LB,null,a.default.createElement(p.x,{emphasis:M?"bold":void 0,style:x},g),b&&a.default.createElement(bo,{instructions:d}))))}))),!_&&a.default.createElement(ht.G,{inlineAlignment:"end"},a.default.createElement(s.z,{inlineAlignment:"end",kind:"plain",onPress:k},o("local_pickup.reveal_more_label",{count:E},{one:"Voir %{count} emplacement de plus",other:"Voir %{count} emplacements de plus",many:"Voir %{count} emplacements de plus"}))))}var _o=n(77962),ko=n(21899),Co="business_customer_shipping_address_selector",Po="existing_shipping_address",wo="custom_shipping_address";function So(e){var t=e.existingShippingAddress,n=e.addressErrors,o=e.addressSettings,l=(0,r.q)(),s=(0,x.xP)(),c=(0,L.gG)().shippingAddress,d=(0,j.JL)().negotiate,p=(0,j.cn)().currentStep,f=(0,sr.kO)(n).resetAddressErrors,m=(0,a.useState)(!1),v=(0,C.Z)(m,2),g=v[0],h=v[1],y=(0,hr.RD)(s.read(c).value,t),b=(0,a.useState)(y?Po:wo),E=(0,C.Z)(b,2),_=E[0],k=E[1],P=(0,a.useCallback)((0,ye.Z)((0,he.Z)().mark((function e(n){var a,r;return(0,he.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,C.Z)(n,1),r=a[0],k(r),h(!0),r===wo?s.write(c,ko.O9):s.write(c,t),e.next=6,d(p,{progression:!1,fieldsToResolve:["merchandiseLines","deliveryNext"],onComplete:function(){f(),h(!1)}});case 6:case"end":return e.stop()}}),e)}))),[p,t,d,c,f,s]);return(0,j.n4)({active:g}),a.default.createElement(i.$,null,a.default.createElement(u.E,null,a.default.createElement(Ke.X,{id:Co,selectedItems:[_],onChange:P},a.default.createElement($e.Wx,{id:Po},a.default.createElement($e.Hj,null,a.default.createElement(et.a,{emphasis:"bold"},a.default.createElement(io.k,{hiddenFields:["address2","phone","company","city","postalCode","zoneCode","countryCode","firstName","lastName"],address:t})),a.default.createElement(et.a,{appearance:"subdued"},a.default.createElement(io.k,{textSize:"small",hiddenFields:["phone","company","address1","firstName","lastName"],address:t})),a.default.createElement(et.a,{appearance:"subdued"},a.default.createElement(io.k,{textSize:"small",hiddenFields:["address2","phone","company","city","postalCode","zoneCode","countryCode","phone","company","address1"],address:t})))),a.default.createElement($e.Wx,{id:wo,details:a.default.createElement(yt.w,{controlledBy:wo},a.default.createElement(ur,{addressErrors:n,addressSettings:o}))},a.default.createElement($e.Hj,null,a.default.createElement(et.a,{emphasis:"bold"},l("contact.different_shipping_address_label","Expédier vers une adresse différente")),a.default.createElement(et.a,{appearance:"subdued"},l("contact.different_shipping_address_text","Utiliser une adresse unique pour cette commande")))))))}function Ao(){var e=(0,We.cz)(),t=(0,Mt.Lr)("Checkout::Dynamic::Render",Ot.M.Information3),n=function(e){return a.default.createElement(i.$,null,e)};return a.default.createElement(u.E,{spacing:"large500"},a.default.createElement(ar,null),e&&a.default.createElement(E._,{extensions:t,render:n}),a.default.createElement(Io,null),!e&&a.default.createElement(E._,{extensions:t,render:n}))}function Io(){var e,t=(0,We.HD)().method,n=(0,r.q)(),o=(0,_.I)(),s=(0,Xa.E)(),c=(0,I.tT)(),d=(0,_o.lz)(),m="inactive"!==s,v=null==o||null==(e=o.selectedCompanyLocation)?void 0:e.name,g=((null==o?void 0:o.locationCount)||0)>1,h=m&&v?n("contact.ship_to_company",{companyName:v},"Expédier à {{companyName}}"):n("delivery_options.shipping_address","Adresse d'expédition"),y=(0,Mt.Lr)("Checkout::DeliveryAddress::RenderBefore"),b=null==o?void 0:o.shippingAddress,k=(0,Je.fz)()?a.default.createElement(et.a,{appearance:"subdued"},n("contact.shipping_used_as_billing_notice","Cette adresse sera également utilisée comme adresse de facturation pour cette commande.")):null,C=b&&"hasValidShippingAddress"===s?a.default.createElement(So,{existingShippingAddress:b,addressErrors:hr.Mr,addressSettings:d}):a.default.createElement(ur,{addressErrors:hr.Mr,addressSettings:d}),P=m?a.default.createElement(Ye.T,{columns:["fill","auto"],spacing:"base"},a.default.createElement(u.E,{spacing:"extraTight"},a.default.createElement(l.X,null,h),!b&&a.default.createElement(p.x,{appearance:"subdued"},n("contact.different_shipping_address_text","Utiliser une adresse unique pour cette commande"))),g&&c&&a.default.createElement(u.E,{inlineAlignment:"end"},a.default.createElement(f.r,{to:c,accessibilityLabel:n("contact.change_company_location_link_label","Changer l’emplacement de l’entreprise")},a.default.createElement(p.x,null,n("contact.change_location_link_label","Changer d’emplacement"))))):a.default.createElement(a.default.Fragment,null,a.default.createElement(l.X,null,h),k);switch(t){case Ge.l.PickupPoint:return a.default.createElement($a.l,{sectionId:Ya.A.PickupPoints},a.default.createElement(to,null));case Ge.l.PickUp:return a.default.createElement($a.l,{sectionId:Ya.A.LocalPickup},a.default.createElement(go,null));default:return a.default.createElement($a.l,{sectionId:Ya.A.ShippingAddressForm},a.default.createElement(i.$,{accessibilityLabel:h},a.default.createElement(u.E,null,P,a.default.createElement(E._,{extensions:y}),a.default.createElement(ee.l,null,o?C:a.default.createElement(a.default.Fragment,null,a.default.createElement(ur,{addressErrors:hr.Mr}),a.default.createElement(gt,null),a.default.createElement(St,null)))),a.default.createElement(Lo,null)))}}function Lo(){var e=(0,q.pF)(),t=(0,F.e)();return(0,j.lH)((function(n){"success"===n.type&&"progression"===n.negotiationStage&&(e("sectionComplete",{section:"deliveryAddress",timestamp:new Date}),t({type:"section_complete",section:"deliveryAddress"}))})),null}function xo(){var e=(0,r.q)(),t=(0,j.JL)(),n=t.progress,i=t.progressing,l=(0,le.Ry)().shippingRequired,u=l?e("general.continue_to_shipping_method","Continuer vers l'expédition"):e("general.continue_to_payment_method","Continuer vers le paiement"),s=(0,Zt.ge)();(0,Tt.QL)(s);var c=(0,Tt.ME)(s,n);return a.default.createElement(a.default.Fragment,null,a.default.createElement(m.D,{hasError:!1},e("contact.title","Informations")),a.default.createElement(o.l,{onSubmit:c,disabled:i,implicitSubmit:u},a.default.createElement(Qa.v,{section:"contact"},a.default.createElement(Zo,{shippingRequired:l}))),l?a.default.createElement(tr.Q.Preload,null):a.default.createElement(er.F.Prefetch,null),a.default.createElement(y,{id:"Information"}))}var Mo=function(e){return a.default.createElement(i.$,null,e)},Zo=(0,a.memo)((function(e){var t=e.shippingRequired,n=(0,r.q)(),o=(0,le.Uc)(),f=(0,Lt.FU)().previousStep,m=(0,A.L)().hasStorefront,v="inactive"!==(0,Xa.E)(),g=(0,Ka.c)(),h=(0,I.BP)(),y=h.showLoginLink,_=h.loginUrl,C=n("contact.contact_method_title","Contact"),P=n("payment.billing_address_title","Adresse de facturation"),w=y?a.default.createElement(zo,{contactTitle:C,loginUrl:_}):a.default.createElement(l.X,{id:xt.j},C),S=(0,Mt.Lr)("Checkout::Contact::RenderAfter"),L=(0,Mt.Lr)("Checkout::Dynamic::Render",Ot.M.Information1),x=(0,Mt.Lr)("Checkout::Dynamic::Render",Ot.M.Information2),M=(0,Mt.Lr)("Checkout::Dynamic::Render",Ot.M.Information3);return a.default.createElement(H,null,a.default.createElement(u.E,{spacing:"large200"},o.wallets()?a.default.createElement($a.l,{sectionId:Ya.A.ExpressCheckout},a.default.createElement(Wa,null)):null),a.default.createElement(b.h8,null,a.default.createElement(b.Pj,null,a.default.createElement(nr.JO,null),a.default.createElement(E._,{extensions:L,render:Mo}),a.default.createElement(i.$,{accessibilityLabel:C},a.default.createElement(u.E,null,w,v?a.default.createElement(k,null):a.default.createElement(Fe,null),a.default.createElement(E._,{extensions:S,render:Mo}))),a.default.createElement(E._,{extensions:x,render:Mo}),t?a.default.createElement(pt,null,a.default.createElement(Ao,null)):a.default.createElement(a.default.Fragment,null,a.default.createElement(i.$,{accessibilityLabel:P},a.default.createElement(u.E,null,a.default.createElement(l.X,null,P),a.default.createElement(ee.l,null,a.default.createElement(ft.N,null),a.default.createElement(gt,null),a.default.createElement(St,null)))),a.default.createElement(E._,{extensions:M,render:Mo})),g&&a.default.createElement(It.U,null)),a.default.createElement(b.r5,null,a.default.createElement(To,null),m&&f.route&&a.default.createElement(b.ch,null,a.default.createElement(s.z,{to:f.route,kind:"plain",inlineSize:"fill",textDecoration:"none"},a.default.createElement(c.g,{spacing:"small200",blockAlignment:"center"},a.default.createElement(d.JO,{source:"chevronLeft",size:"small"}),a.default.createElement(p.x,null,f.label)))))))}));function To(){var e=(0,j.JL)(),t=e.progressing,n=e.prefetch,r=e.blocked,o=(0,Lt.FU)().nextStep,i=$().captureNegotiate;return a.default.createElement(b.qY,null,a.default.createElement(s.z,{disabled:r,submit:!0,loading:t,size:"large",inlineSize:"fill",onMouseEnter:function(){i(),n()}},o.label))}function zo(e){var t=e.contactTitle,n=e.loginUrl,o=(0,r.q)(),i=(0,ue.m)("simulated");return a.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",flexWrap:"wrap"}},a.default.createElement(l.X,{id:xt.j},t),a.default.createElement(p.x,null,o("customer_account.have_an_account_label","Vous avez déjà un compte ?")," ",i?o("customer_account.sign_in_link_label","Ouvrir une session"):a.default.createElement(f.r,{to:n},o("customer_account.sign_in_link_label","Ouvrir une session"))))}},10678:function(e,t,n){n.d(t,{DO:function(){return k},Em:function(){return E},el:function(){return _},fz:function(){return C},kK:function(){return b}});var a=n(29439),r=(n(66992),n(41539),n(70189),n(78783),n(33948),n(59748)),o=n(28682),i=n(18427),l=n(52376),u=n(40431),s=n(86749),c=n(51224),d=n(55667),p=n(92163),f=n(6664),m=n(77962),v=n(87240),g=n(50716),h=n(47501),y=n(13194);function b(){var e=(0,l.j2)().value,t=(0,u.$3)(e),n=(0,u.ji)(e),o=(0,c.KO)((0,d.gG)().billingAddressOption),i=(0,a.Z)(o,2)[1];(0,r.useEffect)((function(){(t||n)&&i("custom")}),[t,n,i])}function E(){var e=(0,c.xP)(),t=(0,f.I)(),n=null==t?void 0:t.billingAddress,o=(0,m._M)(),i=o.isValid,l=o.isLoading,u=(0,c.KO)((0,d.gG)().billingAddressOption),s=(0,a.Z)(u,2),p=s[0],v=s[1],g=(0,d.gG)().billingAddress;(0,r.useEffect)((function(){i||l||!n||"billing"!==p||(e.write(g,n),v("custom"))}),[g,p,n,v,e,i,l])}function _(){var e=(0,s.Ry)().shippingRequired,t=(0,l.j2)().value,n=(0,u.$3)(t),a=(0,u.ji)(t),r=(0,p.v)().isOrderEditCheckout,o=(0,i.a4)(),c=(0,i.T7)();return n||a||!r&&!e||r&&!o&&!c?"form":"selector"}function k(){var e=(0,d.gG)().billingAddress,t=(0,c.KO)(e),n=(0,a.Z)(t,2),i=n[0],l=n[1],u=(0,r.useCallback)((function(){l((0,o.A4)(void 0,i.countryCode,i.zoneCode))}),[i,l]);return{billingAddress:i,clearBillingAddress:u}}function C(){var e=(0,y.L)(),t=(0,g.w)(h.v8),n=(0,c.Dv)((0,d.gG)().paymentLines),a=(0,f.I)(),r=(0,s.Ry)().shippingRequired,o=(0,p.v)().isOrderEditCheckout;return t&&Boolean(e.requireMatchingShippingAndBilling)&&(0,v.r$)(n)&&r&&!o&&!a}},77962:function(e,t,n){n.d(t,{_M:function(){return p},lz:function(){return d},wG:function(){return f}}),n(19601),n(26699);var a=n(59748),r=n(90961),o=n(88896),i=n(76874),l=n(6664),u=n(39624),s=["countryCode","address1","city","zoneCode","postalCode"],c=["countryCode","lastName","company","address1","address2","city","zoneCode","postalCode"];function d(){var e=(0,r.er)();return(0,a.useMemo)((function(){return Object.assign(Object.assign({},e),{},{isRequired:function(e){return s.includes(e)},isVisible:function(e){return c.includes(e)}})}),[e])}function p(){var e=(0,l.I)(),t=d(),n=(0,u.Yu)(),a=n.billingCountries,r=n.loading,s=(0,o.z)(null==e?void 0:e.billingAddress),c=(0,i.TC)(null==s?void 0:s.countryCode,a,t);return{isValid:r?void 0:0===c(s,"billing").size,isLoading:r}}function f(){var e=(0,l.I)(),t=d(),n=(0,u.MF)(),a=n.shippingCountries,r=n.loading,s=(0,o.z)(null==e?void 0:e.shippingAddress),c=(0,i.TC)(null==s?void 0:s.countryCode,a,t);return{isValid:r?void 0:0===c(s,"shipping").size,isLoading:r}}},99034:function(e,t,n){n.d(t,{c:function(){return r}});var a=n(52376);function r(){var e=(0,a.my)().value;return Boolean(e)}},66397:function(e,t,n){n.d(t,{G3:function(){return a},Wy:function(){return r},iv:function(){return o}});var a=function(e){return e.Control="control",e.TestGroupA="test_group_a",e.TestGroupB="test_group_b",e.TestGroupC="test_group_c",e}({}),r=function(e){return e.Control="control",e.Treatment1="t1",e.Treatment2="t2",e.Treatment3="t3",e.Treatment4="t4",e.Treatment5="t5",e.Treatment6="t6",e}({}),o=function(e){return e.Control="control",e.InlinePrice="inline_price",e.StickyInlinePrice="sticky_inline_price",e}({})},49008:function(e,t,n){n.d(t,{$F:function(){return u},ex:function(){return l},f9:function(){return s}});var a=n(93433),r=n(43144),o=(n(21249),n(41539),n(54747),n(26699),n(32023),n(85827),n(47941),n(57658),n(69826),n(57327),n(86535),n(99244),n(23084)),i=n(47940),l=function(){function e(e,t,n){this.actionMapper=e,this.defaultMapper=t,this.getViolationActions=n}return(0,r.Z)(e,[{key:"mapResultToPaymentSheetAction",value:function(e){var t=this,n=e.status in this.actionMapper&&this.actionMapper[e.status];return n?n({result:e,violationActions:this.getViolationActions(),defaultMapper:function(){return t.defaultMapper(e)}}):this.defaultMapper(e)}}]),e}(),u=function(){function e(){}return(0,r.Z)(e,[{key:"getMergedPaymentSheetAction",value:function(e){var t=e.resultViolations,n=e.violationActions,r=t.map((function(e){return e.code})),l={};n.forEach((function(e){e.violations.forEach((function(t){r.includes(t)&&(l[t]=e.generateAction)}))}));var u,s=t.find((function(e){return e.code in l}));return s&&(u=l[s.code]()),{firstPaymentSheetAction:u,generatePrioritizedPaymentSheetAction:function(){var e,n=(0,i.$d)()(["abort","show_error","submit","update"]),u=Object.keys(l).reduce((function(e,t){var n,r,o=l[t]();return o.effects&&(n=e.allEffects).push.apply(n,(0,a.Z)(o.effects)),"submit"!==o.action&&o.errors&&(r=e.allErrors).push.apply(r,(0,a.Z)(o.errors)),e.generatedActions.push({paymentSheetAction:o,violation:t}),e}),{generatedActions:[],allEffects:[],allErrors:[]}),s=u.generatedActions,c=u.allEffects,d=u.allErrors,p=function(e){return n.map((function(t){return e.find((function(e){return e.paymentSheetAction.action===t}))})).find((function(e){return Boolean(e)}))},f=p(s),m=o.j.PaymentsUnacceptablePaymentAmount,v=void 0!==l[m]&&1===t.filter((function(e){return e.code===m})).length,g=r.filter((function(e){return e!==m&&void 0!==l[e]})).length;return f&&v&&g>0&&(f=p(s.filter((function(e){return e.violation!==o.j.PaymentsUnacceptablePaymentAmount})))),f&&((e=f.paymentSheetAction).effects=c,"submit"!==e.action&&(e.errors=d)),e}}}},{key:"getUnhandledErrors",value:function(e,t){var n=function(e){return e.flatMap((function(e){return e.violations}))}(t);return e.filter((function(e){var t=e.code;return!n.includes(t)}))}}]),e}();function s(e){var t;return"errors"in e&&null!=(t=e.errors)?t:[]}},70773:function(e,t,n){n.d(t,{X:function(){return u}});var a=n(51224),r=n(59748),o=n(91128),i=n(25275),l=n(38027);function u(e){var t=e.id,n=e.children,o=(0,a.YC)(!1);return r.default.createElement(i.yP.Provider,{value:(0,r.useMemo)((function(){return{id:t,completeStatusAtom:o}}),[t,o])},n,r.default.createElement(s,null))}function s(){var e=(0,o.a)(i.yP),t=(0,a.Dv)(e.completeStatusAtom);return(0,l.cf)(e.id,!t),null}},29919:function(e,t,n){n.d(t,{WB:function(){return p},yD:function(){return v},Km:function(){return c},M8:function(){return f}});var a=n(29439),r=(n(21249),n(57327),n(41539),n(47941),n(54747),n(66992),n(33948),n(59748)),o=n(55399),i=n(51224),l=n(68392),u=n(23084),s=(0,n(91128).Q)("ShippingMethodsContext");function c(){var e=(0,r.useContext)(s);if(null!=e)return e}var d=function(){return(0,o.k5)((function(e,t){switch(e){case"ignored":if("timeout"===t)return"idle";break;case"idle":if("countryChange"===t)return"debounced";if("otherAddressFieldChange"===t)return"ignored";break;case"debounced":switch(t){case"countryChange":return"debounced";case"otherAddressFieldChange":return"ignored";case"timeout":return"idle"}}}),"idle")};function p(e,t){var n=(0,i.xP)(),o=(0,r.useMemo)(d,[e]),l=(0,i.KO)(o),u=(0,a.Z)(l,2),s=u[0],c=u[1];(0,i.X_)(o,(function(e){var n=e.prevState,a=e.action;"debounced"===n&&"timeout"===a&&t()})),(0,r.useEffect)((function(){return n.subscribe(e.fields.countryCode,(function(){c("countryChange")}))}),[e.fields.countryCode,c,n]),(0,r.useEffect)((function(){if("debounced"===s||"ignored"===s){var e=setTimeout((function(){c("timeout")}),100);return function(){clearTimeout(e)}}}),[c,s]),(0,r.useEffect)((function(){var t=Object.keys(e.fields).filter((function(e){return"countryCode"!==e})).map((function(t){return n.subscribe(e.fields[t],(function(e){e.value&&c("otherAddressFieldChange")}))}));return function(){t.forEach((function(e){return e()}))}}),[e.fields,c,n])}function f(e){var t=(0,l.Sd)();return(0,r.useMemo)((function(){var n=t.some((function(e){var t=e.code;return t===u.j.MerchandiseCartUpdatedBasedOnCountry||"TaxExemption"===t})),a=e.some((function(e){return e.hasDeliveryLineChange})),r=e.length>1||e.some((function(e){var t;return(null==(t=e.methods)?void 0:t.length)>1}));return a&&!n&&r||!1}),[e,t])}var m=(0,o.cp)(!1);function v(){var e=(0,i.KO)(m),t=(0,a.Z)(e,2);return t[0],t[1]}},74577:function(e,t,n){n.d(t,{w:function(){return c}}),n(66992),n(51532),n(41539),n(78783),n(33948);var a=n(76874),r=n(51224),o=n(55667),i=n(59748),l=n(23641),u=n(49036),s=n(86749);function c(){var e=(0,l.n)(),t=(0,s.Ry)().shippingRequired,n=(0,r.Dv)(u.q.selectedCreditCard),c=(0,r.Dv)((0,o.gG)().billingAddress),d=(0,r.Dv)((0,o.gG)().shippingAddress),p=(0,r.Dv)((0,o.gG)().billingAddressOption),f=(0,s.QJ)(),m=(0,r.Dv)(f?u.q.selectedFreeCheckoutBillingAddress:u.q.selectedNewCardBillingAddress),v=(0,r.Dv)(u.q.selectedShippingAddress),g=(0,i.useMemo)((function(){return t?null!=v&&v.address?v.address:d:null}),[v,d,t]),h=(0,a.TC)(null==g?void 0:g.countryCode,void 0,e),y=g?h(g,"shipping"):new Map,b=(0,i.useMemo)((function(){return n?n.billingAddress.address:null!=m&&m.address?m.address:"shipping"===p&&g?g:c}),[c,p,m,g,n]),E=(0,a.TC)(b.countryCode,void 0,e)(b,"billing");return{selectedBillingAddress:b,selectedShippingAddress:g,billingAddressErrors:E,shippingAddressErrors:y}}},73774:function(e,t,n){n.d(t,{J:function(){return r}});var a=n(66259);function r(e){return e===a.C.Us}},53037:function(e,t,n){n.d(t,{X:function(){return v}});var a=n(87462),r=n(59748),o=n(94184),i=n.n(o),l=n(47242),u=n(96555),s=n(33578),c=n(57126),d=n(97977),p=n(14849),f=n(16031),m=n(98835);function v(e){var t=e.id,n=e.selectedItems,o=e.onChange,v=e.title,g=e.titleHidden,h=e.controlHidden,y=void 0!==h&&h,b=e.allowMultiple,E=void 0!==b&&b,_=e.children,k=e.loading,C=(0,r.useRef)(o);C.current=o;var P,w=(0,r.useMemo)((function(){return{id:t,selectedItems:n,allowMultiple:E,controlHidden:y,get onChange(){return C.current}}}),[E,t,n,y]),S=v&&(g?r.default.createElement(c.G,{visibility:"hidden"},r.default.createElement("legend",null,v)):r.default.createElement("legend",{className:m.Z.Title},r.default.createElement(u.X,{level:3,accessibilityRole:"presentation"},v))),A=(0,d.G)(),I=A.control,L=I.background,x=I.border,M=A.optionList,Z=M.background,T=M.spacing,z=void 0===T?"none":T,O=M.border,N=M.borderStyle,R=void 0===N?"base":N,B=O||x||"full",q=Z||L||"color3",F=(0,p.R)().parent,D=(0,r.useMemo)((function(){return"transparent"===q?F:q}),[q,F]),j=i()(m.Z.OptionList,m.Z[(0,l.O)("OptionList-background",q)],m.Z[(0,l.O)("OptionList-border",B)],m.Z[(0,l.O)("OptionList-borderStyle",R)],"none"===z&&m.Z.isContainer,k&&m.Z.isLoading),G=(0,r.useMemo)((function(){return{parent:D}}),[D]);return r.default.createElement(p.u.Provider,{value:G},r.default.createElement(f.z.Provider,{value:w},r.default.createElement("fieldset",{id:t},S,r.default.createElement(s.D,null,r.default.createElement("div",(0,a.Z)({className:j},(P={},void 0!==k&&(P["aria-live"]="polite",P["aria-busy"]=k),P)),_)))))}},6346:function(e,t,n){n.d(t,{Wx:function(){return b},Hj:function(){return E},LB:function(){return _},Z5:function(){return k}});var a=n(93433),r=(n(26699),n(32023),n(57327),n(41539),n(92222),n(59748)),o=n(94184),i=n.n(o),l=n(47242),u=n(8428),s=n(82851),c=n(75077),d=n(97977),p=n(1046),f=n(98835),m=n(63366),v=n(16438),g=["accessibilityRole"];function h(e){var t=e.accessibilityRole,n=(0,m.Z)(e,g),a=(0,v.U)(),o=null==a||"presentation"===t?"p":"h"+a;return r.default.createElement(o,n)}var y=n(9966);function b(e){var t=e.id,n=e.label,o=e.accessibilityLabel,m=e.details,v=e.children,g=e.disabled,b=(0,p.V)(),E=b.id,_=b.selectedItems,k=b.allowMultiple,C=b.controlHidden,P=b.onChange,w=k?c.Z:s.u,S=_.includes(t),A=(0,d.G)(),I=A.control.background,L=A.optionList,x=L.background,M=L.spacing,Z=void 0===M?"none":M,T=L.typographyStyle,z=L.backgroundHovered,O=void 0!==z&&z,N=L.backgroundChecked,R=void 0===N?"interactive":N,B=x||I,q=!k&&R&&"none"!==R,F=i()(f.Z.Option,"none"!==Z&&f.Z.isContainer,g&&f.Z.OptionDisabled,S&&f.Z.OptionChecked,S&&q&&"transparent"!==B&&f.Z[(0,l.O)("OptionChecked-background",R)],S&&q&&f.Z[(0,l.O)("OptionChecked-border",R)]),D=C?r.default.createElement(h,{className:i()(f.Z.OptionLabelHeading,T&&y.Z[T])},n):r.default.createElement(u.x,{style:T},n),j=v?r.default.createElement("div",{className:f.Z.OptionLabelLayout},v):D;return C?r.default.createElement("div",{className:F},r.default.createElement("div",{className:f.Z.OptionLabel},j),m):r.default.createElement("div",{className:F},r.default.createElement("label",{htmlFor:E+"-"+t,className:i()(f.Z.OptionLabel,f.Z["OptionLabel-cursorPointer"],O&&f.Z["OptionLabel-backgroundHovered"]),"aria-label":o},r.default.createElement("div",{className:f.Z.OptionControlLayout},r.default.createElement(w,{id:E+"-"+t,name:""+E,checked:S,disabled:g,onChange:function(){P(k?S?_.filter((function(e){return e!==t})):[].concat((0,a.Z)(_),[t]):[t])}}),j)),m)}function E(e){var t=e.children;return r.default.createElement("div",{className:f.Z.PrimaryContent},t)}function _(e){var t=e.children;return r.default.createElement("div",{className:f.Z.SecondaryContent},t)}function k(e){var t=e.children;return r.default.createElement("div",{className:f.Z.TertiaryContent},t)}},46818:function(e,t,n){n.d(t,{w:function(){return d}}),n(26699),n(32023);var a=n(59748),r=n(94184),o=n.n(r),i=n(47242),l=n(1046),u=n(57884),s=n(98835),c=n(97977);function d(e){var t=e.controlledBy,n=e.renderChildrenWhenCollapsed,r=void 0!==n&&n,d=e.children,p=e.inlinePadding,f=e.blockPadding,m=(0,l.V)(),v=m.selectedItems,g=m.id,h=(0,c.G)().optionList.detailsBackground,y=v.includes(t);return d?a.default.createElement(u.u,{open:y,id:g+"-"+t+"-collapsible",renderChildrenWhenCollapsed:r},a.default.createElement("div",{className:o()(s.Z.Details,h&&s.Z[(0,i.O)("Details-background",h)],p&&s.Z[(0,i.O)("Details-inlinePadding",p)],f&&s.Z[(0,i.O)("Details-blockPadding",f)])},d)):null}},16031:function(e,t,n){n.d(t,{z:function(){return a}});var a=(0,n(59748).createContext)(null)},1046:function(e,t,n){n.d(t,{V:function(){return i}});var a=n(59748),r=n(21261),o=n(16031);function i(){var e=(0,a.useContext)(o.z);if(null===e)throw new r.j("<Option /> and <OptionDetails /> must be used inside of an <OptionList />");return e}},30176:function(e,t,n){n.d(t,{O:function(){return o}});var a=n(29439),r=n(59748);function o(e){var t=(0,r.useState)(e),n=(0,a.Z)(t,2),o=n[0],i=n[1];return{value:o,toggle:(0,r.useCallback)((function(){return i((function(e){return!e}))}),[]),setTrue:(0,r.useCallback)((function(){return i(!0)}),[]),setFalse:(0,r.useCallback)((function(){return i(!1)}),[])}}},98835:function(e,t){t.Z={Title:"GR30A",OptionList:"Wo4qW","OptionList-backgroundTransparent":"CsJaD","OptionList-backgroundColor1":"HMXBR","OptionList-backgroundColor2":"lfbzo","OptionList-backgroundColor3":"m5ItP",isContainer:"PuVf0",OptionLabel:"yL8c2",isLoading:"Xr2U3",OptionDisabled:"Z5rhi","OptionList-borderStyleBase":"NdTJE","OptionList-borderStyleDotted":"X7NB2","OptionList-borderFull":"NDMe9",Option:"B4zH6",Details:"b7U_P","OptionList-borderInner":"lwZ6l",OptionChecked:"Zb82w","OptionLabel-cursorPointer":"D1RJr","OptionLabel-backgroundHovered":"ij1rU",OptionLabelHeading:"zCeLR",OptionLabelLayout:"f5aCe",OptionControlLayout:"hEGyz",TertiaryContent:"SECJK","Details-inlinePaddingNone":"XJbX1","Details-blockPaddingNone":"fKPej","Details-backgroundTransparent":"lKe0j","Details-backgroundColor1":"lXug_","Details-backgroundColor2":"gBMpx","Details-backgroundColor3":"vVaOn","OptionChecked-backgroundInteractive":"HKtYc","OptionChecked-borderInteractive":"OpmPd"}}}]);