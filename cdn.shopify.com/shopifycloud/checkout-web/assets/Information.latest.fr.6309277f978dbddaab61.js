"use strict";(self.webpackChunkcheckout_web=self.webpackChunkcheckout_web||[]).push([[739],{93328:(e,t,n)=>{n.d(t,{o:()=>E});var a=n(59748),o=n(9377),r=n(98508),i=n(1335),l=n(45016),s=n(87979),c=n(20529),d=n(67403),u=n(9689),p=n(13194),m=n(70578),f=n(73967),h=n(65467),g=n(39624),y=n(39827);const v=300;function E({addressType:e,countryCode:t,initialAddressQuery:n="",provider:E="autocomplete-service"}){const _=(0,o.b)(),[k,C]=(0,a.useState)(n),[P,w]=(0,a.useState)(k),[S,A]=(0,a.useState)(!1),[I,L]=(0,a.useState)([]),[M,T]=(0,a.useState)(!1),x=(0,i.Lk)(),[z,R]=(0,a.useState)(b(x.sourceId)),{geolocation:N}=(0,r.Q)(),{search:q,fetchAddress:B}=(0,s.e)(),F=(0,l.h)(),O=(0,f.a)(),{id:D}=(0,p.L)(),{details:G}=(0,g.J$)(t),j=(0,y._v)(),V=void 0,H=(0,a.useCallback)(((e,n,a,o)=>{const r=j.value.defaultAttributes?.uniqToken||"",i={schemaId:h.gn.AutocompleteSuggestion,payload:{shopId:parseInt((0,m.Bp)(D),10),checkoutToken:x.checkoutSessionIdentifier||"",uniqueToken:r,provider:n[0]?.completionService,context:"shipping"===e?"Shipping address":"Billing address",territoryCode:t??N.country.code,locale:_,query:a,requestProvider:o,requestLatitude:N.coordinates?.latitude,requestLongitude:N.coordinates?.longitude,addressIds:n.map((e=>e.addressId))}};O?.record(i)}),[t,N.country.code,_,D,x.checkoutSessionIdentifier,j.value.defaultAttributes?.uniqToken,O,N.coordinates]);(0,a.useEffect)((()=>{const e=setTimeout((()=>{F&&w(k)}),v);return()=>{clearTimeout(e)}}),[F,k]),(0,a.useEffect)((()=>{C(n)}),[n]),(0,a.useEffect)((()=>{(0,c.h0)(t||N.country.code)||L([])}),[t,N.country.code]);const U=function(e){const t=(0,d.E)(),{geolocation:n}=(0,r.Q)();return(0,a.useCallback)((async(a,o,r)=>{const i=await e(a,o,r);return t.distribution(u.j.PredictionDuration,{tags:{buyerCountry:n.country.code},value:i.duration.end-i.duration.start}),i.data}),[e,t])}(q);(0,a.useEffect)((()=>{(0,c.h0)(t||N.country.code)&&S&&async function(n){try{if(n.length<=1)return void L([]);const a=await U(n,{locale:_,countryCode:t??N.country.code,location:N.coordinates,requestToken:z,shopId:(0,m.Bp)(D),sourceId:x.sourceId||""},V);F.current&&(L(a),a?.length>0&&!M&&("shipping"===e||"billing"===e)&&(H(e,a,n,V),T(!0)))}catch(a){console.warn(`Unable to fetch predictions: ${a}`),L([])}}(P)}),[P,_,z,H,M]);const $=(0,a.useCallback)(((e,n,a,o)=>{const r=G?.zones.find((e=>e.code===n.zoneCode))?.name||void 0,i=j.value.defaultAttributes?.uniqToken,l=a.findIndex((t=>t.addressId===e))+1,s={shopId:parseInt((0,m.Bp)(D),10),checkoutToken:x.checkoutSessionIdentifier||"",uniqueToken:i,address1:n.address1,address2:n.address2,city:n.city,zone:r,latitude:n.coordinates?.latitude,longitude:n.coordinates?.longitude,zip:n.postalCode,territoryCode:t??N.country.code,position:l,query:P,context:"shipping"===o?"Shipping address":"Billing address",locale:_,requestLatitude:N.coordinates?.latitude,requestLongitude:N.coordinates?.longitude};O?.record({schemaId:h.gn.AutocompleteSelection,payload:s})}),[G,j.value.defaultAttributes?.uniqToken,D,x.checkoutSessionIdentifier,t,N.country.code,N.coordinates,P,_,O]),W=(0,a.useCallback)((async(t,n,a)=>{try{const o=await B(t,{locale:_,requestToken:z,completionService:n,shopId:(0,m.Bp)(D),sourceId:x.sourceId||""});F.current&&(R(b(x.sourceId)),"shipping"!==e&&"billing"!==e||$(t,o,I,e),a(o))}catch(o){console.warn(`Unable to select prediction: ${o}`)}}),[_,z,D,x.sourceId,B,F,e,$,I]),J=(0,a.useCallback)(((e,t=!0)=>{C(e),A(t)}),[]);return{value:k,debouncedValue:P,setValue:J,predictions:I,selectPrediction:W,provider:E}}function b(e){return`${e}-${Date.now()}`}},65674:(e,t,n)=>{n.d(t,{N:()=>p});var a=n(59748),o=n(1791),r=n(90961);const i=(0,a.createContext)({});var l=n(39624),s=n(55667),c=n(77962),d=n(6664),u=n(59572);function p({settings:e,additionalFieldGroups:t,customAddressSettings:n}){const p=(0,a.useContext)(i),m=(0,a.useMemo)((()=>p?.addressErrors||(0,o._W)()),[p?.addressErrors]),f=(0,l.fv)(),{billingAddress:h}=(0,s.gG)(),g=(0,r.C)(),y=(0,d.I)(),v=(0,c.lz)(),E=n||y?v:p?.addressSettings||g;return a.default.createElement(u.kS,{id:"billingAddressForm",addressType:"billing",addressErrors:m,address:h,countries:f,settings:e,additionalFieldGroups:t,addressSettings:E})}},2235:(e,t,n)=>{n.d(t,{U:()=>r});var a=n(20658),o=n(45878);const r=(0,a.L)({load:()=>(0,o.R)((()=>n.e(126).then(n.bind(n,48414)))),id:()=>48414})},15869:(e,t,n)=>{n.d(t,{Q:()=>u});var a=n(59748),o=n(73967),r=n(13194),i=n(1335),l=n(70578),s=n(52376),c=n(86749),d=n(1531);const u=(e,t)=>{const n=(0,a.useRef)(),u=(0,o.a)(),p=(0,i.Lk)(),{id:m}=(0,r.L)(),f=(0,d.a)(),h=(0,s.Zo)(),g=(0,c.aJ)(),y=e||g?.selectedDeliveryMethodHandle,v=t||g?.methods;(0,a.useEffect)((()=>{const{locationId:e,selectedLocationRank:t}=((e,t)=>{const n=t=>t.handle===e,a=t?.findIndex(n),o=t?.find(n)?.originLocation?.id;return{locationId:o,selectedLocationRank:a}})(y,v);e&&y!==n.current&&(n.current=y,u.record({schemaId:"local_pickup_checkout/3.1",payload:{eventType:"checkout_pickup_location_selected",checkoutToken:p.checkoutSessionIdentifier||"",shopId:parseInt((0,l.Bp)(m),10),locationId:(0,l.Bp)(e),selectedLocationRank:t,userId:h?.id?parseInt((0,l.Bp)(h.id),10):void 0,numberLocationsFound:v?.length||0,checkoutSurface:f?"shop_pay":"guest_checkout"}}))}),[h?.id,f,v,u,y,p.checkoutSessionIdentifier,m])}},42158:(e,t,n)=>{n.d(t,{OZ:()=>d,kr:()=>c,ub:()=>s});var a=n(59748),o=n(57126),r=n(13866),i=n(81473),l=n(68184);function s({children:e}){const t=(0,l.vQ)(),n=t?"large100":"large500",i=t?void 0:"base",s=t?"subdued":void 0;return a.default.createElement(o.G,{background:s,border:i,cornerRadius:"base",padding:["large100",n]},a.default.createElement(r.E,{spacing:"small200",inlineAlignment:t?void 0:"center"},e))}function c({children:e}){return a.default.createElement(o.G,{maxInlineSize:64,maxBlockSize:64,inlineSize:"fill",blockAlignment:"center",inlineAlignment:"center"},e)}function d({children:e}){const t=(0,l.vQ)();return a.default.createElement(i.a,{appearance:t?"subdued":void 0,inlineAlignment:t?void 0:"center"},e)}},25664:(e,t,n)=>{n.d(t,{h:()=>r});var a=n(87462),o=n(59748);const r=(0,o.forwardRef)((function(e,t){return o.default.createElement("iframe",(0,a.Z)({},e,{ref:t}))}))},21850:(e,t,n)=>{n.d(t,{D:()=>h});var a=n(59748),o=n(65963),r=n(94184),i=n.n(r),l=n(93211),s=n(60610),c=n(25664);const d={Map:"UlC9u"},u=n.p+"b1cb08d9bc7f3f02ae66.svg",p=n.p+"1d95a97370ba2873236f.svg",m="shopify_sandboxed_message:";function f(e){return e?.map((e=>{switch(e.type){case"current":return{...e,image:u};case"destination":return{...e,image:p};default:return e}}))}function h({className:e,markers:t,options:n,title:r,mapId:u,onMarkerSelect:p,handleBoundsChanged:h,handleCenterChanged:g,handleClick:y,handleDoubleClick:v,handleDrag:E,handleZoomChanged:b,handleDragEnd:_}){const k=(0,o.wG)(),C=(0,l.q)(),P=(0,a.useRef)(null),w=(0,a.useRef)(u??(0,s.V)()),S=(0,a.useRef)(!1),A=e=>{return P.current?.contentWindow?.postMessage((t=e,`${m}${JSON.stringify(t)}`),"*");var t},I=(0,a.useCallback)((({data:e})=>{function a(e){const t=e();t&&t?.action&&A(t)}const o=function(e){if("string"==typeof e&&e.startsWith(m))try{return JSON.parse(e.replace(m,""))}catch{}}(e);if(o?.id===w.current)switch(o?.action){case"ready":A({action:"createMapAndMarkers",body:f(t),options:n}),S.current=!0;break;case"marker":p?.(o?.body);break;case"bounds_changed":a((()=>h?.()));break;case"center_changed":a((()=>g?.()));break;case"click":a((()=>y?.(o?.body)));break;case"dblclick":a((()=>v?.(o?.body)));break;case"drag":a((()=>E?.()));break;case"zoom_changed":a((()=>b?.()));break;case"dragend":a((()=>_?.()))}}),[p,h,g,y,v,E,b]);return(0,a.useEffect)((()=>(window.addEventListener("message",I),()=>window.removeEventListener("message",I)))),(0,a.useEffect)((()=>{S&&A({action:"updateMarkers",body:f(t),options:n})}),[t,n]),a.default.createElement(c.h,{ref:P,title:r??C("general.google_map_title","Google Map"),className:i()(d.Map,e),src:k.sandboxGoogleMaps(w.current)})}},65912:(e,t,n)=>{n.d(t,{z:()=>f});var a=n(59748),o=n(93211),r=n(75077),i=n(51224),l=n(55667),s=n(73967),c=n(65467),d=n(70578),u=n(13194),p=n(1335),m=n(68184);function f({isShopPay:e,label:t}){const n=(0,o.q)(),[f,h]=(0,i.KO)((0,l.gG)().acceptMarketing),g=(0,s.a)(),{checkoutSessionIdentifier:y,sourceId:v}=(0,p.Lk)(),{id:E,myshopifyDomain:b}=(0,u.L)(),_=(0,m.un)();return a.default.createElement(r.X,{id:"marketing_opt_in",name:"marketing_opt_in",checked:f,onChange:function(t){h(t);const n={schemaId:c.gn.EmailMarketingOptInInteraction,payload:{checkoutToken:y||v,shopId:Number((0,d.Bp)(E)),shopifyDomain:b,action:t?"click_email_opt_in":"unclick_email_opt_in",origin:e?"payment_page":"contact_info_page",checkoutVersion:_?"checkout_one_redesign":"checkout_one"}};g.record(n)}},t??n("marketing.accept_marketing_checkbox_label","Envoyez-moi les nouvelles et les offres par e-mail"))}},84637:(e,t,n)=>{n.d(t,{x:()=>s});var a=n(59748),o=n(20658),r=n(70773),i=n(45878);const l=(0,o.L)({load:()=>(0,i.R)((()=>n.e(43).then(n.bind(n,59233)))),id:()=>59233});function s(e){const t="venmo"===e.fundingSource?"Venmo":"PayPal";return a.default.createElement(r.X,{id:t},a.default.createElement(l,e))}},11229:(e,t,n)=>{n.d(t,{t:()=>l});var a=n(59748),o=n(8758),r=n(81473),i=n(42158);function l({text:e}){return a.default.createElement(i.ub,null,a.default.createElement(o.$,{size:"large"}),a.default.createElement(r.a,null,e))}},44578:(e,t,n)=>{n.d(t,{I:()=>f});var a=n(59748),o=n(93211),r=n(94184),i=n.n(r),l=n(95923);const s={xsmall:"guTuY",small:"Pffz4",medium:"P3VGi",large:"ed67Y",inline:"jOOgt"};var c,d,u;function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p.apply(this,arguments)}const m=function(e){return a.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",fill:"inherit",preserveAspectRatio:"xMidYMid",viewBox:"0 0 424 102"},e),c||(c=a.createElement("path",{fillRule:"evenodd",d:"M204.916 30.1c3.978-4.92 10.15-8.998 17.52-8.998 16.544 0 29.576 13.696 29.565 30.595 0 17.61-13.096 30.64-28.81 30.64-8.355 0-14.75-4.277-17.087-7.845h-.222v25.864a.585.585 0 0 1-.586.589h-14.727a.598.598 0 0 1-.6-.587v-78.68c0-.16.064-.31.177-.422a.594.594 0 0 1 .423-.175h13.763a.59.59 0 0 1 .415.18c.11.11.17.26.17.418V30.1zm16.263 37.243a15.623 15.623 0 0 1-11.66-4.689 15.628 15.628 0 0 1-4.2-13.715 15.61 15.61 0 0 1 15.831-12.812 15.345 15.345 0 0 1 10.777 4.61 15.348 15.348 0 0 1 4.37 10.957 15.46 15.46 0 0 1-1.086 5.93 15.413 15.413 0 0 1-14.033 9.716z",clipRule:"evenodd"})),d||(d=a.createElement("path",{d:"M109.306 32.87c-3.402-7.136-9.852-11.746-19.57-11.746a19.486 19.486 0 0 0-15.304 7.868l-.354.432V1.454a.604.604 0 0 0-.18-.43.603.603 0 0 0-.43-.18h-13.74a.61.61 0 0 0-.599.61v80.23a.595.595 0 0 0 .596.598h14.717a.612.612 0 0 0 .61-.598v-34.21c0-6.647 4.433-11.357 11.525-11.357 7.757 0 9.718 6.383 9.718 12.888v32.68a.599.599 0 0 0 .6.597h14.683a.61.61 0 0 0 .61-.598v-34.63c0-1.185 0-2.35-.155-3.48a30.623 30.623 0 0 0-2.726-10.704zm-73.48 11.89s-7.49-1.76-10.25-2.47c-2.76-.71-7.58-2.217-7.58-5.863 0-3.646 3.89-4.81 7.833-4.81 3.944 0 8.332.954 8.675 5.33a.63.63 0 0 0 .631.575l14.505-.055a.636.636 0 0 0 .456-.198.631.631 0 0 0 .164-.467c-.898-14.008-13.187-19.017-24.523-19.017-13.44 0-23.27 8.865-23.27 18.64 0 7.136 2.016 13.83 17.873 18.483 2.782.81 6.56 1.862 9.863 2.78 3.967 1.11 6.105 2.783 6.105 5.42 0 3.06-4.43 5.186-8.786 5.186-6.305 0-10.782-2.338-11.148-6.538a.636.636 0 0 0-.632-.555l-14.472.067a.63.63 0 0 0-.632.653c.666 13.22 13.432 20.346 25.334 20.346 17.73 0 25.742-9.973 25.742-19.315.022-4.388-.987-14.384-15.89-18.196zm110.558-27.116c-13.73 0-20.578 4.666-26.074 8.4l-.167.11c-.283.195-.483.49-.56.823-.075.335-.02.687.15.984l5.43 9.355c.102.175.24.325.408.44a1.41 1.41 0 0 0 1.146.199c.192-.052.37-.146.52-.275l.433-.356c2.824-2.372 7.357-5.54 18.327-6.405 6.106-.49 11.38 1.107 15.27 4.742 4.278 3.945 6.838 10.316 6.838 17.043 0 12.378-7.292 20.157-19.005 20.312-9.653-.055-16.135-5.086-16.135-12.522 0-3.945 1.784-6.516 5.263-9.087.266-.19.454-.47.53-.788a1.356 1.356 0 0 0-.12-.94l-4.876-9.22a1.43 1.43 0 0 0-1.423-.734c-.19.025-.376.09-.54.19-5.474 3.247-12.19 9.186-11.824 20.6.443 14.528 12.522 25.62 28.224 26.075h1.863c18.66-.61 32.136-14.46 32.136-33.244 0-17.242-12.568-35.704-35.817-35.704z"})),u||(u=a.createElement("path",{fillRule:"evenodd",d:"M282.375 1.044h125.652c8.672 0 15.703 7.03 15.703 15.703V85.54c0 8.672-7.03 15.702-15.703 15.702H282.375c-8.672 0-15.702-7.03-15.702-15.702V16.747c0-8.673 7.03-15.703 15.702-15.703zm28.19 54.488c10.484 0 17.986-7.647 17.986-18.362 0-10.66-7.5-18.35-17.983-18.35H292.06a.827.827 0 0 0-.831.83v50.786c0 .22.09.43.245.585a.836.836 0 0 0 .584.248h6.96a.827.827 0 0 0 .829-.831V56.363a.832.832 0 0 1 .831-.831h9.885zm-.53-29c5.695 0 9.895 4.5 9.895 10.638 0 6.15-4.2 10.638-9.896 10.638h-9.352a.829.829 0 0 1-.832-.82V27.363a.844.844 0 0 1 .832-.831h9.352zM330.6 61.526a9.903 9.903 0 0 1 .988-4.757 9.86 9.86 0 0 1 3.136-3.71c2.704-2.03 6.892-3.08 13.11-3.325l6.592-.222v-1.95c0-3.89-2.615-5.54-6.815-5.54-4.197 0-6.846 1.484-7.466 3.91a.803.803 0 0 1-.798.577h-6.505a.802.802 0 0 1-.634-.277.81.81 0 0 1-.196-.664c.974-5.764 5.74-10.14 15.9-10.14 10.794 0 14.683 5.02 14.683 14.604V70.4a.792.792 0 0 1-.06.32.822.822 0 0 1-.77.523h-6.572a.842.842 0 0 1-.59-.244.845.845 0 0 1-.24-.595v-1.52a.634.634 0 0 0-.09-.38.633.633 0 0 0-.3-.25.644.644 0 0 0-.39-.02.626.626 0 0 0-.327.22c-1.962 2.137-5.153 3.69-10.24 3.69-7.457.02-12.41-3.88-12.41-10.617zm23.826-4.433V55.52l-8.532.444c-4.5.232-7.126 2.105-7.126 5.252 0 2.848 2.405 4.433 6.594 4.433 5.696 0 9.064-3.083 9.064-8.546v-.01zm14.772 23.626v5.927a.855.855 0 0 0 .609.864c1.16.317 2.357.463 3.558.434 6.37 0 12.19-2.327 15.514-11.392l14.625-39.018a.846.846 0 0 0-.113-.753.848.848 0 0 0-.675-.354H395.9a.831.831 0 0 0-.798.577l-8.056 24.71a.832.832 0 0 1-.314.4c-.143.1-.312.152-.485.152s-.34-.053-.484-.15a.886.886 0 0 1-.313-.4l-9.286-24.78a.849.849 0 0 0-.31-.39.847.847 0 0 0-.477-.152h-6.648a.844.844 0 0 0-.786 1.109L381.62 72.63a.82.82 0 0 1 0 .565l-.432 1.363a7.878 7.878 0 0 1-7.945 5.621 16.409 16.409 0 0 1-3.048-.29.847.847 0 0 0-.996.834z",clipRule:"evenodd"})))};function f({color:e="white",inline:t,size:n="medium"}){const r=(0,o.q)(),c="branded"===e?l.nx.toRgb():e;return a.default.createElement(m,{className:i()({[s.inline]:t},s[n]),style:{fill:c},title:r("shop_pay.logo_title","Shop Pay")})}},61853:(e,t,n)=>{n.d(t,{D:()=>i});var a=n(93211),o=n(78567),r=n(13194);function i({hasError:e,children:t}){const n=(0,r.L)(),i=(0,a.q)(),l=e?`${i("general.error_page_title","Erreur")} - `:"",s=n?i("general.full_title",{pageTitle:`${l}${t}`,shopName:n.name},"{{pageTitle}} - {{shopName}} - Paiement"):i("general.loading_title","Paiement - {{shopName}}");return(0,o.Z)(s),null}},66754:(e,t,n)=>{n.d(t,{IW:()=>i,qw:()=>o,w1:()=>r});var a=n(55399);const o="RELOADING",r=(0,a.cp)(null),i=(0,a.cp)(!1)},19080:(e,t,n)=>{n.r(t),n.d(t,{default:()=>mr});var a=n(59748),o=n(93211),r=n(25435),i=n(86123),l=n(96555),s=n(13866),c=n(39192),d=n(31445),u=n(1511),p=n(8428),m=n(76304),f=n(61853),h=n(41250),g=n(38027);const y=["GooglePay","PayPal","Venmo","FacebookPay"];function v({id:e}){return(0,g.RC)({id:e,stage:({pendingComponents:e})=>y.some((t=>e.has(t)))?h.H.Usable:h.H.Complete}),null}var E=n(77291),b=n(40915),_=n(6664);function k(){const e=(0,_.I)(),t=(0,o.q)();if(!e)return null;const{firstName:n,lastName:r,email:i,companyName:l}=e,c=n||r;return a.default.createElement(s.E,{spacing:"extraTight"},a.default.createElement(p.x,null,c&&t("general.display_name",{firstName:n??"",lastName:r??""},"{{firstName}} {{lastName}}")),a.default.createElement(d.g,{spacing:"extraTight"},l&&a.default.createElement(p.x,{appearance:"subdued",size:"small"},l),i&&a.default.createElement(a.default.Fragment,null,a.default.createElement(p.x,{appearance:"subdued",size:"small"},"•"),a.default.createElement(p.x,{appearance:"subdued",size:"small"},i))))}let C=function(e){return e.Email="EMAIL",e.Phone="PHONE",e}({}),P=function(e){return e.Historical="HISTORICAL",e.Initial="INITIAL",e}({});var w=n(33335),S=n(13194),A=n(20741),I=n(55667),L=n(51224),M=n(61918);const T=/\S+@\S+\.\S{2,}/;function x(e,t){if(!(0,M.Um)(e))return t}function z(e,t){return T.test(e)?void 0:t}var R=n(55399),N=n(13713);function q({onValid:e,children:t}){const n=(0,L.xP)(),o=(0,L.YC)(new Set),r=(0,a.useMemo)((()=>(0,R.cp)((e=>{const t=e(o);let n=!0;for(const[a,o]of t)o(e(a))&&(n=!1);return{valid:n}}))),[o]),i=(0,a.useCallback)(((e,t)=>{const a=[e,t];return n.write(o,(e=>{const t=new Set(e);return t.add(a),t})),()=>{n.write(o,(e=>{const t=new Set(e);return t.delete(a),t}))}}),[n,o]);(0,a.useEffect)((()=>n.subscribe(r,(({value:t})=>{t.valid&&e()}))),[n,r,e]);const l=(0,a.useMemo)((()=>({registerValidator:i})),[i]);return a.default.createElement(N.O.Provider,{value:l},t)}var B=n(83009),F=n(40971),O=n(37694),D=n(95920),G=n(73967);const j=(0,a.createContext)(null),V=({children:e})=>{const[t,n]=(0,a.useState)(void 0),[o,r]=(0,a.useState)(void 0),[i,l]=(0,a.useState)(void 0),[s,c]=(0,a.useState)(void 0),[d,u]=(0,a.useState)(void 0),p=(0,a.useCallback)(((e,t)=>{n(e),l(t)}),[n,l]),m=(0,a.useCallback)((e=>{r(e)}),[r]),f=(0,a.useCallback)(((e,t)=>{c(e),u(t)}),[c,u]),h=(0,a.useMemo)((()=>({prefetchTime:t,prefetchTimeHistorical:o,prefetchAddress:i,negotiateTime:s,negotiateAddress:d,setPrefetchPoint:p,setPrefetchPointHistorical:m,setNegotiatePoint:f})),[t,o,i,s,d,p,m,f]);return a.default.createElement(j.Provider,{value:h},e)};let H=function(e){return e.Autocomplete="PREFETCH_SHIPPING_RATES_ON_AUTOCOMPLETE",e.HistoricalAddress="PREFETCH_SHIPPING_RATES_USING_HISTORICAL_ADDRESS",e}({});var U=n(65467),$=n(70578),W=n(1335);const J=()=>(new Date).valueOf(),Q=(e,t)=>e.name===t.name&&e.city===t.city&&e.countryCode===t.countryCode&&e.zoneCode===t.zoneCode&&e.postalCode===t.postalCode&&e.address1===t.address1&&e.address2===t.address2&&e.company===t.company&&e.firstName===t.firstName&&e.lastName===t.lastName&&e.phone===t.phone,Z=()=>{const e=(0,G.a)(),{shippingAddress:t}=(0,I.gG)(),n=(0,L.xP)(),o=(()=>{const{id:e}=(0,S.L)(),{checkoutSessionIdentifier:t,sourceId:n}=(0,W.Lk)(),o=t||n||"",r=(new Date).valueOf(),i=`${o}-${r}`;return(0,a.useCallback)(((t,n,a)=>({schemaId:U.gn.PrefetchOnAddressAutocomple,payload:{eventId:i,prefetchingOfRatesProjectName:"prefetch_on_address_autocomplete",prefetchingOfRatesProjectVersion:"v2",shopId:parseInt((0,$.Bp)(e),10),checkoutToken:o,successfulEarlyFetch:a,prefetchingRoutingRequestSubmittedAt:t,normalRoutingRequestSubmittedAt:n}})),[o,e,i])})(),r=(()=>{const{id:e}=(0,S.L)(),{checkoutSessionIdentifier:t,sourceId:n}=(0,W.Lk)(),o=t||n||"",r=(new Date).valueOf(),i=`${o}-${r}`;return(0,a.useCallback)(((t,n)=>({schemaId:U.gn.PrefetchUsingHistoricalAddress,payload:{eventId:i,prefetchingOfRatesProjectName:"prefetch_using_historical_addresses",prefetchingOfRatesProjectVersion:"v1",shopId:parseInt((0,$.Bp)(e),10),checkoutToken:o,prefetchingRoutingRequestSubmittedAt:t,normalRoutingRequestSubmittedAt:n}})),[o,e,i])})(),i=(0,a.useContext)(j),l=(0,a.useCallback)((e=>{const a=J();if(e===H.Autocomplete){const e=n.read(t).value;i?.setPrefetchPoint(a,e)}else e===H.HistoricalAddress&&i?.setPrefetchPointHistorical(a)}),[i,t,n]),s=(0,a.useCallback)((()=>{const a=i?.prefetchTime,r=i?.prefetchAddress,l=i?.negotiateTime,s=i?.negotiateAddress;if(void 0===a||void 0===r)return;const c=J(),d=n.read(t).value,u=void 0!==s&&!Q(d,s);if(!l||u){const t=Q(r,d);e.record(o(a,c,t)),i?.setNegotiatePoint(c,d)}}),[e,i,t,n,o]),c=(0,a.useCallback)((()=>{const t=i?.prefetchTimeHistorical;t&&(e.record(r(t,J())),i?.setPrefetchPointHistorical(void 0))}),[e,i,r]);return{capturePrefetch:l,captureNegotiate:(0,a.useCallback)((()=>{s(),c()}),[s,c])}};var X=n(68184),K=n(21545),Y=n(65912),ee=n(52376),te=n(90889),ne=n(66754),ae=n(50716),oe=n(47501),re=n(86749),ie=n(23608),le=n(20613),se=n(32893);function ce(){const e=(0,ae.w)(oe.DJ),{shopPay:t}=(0,re.Uc)(),n=(0,re.Jw)(),o=(0,te.U)(),r=(0,ie.m)("simulated"),{checkoutSessionIdentifier:i=""}=(0,W.Lk)(),[l]=(0,L.KO)(ne.IW),s=o.searchParams.get(se.Ql);return(0,a.useEffect)((()=>{(0,le.d8)(se.HG,s?i:"false")}),[]),(0,a.useMemo)((()=>Boolean(!r&&!l&&t()&&(e||!n)&&!s)),[r,l,t,e,n,s])}var de=n(20658),ue=n(45878);const pe=(0,de.L)({load:()=>(0,ue.R)((()=>n.e(232).then(n.bind(n,26062)))),id:()=>26062});function me({showLogoutLink:e,logoutUrl:t}){const n=(0,o.q)(),r=(0,ee.Zo)(),i=ce(),[l,c]=(0,a.useState)(!1),u=(0,ie.m)("simulated"),{email:f,phone:h,firstName:g,lastName:y}=("CustomerProfile"===r?.__typename?r:void 0)??{},v=g||y,{phone:E}=(0,I.gG)(),b=(0,L.xP)(),_=`(${f??h})`;return(0,a.useEffect)((()=>{b.write(E,"")}),[]),a.default.createElement(a.default.Fragment,null,a.default.createElement(d.g,{blockAlignment:"center"},a.default.createElement(s.E,{spacing:"small400"},a.default.createElement(p.x,null,v?n("general.display_name",{firstName:g??"",lastName:y??""},"{{firstName}} {{lastName}}"):null," ",_),e&&!u?a.default.createElement(d.g,null,a.default.createElement(m.r,{to:t},n("customer_account.sign_out_link_label","Déconnexion"))):null)),f&&i&&a.default.createElement(pe,{email:f,open:l,showPopover:e=>{c(e)}}))}var fe=n(87462),he=n(98508),ge=n(62586),ye=n(37303),ve=n(65963),Ee=n(23084),be=n(8287);const _e=new Set([Ee.j.BuyerIdentityPhoneNumberDoesNotMatchExpectedPattern,Ee.j.BuyerIdentityEmailDoesNotMatchExpectedPattern,Ee.j.BuyerIdentityEmailRequired]);var ke=n(29919),Ce=n(73418),Pe=n(46409);const we="/set_tracking_consent.json";const Se={MobilePhoneIcon:"tfJbE",wobble:"FUooI","scale-up-bounce":"iy7RR"};function Ae({onPress:e}){const t=(0,o.q)();return a.default.createElement(c.z,{accessibilityLabel:t("shop_pay.verification_toggle","Activer l’entrée SMS de Shop Pay pour utiliser la page de paiement de Shop Pay"),onPress:e},a.default.createElement("div",{className:Se.MobilePhoneIcon},a.default.createElement(u.JO,{source:"mobile",size:"fill"})))}var Ie=n(39147),Le=n(8792);const Me=new Set([Ee.j.BuyerIdentityMissingContactMethod,Ee.j.BuyerIdentityEmailDoesNotMatchExpectedPattern,Ee.j.BuyerIdentityEmailDomainIsInvalid]);function Te({addressType:e="shipping",disabled:t,label:n,onInputValueChange:r,caretPosition:i,type:l="email",violationMessage:s,autoFocus:c=!1,onInlineValidation:d}){const u=(0,o.q)(),p=ce(),m=function(e,t){const n=(0,o.q)(),{email:a}=(0,I.gG)(),r=(0,L.xP)(),[i]=(0,Le.Ew)();return(0,D.lH)((t=>{if("error"===t.type&&!i)for(const n of t.violations){if("UnprocessableTermViolation"!==n.__typename||!Me.has(n.code))continue;const t=e||(n.localizedMessage??n.nonLocalizedMessage);r.write(be.WJ,t)}})),(0,M.qQ)(a,be.WJ,(e=>{if(t)return t(e);const a=x(e,n("field_errors.email_blank","Saisissez une adresse e-mail")),o=z(e,n("field_errors.email_invalid","Entrez une adresse e-mail valide"));return a||o}),Ie.VO.InvalidContactMethod),(0,M.a8)(a,be.WJ,t)}(s,d),[f,h]=(0,a.useState)(m.value??""),g=(0,a.useRef)(""),y=(0,a.useRef)(null),[v,E]=(0,a.useState)(!1),[b,_]=(0,a.useState)(!1),k=(0,a.useCallback)(((e,t)=>{t&&(g.current=t),_(!e),E(e)}),[g]);(0,a.useEffect)((()=>{m.value.trim()!==g.current&&(_(!1),E(!1))}),[m.value,g]),(0,a.useEffect)((()=>{_(!1)}),[f]),(0,a.useEffect)((()=>{void 0!==i&&y.current&&m?.value&&i<m.value.length&&y.current.setSelectionRange(i,i)}),[m,i]),function(){const{email:e}=(0,I.gG)();(0,L.bQ)(e,(e=>{if("invalid"===z(e,"invalid"))return null;if(!function(){const e=document.cookie.includes("_tracking_consent="),t=document.cookie.includes("_cmp_a=");return e&&t}())return null;const t={headers:{"content-type":"application/json"},body:JSON.stringify({sync_consent:{email:e}}),method:"POST"};fetch(we,t).catch((()=>{}))}))}();const C=a.default.createElement(Ce.nv,(0,fe.Z)({label:n??u("contact.email_label","Adresse e-mail"),id:"email",name:"email",type:l,ref:y,autocomplete:{field:"email",group:e},disabled:t,autoFocus:c},m,{onInput:async e=>{const t=e.trim();m.onInput(t),h(t),r&&r(t,y?.current?.selectionStart||0)},error:m.error,protectedInput:!0}));return p?a.default.createElement(a.default.Fragment,null,a.default.createElement(Pe.E,{columns:["fill","auto"],spacing:b?"none":void 0},C,b&&a.default.createElement(Ae,{onPress:()=>k(!0)})),a.default.createElement(pe,{popoverActivator:y,email:f,open:v,showPopover:k,showToggle:_})):C}var xe=n(14257);function ze({onInputTypeChange:e,onInlineEmailValidation:t,onInlinePhoneValidation:n}){const{shippingRequired:r}=(0,re.Ry)(),[i]=(0,ye.LB)(),{getContactInfoOptions:l}=(0,S.L)(),{geolocation:s}=(0,he.Q)(),c=(0,o.q)(),d=(0,re.Jw)(),{email:u,phone:p,shippingAddress:m}=(0,I.gG)(),f=(0,L.Dv)(m.fields.countryCode),[h]=(0,L.KO)(p),[g]=(0,L.KO)(u),y=(0,ke.yD)(),[v,E]=(0,a.useState)(""===h||""!==g&&g?C.Email:C.Phone),[b,_]=(0,a.useState)(0),k=(0,L.xP)(),P=c("contact.email_or_phone_label","E‑mail ou numéro de portable"),w=c("field_errors.email_or_phone_invalid","Entrez une adresse e-mail ou un numéro de téléphone mobile valide"),A=function(e,t,n){const{phone:a}=(0,I.gG)(),o=(0,L.xP)();return(0,D.lH)((t=>{if("error"===t.type)for(const n of t.violations)if("UnprocessableTermViolation"===n.__typename&&_e.has(n.code))if(n.code===Ee.j.BuyerIdentityEmailRequired){const e=n.localizedMessage??n.nonLocalizedMessage;o.write(be.mX,e)}else{const t=e||(n.localizedMessage??n.nonLocalizedMessage);o.write(be.mX,t)}})),(0,M.a8)(a,be.mX,n===C.Phone?t:void 0)}(w,n,v),T=async(e,t)=>{y(!0),z(e),void 0!==t&&_(t)};(0,a.useEffect)((()=>{(h||g)&&y(!0)}),[y,h,g]);const x=l(f),z=(0,a.useCallback)((async e=>{if(""===e)return;const t=d||!x.includes(C.Phone)||/([A-Za-z]|\.|@)/.test(e);t&&v!==C.Email?(E(C.Email),k.write(p,""),k.write(u,e)):t||v===C.Phone||(E(C.Phone),k.write(u,""),k.write(p,e))}),[k,x,u,p,d,v]);(0,a.useEffect)((()=>{e&&e(v)}),[e,v]),(0,a.useEffect)((function(){!x.includes(C.Phone)&&v!==C.Email&&(E(C.Email),""===g&&""!==h&&(k.write(p,""),k.write(u,h)))}),[x]),(0,ge.$u)((async({reason:e,parts:t})=>"progression"!==e?{behavior:"allow"}:{behavior:"allow",perform(){""!==k.read(t.phone).value&&k.read(t.deliveryLines).value.forEach((e=>{k.write(e,{...k.read(e).value,deliveryMethodOptions:{...k.read(e).value.deliveryMethodOptions,phone:k.read(t.phone).value}})}))}}));const R=(0,te.U)(),N=(0,ve.wG)(),q=!R.pathname.includes(N.stockProblems()),B=(0,a.useMemo)((()=>s.default?.code??f??s.country.code),[s,f]);if(v===C.Phone)return a.default.createElement(xe.$,(0,fe.Z)({autoFocus:q,countryCode:B,label:P,onInputValueChange:T,caretPosition:b,inputMode:"text"},A));const F=!d&&x.includes(C.Phone)?{label:P,onInputValueChange:T,violationMessage:w,type:"text",caretPosition:b}:void 0;return a.default.createElement(Te,(0,fe.Z)({autoFocus:q,addressType:r?"shipping":"billing",disabled:"loading"===i.status},F,{onInlineValidation:t}))}var Re=n(32409);function Ne(){const e=(0,o.q)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(p.x,{appearance:"subdued",size:"small",accessibilityLive:"polite"},e("marketing.sms.disclaimer.description_transactional_html",{privacy_policy_modal_link:a.default.createElement(Re.i,{handle:"privacy-policy"}),terms_of_service_modal_link:a.default.createElement(Re.i,{handle:"terms-of-service"})},"Vous recevrez peut-être des SMS concernant la confirmation de votre commande et des mises à jour du statut de son expédition. Répondez STOP pour vous désabonner. Répondez HELP pour obtenir de l’aide. La fréquence des messages varie. Des frais de messagerie et de données peuvent s’appliquer. Consultez notre %{privacy_policy_modal_link} et nos %{terms_of_service_modal_link}.")))}function qe(){const e=(0,o.q)(),{emailMarketing:t}=(0,S.L)(),{loggedIn:n,showLogoutLink:r,logoutUrl:i}=(0,A.BP)(),[l,s]=(0,a.useState)(Be(t,C.Email)),[c,d]=(0,a.useState)(!1),{shippingAddress:u}=(0,I.gG)(),p=(0,L.Dv)(u.fields.countryCode),m=(0,O.fD)(),{negotiate:f}=(0,D.JL)(),h=(0,a.useCallback)((e=>{s(Be(t,e)),d(!1)}),[t]),g=function(){const{getContactInfoOptions:e}=(0,S.L)(),{shippingAddress:t}=(0,I.gG)(),n=(0,L.Dv)(t.fields.countryCode),r=(0,o.q)();return(0,a.useMemo)((()=>e(n).includes(C.Phone)?r("field_errors.email_or_phone_blank","Saisissez une adresse e-mail ou un numéro de téléphone"):r("field_errors.email_blank","Saisissez une adresse e-mail")),[e,n,r])}(),y=(0,a.useCallback)((t=>{const n=x(t,g),a=z(t,e("field_errors.email_invalid","Entrez une adresse e-mail valide"));return n||a}),[g,e]),v=(0,a.useCallback)((t=>{const n=x(t,e("field_errors.email_or_phone_blank","Saisissez une adresse e-mail ou un numéro de téléphone"));if(n)return d(!n),n;const a=m(t,p??"ZZ")?void 0:e("field_errors.address_phone_blank","Entrez un numéro de téléphone valide");return d(!a),a}),[e,m,p]),E=(0,B.pF)(),b=(0,F.e)(),{capturePrefetch:_}=Z(),k=(0,X.vQ)(),w=(0,a.useCallback)((()=>{_(H.HistoricalAddress),f(void 0,{silenceViolations:["all"],silenceValidations:!0,include:["email","phone"],prefetch:!k,customizeNegotiation:e=>!k&&e.delivery?{...e,delivery:{...e.delivery,prefetchShippingRatesStrategy:P.Historical}}:e}),E("sectionComplete",{section:"contact",timestamp:new Date}),b({type:"section_complete",section:"contact"})}),[_,f,k,E,b]);return a.default.createElement(K.l,null,n?a.default.createElement(me,{showLogoutLink:r,logoutUrl:i}):a.default.createElement(q,{onValid:w},a.default.createElement(ze,{onInputTypeChange:h,onInlineEmailValidation:y,onInlinePhoneValidation:v})),l?a.default.createElement(Y.z,null):null,c?a.default.createElement(Ne,null):null)}function Be(e,t){return e!==w.h.Off&&t===C.Email}n(57658);var Fe=n(84686),Oe=n(57967),De=n(15926),Ge=n(77901),je=n(59525),Ve=n(55391),He=n(10678),Ue=n(1531),$e=n(85574),We=n(53037),Je=n(6346),Qe=n(4152),Ze=n(81473),Xe=n(88710),Ke=n(40431);function Ye(e,t){return t.every((t=>e.includes(t)))}function et({options:e,selected:t,select:n}){const r=(0,o.q)(),{value:i,loading:l}=(0,ee.j2)(),s=(0,Ke.ZF)(i,Fe.i.OneTimePurchase),c=(0,X.vQ)(),p=(0,ee.RL)()?.value?.lines,m=!(void 0!==(0,Ke.Z)(p,Xe.F.ApplePay))&&"available"===s?.status&&!l&&s?.hasDeliveryLineChange;return a.default.createElement(a.default.Fragment,null,m?a.default.createElement($e.j,{status:"critical",title:r("shipping_errors.shipping_method","Les options d’expédition de votre commande ont changé. Veuillez revoir votre sélection et réessayer.")}):null,a.default.createElement(We.X,{id:"delivery_strategies",title:r("general.choose_delivery_strategy","Choisir un mode de livraison"),titleHidden:!0,selectedItems:t,onChange:n},e.map((e=>a.default.createElement(Je.Wx,{id:e.id,key:e.id,label:e.label},c?a.default.createElement(a.default.Fragment,null,a.default.createElement(Qe.T,{blockAlignment:"center"},a.default.createElement(Je.Hj,null,a.default.createElement(Ze.a,null,e.label)),a.default.createElement(Qe.T,{inlineAlignment:"end"},a.default.createElement(u.JO,{source:e.icon,appearance:Ye(t,e.value)?"interactive":"subdued"})))):a.default.createElement(d.g,{blockAlignment:"center"},a.default.createElement(u.JO,{source:e.icon}),a.default.createElement(Je.Hj,null,a.default.createElement(Ze.a,null,e.label))))))))}var tt=n(15869);const nt=()=>{const e=(0,G.a)(),t=(0,W.Lk)(),{id:n}=(0,S.L)(),o=(0,ee.Zo)(),{negotiating:r,method:i}=(0,Ve.HD)(),l=(0,re.aJ)(),s=(0,Ue.a)();(0,a.useEffect)((()=>{r||i!==Oe.l.PickUp||e.record({schemaId:"local_pickup_checkout/3.1",payload:{checkoutToken:t.checkoutSessionIdentifier||"",eventType:"checkout_pickup_tab_selected",shopId:parseInt((0,$.Bp)(n),10),numberLocationsFound:l?.methods.length,userId:o?.id?parseInt((0,$.Bp)(o.id),10):void 0,checkoutSurface:s?"shop_pay":"guest_checkout"}})}),[o?.id,s,l?.methods.length,i,e,r,t.checkoutSessionIdentifier,n])};function at(){return nt(),(0,tt.Q)(),null}var ot=n(90961),rt=n(49036);let it=function(e){return e.Truck="truck",e.Store="store",e.Marker="marker",e}({});const lt=(0,R.cp)(!1);function st({children:e}){const t=(0,o.q)(),{enabledDeliveryMethods:n}=(0,S.L)(),{negotiate:r}=(0,D.JL)(),i=(0,re.MW)(),[l,s]=(0,L.KO)(lt),[,c]=(0,L.KO)((0,I.gG)().billingAddressOption),{clearBillingAddress:d}=(0,He.DO)(),u=(0,Ue.a)(),[p,m]=(0,Ge.K2)(Fe.i.OneTimePurchase),[,f]=(0,Ge.wI)(Fe.i.OneTimePurchase),[,h]=(0,Ge.K2)(Fe.i.Subscription),[,g]=(0,Ge.wI)(Fe.i.Subscription),{correctShippingAddress:y}=function(){const[,e]=(0,L.KO)((0,I.gG)().shippingAddress),t=(0,ot.er)().isRequired("phone"),n=(0,L.xP)(),o=(0,Ue.a)(),r=(0,a.useCallback)((()=>{const a=n.read(rt.q.selectedShippingAddress).value;if(!a?.address)return;const o=n.read(rt.q.phoneNumber).value;e({...a?.address,phone:t&&!a?.address.phone?o:a?.address.phone})}),[t,e,n]);return{correctShippingAddress:(0,a.useCallback)((e=>{o&&e.includes(Oe.l.Shipping)&&r()}),[r,o])}}(),v=(0,L.xP)(),{loading:E}=(0,je.pq)(),b=(0,a.useCallback)((e=>{const t=p.includes(Oe.l.Shipping);u||t||!e.includes(Oe.l.Shipping)||(d(),c("shipping")),m(e),y(e),h(e),f(void 0),g(void 0),s(!0),r(void 0,{include:["deliveryLines","merchandiseLines"],onComplete:e=>{const t=v.read(E).value.has("deliveryNext");if("stale"===e.status&&t){const e=v.subscribe(E,(({value:t})=>{t.has("deliveryNext")||(s(!1),e())}))}else s(!1)}})}),[p,u,m,y,h,f,g,s,r,d,c,v,E]),_=n.includes(Oe.l.Local),k=(0,re.eS)(De.k.Delivery,Ie.sC.SelectedDeliveryStrategy),C=(()=>{const e=[];return n?(n.includes(Oe.l.Shipping)&&e.push({id:Oe.l.Shipping,value:_?[Oe.l.Shipping,Oe.l.Local]:[Oe.l.Shipping],label:t("delivery_options.ship","Expédier"),icon:it.Truck}),n.includes(Oe.l.PickUp)&&e.push({id:Oe.l.PickUp,value:[Oe.l.PickUp],label:t("delivery_options.pick_up","Récupérer"),icon:it.Store}),n.includes(Oe.l.PickupPoint)&&!i&&e.push({id:Oe.l.PickupPoint,value:[Oe.l.PickupPoint],label:t("delivery_options.pickup_point_method_definition","Expédier au point relais"),icon:it.Marker}),k?e.filter((e=>p.includes(e.id))):e):e})();(0,a.useEffect)((()=>{if(C.length>=1&&(!p.includes(Oe.l.Shipping)&&!p.includes(Oe.l.Local)||!n.includes(Oe.l.Shipping))){const e=C.find((e=>JSON.stringify(e.value)===JSON.stringify(p)));b(e?e?.value:C[0].value)}}),[]);const P=C.length>1&&a.default.createElement(et,{options:C,selected:p,select:e=>{const t=C.find((t=>t.id===e[0]));t&&b(t.value)}}),w=(0,a.useMemo)((()=>({negotiating:l,method:p[0]})),[l,p]);return a.default.createElement(Ve.oF.Provider,{value:w},a.default.createElement(at,null),a.default.createElement(Ve.DV.Provider,{value:P||void 0},e))}var ct=n(65674),dt=n(75077),ut=n(24853);function pt(){const e=(0,o.q)(),[t,n]=(0,a.useState)((()=>"true"===(0,le.ej)(ut.Rb))),r=(0,ee.Zo)(),{checkoutChannelConfiguration:i,shopPayEnabled:l}=(0,S.L)(),s=Boolean(r),c=Boolean(i),d=!l&&!s&&!c,u=(0,a.useCallback)((e=>{n(e)}),[n]);return(0,a.useEffect)((()=>{(t?ut.F2:ut.w8)()}),[t]),d?a.default.createElement(dt.X,{id:"save_shipping_information",name:"save_shipping_information",checked:t,onChange:u},e("customer_account.save_my_information_label","Sauvegarder mes coordonnées pour la prochaine fois")):null}var mt=n(57126),ft=n(46818),ht=n(57884),gt=n(11127),yt=n(23403),vt=n(80040),Et=n(66397);const bt=()=>{switch((0,vt.F)("checkout-sms-checkbox-experiment")){case Et.G3.Control:return{showBox:!1,showPhoneField:!1,showHeader:!1};case Et.G3.TestGroupA:return{showBox:!0,showPhoneField:!1,showHeader:!1};case Et.G3.TestGroupB:return{showBox:!0,showPhoneField:!1,showHeader:!0};case Et.G3.TestGroupC:return{showBox:!1,showPhoneField:!0,showHeader:!1};default:return{showBox:!1,showPhoneField:!1,showHeader:!1}}},_t="SmsOptinCheckbox";function kt(){const e=(0,o.q)(),t=(0,ve.wG)(),{smsMarketing:n}=(0,S.L)(),r=bt(),{phone:i,acceptSmsMarketing:c,smsMarketingPhone:d,shippingAddress:u,locationAddress:p}=(0,I.gG)(),{countryCode:f}=(0,L.Dv)(p),[h,g]=(0,L.KO)(c),y=(0,ee.Zo)(),[v]=(0,L.KO)(i),[E]=(0,L.KO)(u.fields.phone),[b,_]=(0,L.KO)(d);function k(e){g(e),_(e?v||(E??""):"")}(0,a.useEffect)((()=>{b||_(v||(E??""))}),[]),(0,L.bQ)(i,(e=>{e&&!y&&_(e)}));const C=function(e){const{smsMarketingPhone:t}=(0,I.gG)(),n=(0,L.xP)(),a=(0,M.N4)();return(0,D.lH)((t=>{if("error"===t.type)for(const o of t.violations){if("UnprocessableTermViolation"!==o.__typename||!Ct.has(o.code))continue;const t=e||(o.localizedMessage??o.nonLocalizedMessage);n.write(a,t)}})),(0,M.a8)(t,a)}(e("field_errors.sms_marketing_phone_invalid","Saisir un numéro de téléphone valide")),P=(0,X.vQ)();if(n===yt.f.Off)return null;const w=Boolean(y),A=Boolean(!v),T=a.default.createElement(Ze.a,{size:"small",appearance:"subdued"},e("marketing.sms.disclaimer.description_html",{privacy_policy_link:a.default.createElement(m.r,{external:!0,to:t.storefront("policies/privacy-policy"),appearance:"monochrome"},e("marketing.sms.disclaimer.privacy_policy","Politique de confidentialité")),terms_of_service_link:a.default.createElement(m.r,{external:!0,to:t.storefront("policies/terms-of-service"),appearance:"monochrome"},e("marketing.sms.disclaimer.terms_of_service","Conditions d'utilisation"))},"En vous inscrivant aux envois par SMS, vous acceptez de recevoir des messages de marketing automatisés au numéro de téléphone fourni, notamment des rappels de panier. Le consentement n'est pas une condition d'achat. Répondez STOP pour vous désabonner. Répondez HELP pour obtenir de l'aide. La fréquence des messages varie. Des frais de messagerie et de données peuvent s'appliquer. Consultez notre %{privacy_policy_link} et nos %{terms_of_service_link}."));return a.default.createElement(a.default.Fragment,null,r.showHeader?a.default.createElement(mt.G,{padding:["large200","none","none","none"]},a.default.createElement(l.X,null,e("marketing.sms.get_offers_by_text","Recevoir des offres par SMS"))):null,P?a.default.createElement(s.E,{spacing:"base"},a.default.createElement(We.X,{allowMultiple:!0,id:"SmsOptIn",onChange:e=>{k(e.includes(_t))},selectedItems:h?[_t]:[]},a.default.createElement(Je.Wx,{id:_t,label:e("marketing.accept_sms_checkbox_label","Envoyez-moi les nouvelles et les offres par SMS"),details:a.default.createElement(ft.w,{controlledBy:_t},a.default.createElement(s.E,{padding:["none","none","base","none"]},a.default.createElement(xe.$,(0,fe.Z)({countryCode:f??"",label:e("marketing.sms.mobile_phone_number","Numéro de téléphone mobile"),disabled:!w&&!A,caretPosition:0,prefillCountryCode:!0,icon:"mobile"},C))),T)},a.default.createElement(Je.Hj,null,a.default.createElement(Ze.a,null,e("marketing.accept_sms_checkbox_label","Envoyez-moi les nouvelles et les offres par SMS")))))):a.default.createElement(mt.G,{border:r.showBox?"base":void 0,padding:r.showBox?"large100":void 0,borderRadius:r.showBox?"base":void 0},a.default.createElement(dt.X,{id:"sms_marketing_opt_in",name:"sms_marketing_opt_in",checked:h,onChange:k,"aria-expanded":Boolean(h),"aria-controls":"acceptSmsMarketingCollapsible"},e("marketing.accept_sms_checkbox_label","Envoyez-moi les nouvelles et les offres par SMS")),a.default.createElement(ht.u,{open:h||r.showPhoneField,id:"acceptSmsMarketingCollapsible"},a.default.createElement(mt.G,{padding:["base","none","none","large200"]},a.default.createElement(s.E,{padding:["none","none","none","small200"]},a.default.createElement(s.E,{maxInlineSize:gt.bg.when({viewportInlineSize:{min:"small"}},360)},a.default.createElement(xe.$,(0,fe.Z)({countryCode:f??"",label:e("marketing.sms.mobile_phone_number","Numéro de téléphone mobile"),disabled:!w&&!A,caretPosition:0,prefillCountryCode:!0,icon:"mobile"},C))),T)))))}const Ct=new Set([Ee.j.BuyerIdentityPhoneNumberDoesNotMatchExpectedPattern]);var Pt=n(2235),wt=n(7906),St=n(57284),At=n(127),It=n(20948),Lt=n(45711),Mt=n(18763),Tt=n(83325),xt=n(36802),zt=n(28968),Rt=n(85107),Nt=n(94123);const qt="AmazonPayButtonContainer";function Bt(){const{value:e}=(0,ee.Ew)(),{inMemoryAmazonPayParts:t}=(0,xt.H)(),n=e?.find((e=>"walletsPlatform"===e.type&&e.name===Nt.P3.AmazonPay)),{configurationParams:o}=n||{},r=(0,L.Dv)(t.sdkStatus),[i,l]=(0,L.KO)(t.buttonStatus),s=(0,L.xP)(),c="available"===r.status&&r.sdk.Pay;return(0,a.useEffect)((()=>{const{buttonStatus:e}=t;return s.write(e,{status:"not_rendered"}),()=>{"rendered"===s.read(e).value.status&&s.write(e,{status:"not_rendered"})}}),[]),(0,a.useEffect)((()=>{n&&c&&"rendered"!==i.status&&document.getElementById(qt)&&(c.renderButton(`#${qt}`,o),l({status:"rendered"}))}),[c,o,n,l,i.status]),a.default.createElement("div",{id:qt})}var Ft=n(9377),Ot=n(75138),Dt=n(75059),Gt=n(44586),jt=n(55165),Vt=n(45695),Ht=n(69349),Ut=n(74577),$t=n(73774);function Wt({enabled:e}){const{value:t}=(0,ee.Yh)(),{selectedBillingAddress:n}=(0,Ut.w)(),{eligible:o}=(0,Ht.X)(),[,r]=(0,L.KO)(rt.q.showShopCashTerms),i=(0,$t.J)(n.countryCode),l=e&&o&&i&&null!=t?.amount&&t?.amount>0,{variant:s}=function({enabled:e}){const t=(0,Ot.k)(),{checkoutSessionIdentifier:n,sourceId:o}=(0,W.Lk)(),r=n||o,i=(0,Ft.b)().startsWith("en"),l=(0,a.useMemo)((()=>({subjectId:r})),[r]),s=e&&!t&&i;let c=(0,Vt.K)({handle:Gt.pf,subject:l,controlVariant:Et.Wy.Control,enabled:s&&!Dt.y});s||(c=Et.Wy.Control);const d=(0,jt.T)({disabled:!s,key:"cash_msg",variants:Object.values(Et.Wy)});return d&&(c=d),{variant:c}}({enabled:l}),c=(0,a.useMemo)((()=>({variant:s,needsLargerButtonGaps:s!==Et.Wy.Control&&s!==Et.Wy.Treatment4,showShopCashRewardMessaging:s!==Et.Wy.Control})),[s]);return(0,a.useEffect)((()=>{c.showShopCashRewardMessaging&&setTimeout((()=>r(!0)),0)}),[c.showShopCashRewardMessaging,r]),c}var Jt=n(94184),Qt=n.n(Jt),Zt=n(91757),Xt=n(42948),Kt=n(78452),Yt=n(30316),en=n(24799);const tn={ApplePayButton:"Mh1MJ",dark:"OiqsO",light:"wxoTu"};var nn=n(66259),an=n(17936);function on({subtotal:e,duties:t,taxes:n,deliveryNext:a,discountLines:o,paymentLines:r,tipLines:i,lineItemsLabels:l,deliveryOptionGroupTypeLabels:s,deliveryMethodTitlePrefixes:c,formattedRecurringTotals:d,formattedRecurringTotalTooltip:u}){const p=void 0===e?[]:[{label:l.subtotal,amount:e?(0,Xt.Dh)(e.amount):void 0}],m=(0,Ke.$_)(a).map((({line:e,method:t},n,a)=>({label:rn(e,t,a,s,c),amount:(0,Xt.Dh)(t.costAfterDiscounts.amount)}))),f=t&&"available_total"===t?.status&&0!==t?.totalDuty.amount?[{label:l.duties,amount:(0,Xt.Dh)(t.totalDuty.amount)}]:[],h=n&&"available_total"===n.status&&0!==n.totalTax.amount?[{label:l.taxes,amount:(0,Xt.Dh)(n.totalTax.amount)}]:[],g=o&&o.lines.map((e=>{if((0,Ie.g8)(e))return{label:e.title,amount:(0,an.Sd)((0,Xt.Dh)(e.amount.amount))}})).filter((e=>void 0!==e))||[],y=r?.lines.filter((e=>"giftCard"===e.method.type)).map((e=>{if(e.cost)return{label:l.giftCards,amount:(0,an.Sd)((0,Xt.Dh)(e.cost.amount))}})).filter((e=>void 0!==e))||[],v=i&&i.lines[0],E=v&&v.amount.amount>0?[{label:l.tip,amount:(0,Xt.Dh)(v.amount.amount)}]:[],b=d?d.map((e=>({label:e,amount:"0.00",type:"pending"}))):[],_=b.length>0&&u?[{label:u,amount:"0.00",type:"pending"}]:[];return[...p,...m,...f,...h,...g,...y,...E,...b,..._]}function rn(e,t,n,a,o){const r=o[t.methodType];return 1===n.length?r:`${r} (${a[e.type]})`}function ln(e,t,n){const a=(n||[]).filter(Ke.aZ).map(Xt.it);return(0,Xt.LC)(a).filter((e=>e.length>0)).map((n=>({label:dn(n,e,t),amount:un(n),detail:mn(n,t),identifier:(0,Xt.JG)(n)})))}const sn=", ";function cn(e,t){switch(e.length){case 0:case 1:return e.join("");case 2:return t(e[0],e[1]);default:return t(e.slice(0,e.length-1).join(sn),e[-1])}}function dn(e,t,n){const a=e.find((e=>e.deliveryLine.type===Fe.i.OneTimePurchase));let o="";a&&(o=a.methodType===Oe.l.PickUp?t[a.methodType]:a.title);const r=e.find((e=>e.deliveryLine.type===Fe.i.Subscription));let i="";if(r){if(r.methodType===Oe.l.PickUp||r.methodType===Oe.l.Local)return r.title;i=r.title,o=a?.title??""}return cn([...new Set([o,i])].filter(Boolean),n)}function un(e){return(0,Xt.Dh)(e.reduce(((e,t)=>e+t.costAfterDiscounts.amount),0))}function pn(e,t){return e.add(t),e}function mn(e,t){return cn([...e.map((e=>{const{methodType:t,pickupLocation:n,deliveryPromisePresentmentTitle:a,description:o}=e;return t===Oe.l.PickUp||t===Oe.l.PickupPoint?function(e){if(e){const{address1:t="",address2:n="",city:a="",company:o="",zoneCode:r="",countryCode:i=""}=e;return[o,[t,n].filter(Boolean).join(" "),a,r,i].filter(Boolean).join(", ")}}(n?.address)??"":a?a.short:o||""})).reduce(pn,new Set)],t)}function fn(e,t){return{label:e,amount:(0,Xt.Dh)(t.amount)}}function hn(e){const t={firstName:e.givenName||void 0,lastName:e.familyName||void 0,address1:e?.addressLines?.[0],address2:e?.addressLines?.[1]||void 0,city:e.locality||void 0,postalCode:e.postalCode||void 0,zoneCode:e.administrativeArea||e.subLocality||void 0,countryCode:yn(e.countryCode),phone:e.phoneNumber||void 0};return t.countryCode===nn.C.Hk&&(t.postalCode=void 0,t.zoneCode=e.postalCode),t.lastName||(t.lastName=t.firstName),t}function gn(e){return(0,Xt.u7)(hn(e))}function yn(e){return e?.toUpperCase()||nn.C.Zz}function vn(e){const t=e.match(/ (\d+)$/);if(t)return t[1]}var En=n(14565);const bn=()=>{const e=(0,o.q)(),{name:t}=(0,S.L)(),n=e("order_summary.recurring_total_tooltip","N'inclut pas les frais d'expédition, les taxes, les frais de douane ou les réductions applicables."),r=(0,a.useMemo)((()=>({total:t,subtotal:e("order_summary.subtotal_label","Sous-total"),duties:e("order_summary.duties_label","Frais de douane"),taxes:e("order_summary.taxes_label","Taxes"),giftCards:e("order_summary.gift_card_label","Carte-cadeau"),tip:e("order_summary.tip_label","Pourboire")})),[t,e]),i=(0,a.useMemo)((()=>({[Fe.i.OneTimePurchase]:e("shipping.shipping_method_one_time_purchase_group_title","Achat unique"),[Fe.i.Subscription]:e("shipping.shipping_method_subscription_group_title","Abonnement")})),[e]),l=(0,a.useMemo)((()=>({[Oe.l.Shipping]:e("wallets.shipping_line_label","Expédition"),[Oe.l.Local]:e("shipping.local_delivery","Livraison locale"),[Oe.l.PickUp]:e("delivery_options.pick_up","Récupérer"),[Oe.l.PickupPoint]:e("delivery_options.pickup_point_method_definition","Expédier au point relais"),[Oe.l.Retail]:e("delivery_options.retail_method_definition","Expédition au détail"),[Oe.l.None]:e("delivery_options.none_method_definition","Aucune expédition")})),[e]),s=(0,a.useMemo)((()=>(t,n)=>e("wallets.connect_shipping_methods",{method1:t,method2:n},"{{method1}} et {{method2}}")),[e]);return(0,a.useMemo)((()=>({formattedRecurringTotalTooltip:n,lineItemsLabels:r,deliveryOptionGroupTypeLabels:i,deliveryMethodTitlePrefixes:l,connectTwoShippingTitles:s})),[n,r,i,l,s])};var _n=n(96827),kn=n(18841);const Cn=()=>{const{email:e,shippingAddress:t}=(0,I.gG)(),n=(0,Le.WL)(),o=(0,kn.zk)(),r=(0,ot.er)(),[,i]=(0,Ge.st)(),l=(0,L.xP)();return(0,a.useCallback)((({clearBuyerState:a}={clearBuyerState:!0})=>{o(),n||i(void 0),a&&(l.write(e,""),n||l.write(t,{city:void 0,address1:void 0,address2:void 0,company:void 0,firstName:void 0,lastName:void 0,name:void 0,phone:void 0,postalCode:void 0,coordinates:void 0,...r.defaultShippingDetails}))}),[r.defaultShippingDetails,n,e,t,o,i,l])},Pn=()=>{const e=(0,L.xP)(),t=(0,en.Ij)(),n=(0,Le.N3)(en.w3.ApplePay,t),o=Cn(),{inMemoryApplePayParts:r,activeWalletSessionAtom:i}=(0,xt.H)(),l=(0,_n.d)();return(0,a.useCallback)(((t,a)=>{const s=e.read(a).value;l.incrementCounter("apple_pay_on_cancel",1,new Map([["completion_in_progress",s.toString()]])),s?e.write(r.paymentSheetError,{type:"payment_cancelled_while_processing"}):(t.abort(),o(),e.write(i,!1)),n(en.RM.Cancelled)}),[i,o,r.paymentSheetError,e,n,l])};var wn=n(11336);class Sn extends Error{constructor(...e){super(...e),this.name="ApplePayAPIError"}}class An extends Error{constructor(...e){super(...e),this.name="AbortedSessionError"}}var In=n(39116),Ln=n(49008),Mn=n(47356),Tn=n(13229);class xn extends Ln.$F{constructor(e,t,n,a){super(),this.logger=e,this.translations=t,this.state=n,this.inMemoryApplePayParts=a}get negotiationResultMapper(){return new Ln.ex({success:({result:e,violationActions:t,defaultMapper:n})=>{if(!("errors"in e))return n();const{firstPaymentSheetAction:a}=this.getMergedPaymentSheetAction({resultViolations:e.errors,violationActions:t});return a||n()},invalid:()=>(this.logger.notify(new Sn("Intercepted negotiation returned invalid"),{severity:"error"}),{action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_negotiation_status"})}]}),stale:()=>(this.logger.notify(new Sn("Intercepted negotiation returned stale"),{severity:"error"}),{action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_negotiation_status"})}]}),denied:()=>({action:"abort"}),throttled:()=>({action:"abort"})},(()=>this.mapUnhandledNegotiation()),(()=>this.getNegotiationViolationActions()))}get completionResultMapper(){return new Ln.ex({success:({result:e,defaultMapper:t})=>"receipt"in e?{action:"submit"}:t(),rejected:({result:e,violationActions:t,defaultMapper:n})=>{const a="violations"in e;if(!a)return n();const o=a?e.violations:[];this.getUnhandledErrors(o,t).forEach((e=>{this.logger.notify(new Sn(`violation not handled: ${e.code}`),{severity:"error",errorClass:Zt.TR.Api})}));return this.getMergedPaymentSheetAction({resultViolations:o,violationActions:t}).generatePrioritizedPaymentSheetAction()||{action:"abort"}},invalid:()=>(this.logger.notify(new Sn("Intercepted negotiation returned invalid"),{severity:"error"}),{action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_completion_status"})}]}),stale:()=>(this.logger.notify(new Sn("Intercepted negotiation returned stale"),{severity:"error"}),{action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_completion_status"})}]}),fetch_failed:()=>({action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_completion_status"})}]}),alreadyCompleted:()=>({action:"abort"}),denied:()=>({action:"abort"}),throttled:()=>({action:"abort"})},(e=>this.mapUnhandledCompletion(e)),(()=>this.getCompletionViolationActions()))}validateBilling(e){const{billingContact:t}=e;return t?{shouldPersist:!0}:{shouldPersist:!1,paymentSheetAction:{action:"abort"}}}validateShipping(e,t,n,a,o){const{shippingContact:r}=e;if(!t)return{shouldPersist:!1};if(!r)return{shouldPersist:!1,paymentSheetAction:{action:"abort"}};const i=hn(r),l=[];return n&&!i.address2&&l.push(new ApplePayError("shippingContactInvalid","addressLines",this.translations.addressLine2Error)),a&&!i.firstName&&l.push(new ApplePayError("shippingContactInvalid","name",this.translations.firstNameBlank)),o&&!i.phone&&l.push(new ApplePayError("shippingContactInvalid","phoneNumber",this.translations.phoneBlank)),l.length>0?{shouldPersist:!1,paymentSheetAction:{action:"show_error",errors:l}}:{shouldPersist:!0}}getCompletionViolationActions(){return[{violations:[...Tn.lO],generateAction:()=>({action:"abort"})},{violations:Mn.w3,generateAction:()=>({action:"abort"})},{violations:[Tn.UD],generateAction:()=>({action:"abort"})},{violations:Mn.lW,generateAction:()=>({action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"unusable_partial_address"})}]})},{violations:Mn.OM,generateAction:()=>({action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"shipping_options_changed"})}]})},{violations:Mn.MG,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","emailAddress",this.translations.emailInvalidError)]})},{violations:Mn.mg,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.translations.firstNameBlank)]})},{violations:Mn.vW,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.translations.lastNameBlank)]})},{violations:Mn.R$,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.translations.addressLine1Blank)]})},{violations:Mn.g8,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.translations.addressLine2Blank)]})},{violations:Mn.mx,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.translations.cityBlank)]})},{violations:Mn.rN,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.translations.deliveryZoneBlank)]})},{violations:Mn.FU,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","country",this.translations.countryBlank)]})},{violations:Mn.qX,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.translations.postalCodeBlank)]})},{violations:Mn.w2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.translations.phoneBlank)]})},{violations:Mn.ik,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.translations.zoneNotFoundError)]})},{violations:[Ee.j.DeliveryInvalidPostalCodeForCountry,Ee.j.DeliveryInvalidPostalCodeForZone],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.translations.postalCodeInvalidError)]})},{violations:[Mn.Un],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.translations.firstNameTooLongError)]})},{violations:[Mn._Q],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.translations.lastNameTooLongError)]})},{violations:Mn.E7,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.translations.nameContainsEmojisError)]})},{violations:Mn.VL,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.translations.nameContainsEmojisError)]})},{violations:Mn.YG,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.translations.firstNameTooLongError)]})},{violations:Mn.v6,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.translations.lastNameTooLongError)]})},{violations:Mn.oc,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","administrativeArea",this.translations.zoneNotFoundError)]})},{violations:[Ee.j.PaymentsInvalidPostalCodeForCountry,Ee.j.PaymentsInvalidPostalCodeForZone],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.translations.postalCodeInvalidError)]})},{violations:Mn.zQ,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.translations.postalCodeEmojiError)]})},{violations:Mn.hv,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.translations.postalCodeNotSupportedError)]})},{violations:[Ee.j.PaymentsFirstNameRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.translations.firstNameBlank)]})},{violations:[Ee.j.PaymentsLastNameRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.translations.lastNameBlank)]})},{violations:[Ee.j.PaymentsAddress1Required],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",this.translations.addressLine1Blank)]})},{violations:[Ee.j.PaymentsCityRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","locality",this.translations.cityBlank)]})},{violations:[Ee.j.PaymentsPostalCodeRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.translations.postalCodeBlank)]})},{violations:[Ee.j.PaymentsCountryRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","country",this.translations.countryBlank)]})},{violations:[Ee.j.PaymentsZoneRequiredForCountry],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","administrativeArea",this.translations.deliveryZoneBlank)]})}]}mapUnhandledCompletion(e){return this.logger.notify(new Sn(`Intercepted completion returned unhandled status: ${e.status}`),{severity:"error",errorClass:Zt.TR.Api}),{action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"unhandled_completion_status"})}]}}getNegotiationViolationActions(){return[{violations:[Tn.UD],generateAction:()=>({action:"abort"})},{violations:[...Tn.lO],generateAction:()=>({action:"abort"})},{violations:Mn.ik,generateAction:()=>({action:"update",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.translations.zoneNotFoundError)]})},{violations:Mn.oc,generateAction:()=>({action:"update",errors:[new ApplePayError("billingContactInvalid","administrativeArea",this.translations.zoneNotFoundError)]})},{violations:Mn.OM,generateAction:()=>({action:"update",errors:[new ApplePayError("addressUnserviceable")]})},{violations:[Ee.j.DeliveryInvalidPostalCodeForCountry,Ee.j.DeliveryInvalidPostalCodeForZone],generateAction:()=>({action:"update",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.translations.postalCodeInvalidError)]})},{violations:[Ee.j.PaymentsInvalidPostalCodeForCountry,Ee.j.PaymentsInvalidPostalCodeForZone],generateAction:()=>({action:"update",errors:[new ApplePayError("billingContactInvalid","postalCode",this.translations.postalCodeInvalidError)]})}]}mapUnhandledNegotiation(){return{action:"update",errors:[]}}}function zn(){const e=(0,o.q)(),t=(0,Yt.I)(),n=(0,L.xP)(),{inMemoryApplePayParts:r}=(0,xt.H)(),i=(0,a.useMemo)((()=>({firstNameTooLongError:e("wallets.errors.formatting.first_name_too_long","Le prénom contient trop de lettres"),lastNameTooLongError:e("wallets.errors.formatting.last_name_too_long","Le nom contient trop de lettres"),nameContainsEmojisError:e("wallets.errors.formatting.name_contains_emojis","Supprimez l’emoji de votre nom"),zoneNotFoundError:e("wallets.errors.invalid.zone","Entrez un État/une province valide"),addressLine2Error:e("wallets.errors.missing.address2","Entrez un numéro d’appartement, de suite, etc."),emailInvalidError:e("wallets.errors.invalid.email","Entrez une adresse e-mail valide"),postalCodeInvalidError:e("wallets.errors.invalid.postal_code","Saisir un code postal valide"),postalCodeEmojiError:e("wallets.errors.formatting.postal_code_contains_emoji","Supprimez l’emoji de votre code postal"),postalCodeNotSupportedError:e("wallets.errors.unsupported.postal_code","Cet emplacement n’est pas pris en charge"),addressLine1Blank:e("wallets.errors.missing.address1","Entrez une adresse"),addressLine2Blank:e("wallets.errors.missing.address2","Entrez un numéro d’appartement, de suite, etc."),firstNameBlank:e("wallets.errors.missing.first_name","Entrez un prénom"),lastNameBlank:e("wallets.errors.missing.last_name","Entrez un nom"),cityBlank:e("wallets.errors.missing.city","Entrez une ville"),countryBlank:e("wallets.errors.missing.country","Sélectionnez un pays/une région"),deliveryZoneBlank:e("wallets.errors.missing.province","Sélectionnez un État/une province"),postalCodeBlank:e("wallets.errors.missing.zip","Entrez un code postal"),phoneBlank:e("wallets.errors.missing.phone","Saisir un numéro de téléphone")})),[e]);return(0,a.useMemo)((()=>new xn(t,i,n,r)),[i,r,t,n])}const Rn=()=>{const e=zn();return(0,a.useCallback)((t=>{if(!e.negotiationResultMapper)throw new Sn("NegotiationResultMapper not set up correctly");return e.negotiationResultMapper.mapResultToPaymentSheetAction(t)}),[e.negotiationResultMapper])},Nn=()=>{const e=(0,L.xP)(),t=(0,en.Ij)(),n=(0,Le.N3)(en.w3.ApplePay,t),o=(0,Yt.I)(),{activeWalletSessionAtom:r,inMemoryApplePayParts:i}=(0,xt.H)(),l=Cn();return(0,a.useCallback)((({session:t,isProcessing:a=!1,error:s})=>{if(!(s instanceof An)&&(n(en.RM.Failure),a||e.write(i.paymentSheetError,{type:"session_terminated"}),o.notify(s,{severity:"error",errorClass:Zt.TR.Api}),e.write(r,!1),t))try{t.abort()}catch{}finally{l()}}),[r,i.paymentSheetError,o,e,n,l])},qn=()=>{const{activeWalletSessionAtom:e}=(0,xt.H)(),t=(0,L.xP)(),n=Nn(),o=Cn(),r=Rn(),{negotiate:i}=(0,D.JL)(),l=(0,En.h)(),s=(0,ee.ii)(),{shippingRequired:c}=(0,re.Ry)(),d=(0,_n.d)(),{formattedRecurringTotalTooltip:u,lineItemsLabels:p,deliveryOptionGroupTypeLabels:m,deliveryMethodTitlePrefixes:f}=bn();return(0,a.useCallback)((async(a,h)=>{const{billingContact:g}=a.paymentMethod;!c&&g&&await i(void 0,{silenceValidations:!0,silenceViolations:["all"],fieldsToResolve:["duties","taxes"],customizeNegotiation:e=>((e,t)=>(0,Xt.ZD)(e,gn(t),In.S.ApplePay))(e,g),progression:!1,onComplete:n=>{if(!t.read(e).value)return void o();const a=r(n);a.effects?.forEach((e=>e())),"abort"===a.action&&(d.log(wn.in.Info,"[ApplePayButton.session.onpaymentmethodselected] session aborted due to blocking error",{errors:a.errors,session:h}),h.abort(),o())}}),h&&t.read(e).value&&function(){const{paymentDue:e,recurringTotals:t,...a}=(0,Xt.X8)(s);if(null==e)return n({session:h,error:new Sn("Missing negotiated payment due")});try{h.completePaymentMethodSelection({newTotal:fn(p.total,e),newLineItems:on({...a,formattedRecurringTotals:l(t),formattedRecurringTotalTooltip:u,lineItemsLabels:p,deliveryOptionGroupTypeLabels:m,deliveryMethodTitlePrefixes:f})})}catch(o){o instanceof Error&&(d.log(wn.in.Error,"[ApplePayButton.session.onpaymentmethodselected] session terminated due to error thrown",{error:o,session:h}),n({error:o,session:h}))}}()}),[e,o,f,m,l,u,r,p,i,s,c,t,d,n])},Bn=()=>{const e=Cn();return(0,a.useCallback)((({session:t,paymentSheetAction:n,onProceed:a})=>{switch(n.action){case"abort":t.abort(),e();break;case"update":a(n.errors);break;default:throw new Sn(`Missing handler for payment sheet action "${n.action}"`)}}),[e])};var Fn=n(76386),On=n(47940);const Dn=JSON.parse('{"id":"d9f071c731aecba22773de93d4a37b01327b6bb7efae9eeee0564b38f184ae28","name":"ApplePaySessionQuery","source":"query ApplePaySessionQuery($applePaySessionCreate:ApplePaySessionCreateInput,$pendingTask:PendingTaskInput){applePaySession(input:{applePaySessionCreate:$applePaySessionCreate,pendingTask:$pendingTask}){...on ApplePaySessionCreationSuccess{body id __typename}...on ApplePaySessionCreationFailed{code message __typename}...on PendingTask{taskId pollDelay __typename}__typename}}"}'),Gn=()=>{const e=(0,L.xP)(),t=Nn(),n=(0,kn.zk)(),{progress:o}=(0,D.JL)(),{checkoutSessionIdentifier:r}=(0,W.Lk)(),i=(0,ee.ii)(),l=(0,ot.er)(),s=(0,Le.ev)(),c=(0,ee.Zo)(),d=(0,re.Jw)(),u=(0,Le.FZ)(),p=(0,Le.w_)(Xe.F.ApplePay),{walletUsedForSubmissionAtom:m,activeWalletSessionAtom:f}=(0,xt.H)(),h=zn(),g=(()=>{const e=zn();return(0,a.useCallback)((t=>{if(!e.completionResultMapper)throw new Sn("CompletionResultMapper not set up correctly");return e.completionResultMapper.mapResultToPaymentSheetAction(t)}),[e.completionResultMapper])})(),y=Cn(),{email:v,shippingAddress:E,billingAddress:b,paymentLines:_}=(0,I.gG)();return(0,a.useCallback)((async(a,k,C)=>{function P(a,o){switch(o.effects?.forEach((e=>e())),o.action){case"submit":{const n=r&&p?.walletOrderTypeIdentifier&&p?.walletServiceUrl&&p?.walletAuthenticationToken?{status:ApplePaySession.STATUS_SUCCESS,orderDetails:{orderTypeIdentifier:p.walletOrderTypeIdentifier,orderIdentifier:r,webServiceURL:p.walletServiceUrl,authenticationToken:p.walletAuthenticationToken}}:ApplePaySession.STATUS_SUCCESS;try{a.completePayment(n)}catch(i){t({session:a,error:i,isProcessing:!0})}finally{e.write(f,!1)}e.write(m,Xe.F.ApplePay);break}case"show_error":{const n=(0,Ln.f9)(o),r={status:ApplePaySession.STATUS_FAILURE,errors:n};try{a.completePayment(r),0===r.errors.length?(e.write(f,!1),y()):y({clearBuyerState:!1})}catch(i){t({session:a,error:i})}break}case"abort":try{a.completePayment(ApplePaySession.STATUS_FAILURE),e.write(f,!1)}catch(i){t({session:a,error:i})}finally{n()}break;default:t({session:a,error:new Sn(`Missing handler for payment sheet action "${o.action}"`)})}}const w=l.isRequired("address2"),S=l.isRequired("firstName"),A=l.isRequired("phone"),{token:I,billingContact:L,shippingContact:M}=a.payment,T=h.validateBilling(a.payment);if(T.shouldPersist&&L){const t=hn(L);e.write(b,t)}if(T.paymentSheetAction)return void P(k,T.paymentSheetAction);const x=h.validateShipping(a.payment,s,w,S,A);if(x.shouldPersist&&M){u({postalCode:M.postalCode,countryCode:yn(M.countryCode),city:M.locality,zoneCode:M.administrativeArea||M.subLocality},Xe.F.ApplePay);const t=hn(M);e.write(E,t)}if(x.paymentSheetAction)return void P(k,x.paymentSheetAction);const z=c?.email??M?.emailAddress;z&&e.write(v,z);const R=i.state.read(i.current.fields.paymentDue).value;if(R&&R.amount>0||d){const t=e.read(_).value;e.write(_,(0,kn.JR)(t,{method:{type:"wallet",name:Xe.F.ApplePay,walletContent:{...I.paymentData,lastDigits:vn(I.paymentMethod.displayName),paymentMethodIdentifier:p?.paymentMethodIdentifier}}}))}e.write(C,!0),await o((e=>{const t=g(e);P(k,t)}),{skipToCompletion:!0}),e.write(C,!1)}),[l,h,s,c?.email,i,d,e,o,t,p?.walletOrderTypeIdentifier,p?.walletServiceUrl,p?.walletAuthenticationToken,p?.paymentMethodIdentifier,r,m,f,n,b,u,E,v,_,g,y])},jn=()=>{const e=Nn(),{inMemoryApplePayParts:t,activeWalletSessionAtom:n,telemetry:o}=(0,xt.H)(),r=(0,L.xP)(),i=Pn(),l=(()=>{const e=(0,L.xP)(),t=(0,Fn.a)(),{sourceId:n}=(0,W.Lk)(),o=(0,en.Ij)(),r=(0,Le.N3)(en.w3.ApplePay,o),i=Nn(),{activeWalletSessionAtom:l}=(0,xt.H)();return(0,a.useCallback)(((a,o,s)=>{let c;c=o===nn.C.Cn?"https://cn-apple-pay-gateway.apple.com/paymentservices/startSession":"https://apple-pay-gateway.apple.com/paymentservices/startSession",(async(e,t,n,a)=>{const o=async a=>{const{data:o,error:r}=await e.query(Dn,{cache:!1,variables:a?{pendingTask:{taskId:a}}:{applePaySessionCreate:{resourceId:t,validationUrl:n}}});if(r)throw new Sn(`ApplePaySession Query error: ${JSON.stringify(r,["type","message"])}`);if(!o)throw new Sn("ApplePaySession Query error: no data returned by GraphQL");return o};let r=0,i="";for(;;){if(a.aborted)throw new An;const{applePaySession:e}=await o(i);switch(e.__typename){case"ApplePaySessionCreationSuccess":return e;case"ApplePaySessionCreationFailed":throw new Sn(`ApplePaySession Query error: fail to create apple pay session with ${e.code}`);case"PendingTask":if(i=e.taskId,r+=1,r>=5)throw new Sn("ApplePaySession Query error: reached maximum amount of polls");await(0,an._v)(e.pollDelay);break;default:(0,On.mE)(e)}}})(t,n,c,s.signal).then((t=>{r(en.RM.Success);try{a.completeMerchantValidation(JSON.parse(t.body))}catch(n){if(e.read(l).value)throw n}})).catch((e=>{i({error:e,session:a})}))}),[l,t,n,e,i,r])})(),s=qn(),c=(()=>{const e=(0,L.xP)(),t=Nn(),n=Cn(),o=(0,En.h)(),r=Rn(),{negotiate:i}=(0,D.JL)(),l=(0,ee.ii)(),s=(0,Le.WL)(),[,c]=(0,Ge.st)(),{activeWalletSessionAtom:d}=(0,xt.H)(),{shippingAddress:u}=(0,I.gG)(),{formattedRecurringTotalTooltip:p,lineItemsLabels:m,deliveryOptionGroupTypeLabels:f,deliveryMethodTitlePrefixes:h}=bn(),g=Bn();return(0,a.useCallback)((async(a,y)=>{const v=e.read(u).value,E=(0,Xt.QM)(a.shippingMethod.identifier);c(E),await i(void 0,{silenceValidations:!0,silenceViolations:["all"],fieldsToResolve:["deliveryNext","duties","taxes"],progression:!1,customizeNegotiation:s?void 0:e=>(0,Xt.Yi)(e,v,In.S.ApplePay),onComplete:a=>{if(e.read(d).value)try{const e=r(a);e.effects?.forEach((e=>e())),g({session:y,paymentSheetAction:e,onProceed:()=>function(e){const{paymentDue:n,recurringTotals:a,...r}=(0,Xt.X8)(l);if(null==n)return t({session:e,error:new Sn("Missing negotiated payment due")});try{e.completeShippingMethodSelection({newTotal:fn(m.total,n),newLineItems:on({...r,formattedRecurringTotals:o(a),formattedRecurringTotalTooltip:p,lineItemsLabels:m,deliveryOptionGroupTypeLabels:f,deliveryMethodTitlePrefixes:h})})}catch(i){i instanceof Error&&t({error:i,session:e})}}(y)})}catch(i){i instanceof Error&&t({error:i,session:y})}else n()}})}),[d,n,h,f,o,p,r,g,s,m,i,l,u,c,e,t])})(),d=(()=>{const e=(0,L.xP)(),t=Nn(),n=Cn(),o=(0,En.h)(),r=Rn(),{negotiate:i}=(0,D.JL)(),l=(0,ee.ii)(),s=(0,Le.WL)(),[,c]=(0,Ge.st)(),{activeWalletSessionAtom:d}=(0,xt.H)(),{shippingAddress:u}=(0,I.gG)(),{formattedRecurringTotalTooltip:p,lineItemsLabels:m,deliveryOptionGroupTypeLabels:f,deliveryMethodTitlePrefixes:h,connectTwoShippingTitles:g}=bn(),y=Bn();return(0,a.useCallback)((async(a,v)=>{c(void 0);const E=gn(a.shippingContact);e.write(u,E),await i(void 0,{silenceValidations:!0,silenceViolations:["all"],fieldsToResolve:["deliveryNext","duties","taxes"],progression:!1,customizeNegotiation:s?void 0:e=>(0,Xt.Yi)(e,E,In.S.ApplePay),onComplete:a=>{const i=r(a);i.effects?.forEach((e=>e())),e.read(d).value?y({session:v,paymentSheetAction:i,onProceed:e=>function(e,n){const{paymentDue:a,recurringTotals:r,...i}=(0,Xt.X8)(l);if(null==a)return t({session:e,error:new Sn("Missing negotiated payment due")});try{e.completeShippingContactSelection({errors:n,newTotal:fn(m.total,a),newLineItems:on({...i,formattedRecurringTotals:o(r),formattedRecurringTotalTooltip:p,lineItemsLabels:m,deliveryOptionGroupTypeLabels:f,deliveryMethodTitlePrefixes:h}),newShippingMethods:ln(h,g,(0,Ke.$_)(i.deliveryNext).map((({line:e})=>e)))})}catch(s){s instanceof Error&&t({error:s,session:e})}}(v,e)}):n()}})}),[c,e,u,i,s,r,d,y,n,l,t,m,o,p,f,h,g])})(),u=Gn();return(0,a.useCallback)(((a,p)=>{r.write(t.paymentSheetError,void 0),r.write(n,!0),r.write(o.lastClickedWallet,Xe.F.ApplePay);const m=(0,R.cp)(!1),f=new AbortController;let h;try{h=new ApplePaySession(6,a)}catch(g){return void(g instanceof Error&&e({error:g}))}return h.oncancel=()=>i(f,m),h.onvalidatemerchant=()=>l(h,p,f),h.onpaymentmethodselected=e=>s(e,h),h.onshippingmethodselected=e=>c(e,h),h.onshippingcontactselected=e=>d(e,h),h.onpaymentauthorized=e=>u(e,h,m),h}),[n,t.paymentSheetError,i,u,s,d,c,l,r,o.lastClickedWallet,e])},Vn=e=>{const t=(0,he.Q)().shop.country.code,n=(0,Yt.I)(),o=(0,ee.ii)(),r=(0,en.Ij)(),i=(()=>{const e=(0,ee.ii)(),t=(0,ot.er)().isRequired("phone"),n=(0,Le.ev)(),o=(0,Le.rm)(),r=(0,ee.Zo)(),i=(0,En.h)(),{value:l}=(0,re.vu)(),{paymentDue:s,recurringTotals:c,...d}=(0,Xt.X8)(e),u=bn();return(0,a.useCallback)(((e,a)=>{const{requiredShippingContactFields:p,requiredBillingContactFields:m}=function({phoneRequired:e,emailRequired:t,shippingRequired:n}){const a=["name","postalAddress"],o=[...e?["phone"]:[],...t?["email"]:[]];return{requiredShippingContactFields:n?[...a,...o]:o,requiredBillingContactFields:a}}({phoneRequired:t,emailRequired:o,shippingRequired:n}),f=fn(u.lineItemsLabels.total,s),h=function(e){const t={};return e?.email&&(t.emailAddress=e.email),e?.phone&&(t.phoneNumber=e.phone),t}("CustomerProfile"===r?.__typename?r:void 0),g=on({...d,formattedRecurringTotals:i(c),...u}),y=ln(u.deliveryMethodTitlePrefixes,u.connectTwoShippingTitles,l);return{total:f,currencyCode:s.currencyCode,countryCode:a,lineItems:g,shippingMethods:y,shippingType:"shipping",merchantCapabilities:["supports3DS"],supportedNetworks:e,requiredShippingContactFields:p,requiredBillingContactFields:m,shippingContact:h,billingContact:h}}),[r,l,o,i,u,d,s,t,c,n])})(),l=jn(),s=(0,Le.N3)(en.w3.ApplePay,r),[,c]=(0,Kt.X)();return(0,a.useCallback)((()=>{const{paymentDue:a}=(0,Xt.X8)(o);if(!a)return s(en.RM.Failure),c({type:"session_terminated"}),void n.notify(new Sn("Missing paymentDue"),{severity:"error",errorClass:Zt.TR.Api});const r=i(e,t),d=l(r,t);d?.begin()}),[i,l,t,n,o,c,e,s])};function Hn({supportedNetworks:e,color:t}){const n=(0,o.q)(),r=(0,Ft.b)(),i=Vn(e);return a.default.createElement("button",{className:Qt()(tn.ApplePayButton,tn[t]),lang:r,onClick:i,type:"button","aria-label":n("wallets.call_to_action",{walletName:n("brand.apple_pay","Apple Pay")},"Payer avec {{walletName}}")})}var Un=n(70773);const $n=(0,de.L)({load:()=>(0,ue.R)((()=>Promise.all([n.e(866),n.e(926)]).then(n.bind(n,45187)))),id:()=>45187});function Wn(){return a.default.createElement(Un.X,{id:"GooglePay"},a.default.createElement($n,null))}var Jn=n(84637),Qn=n(95923),Zn=n(97977);const Xn={small:"2px",base:"5px",large:"10px",fullyRounded:"36px"};var Kn=n(87343),Yn=n(44578);const ea=n.p+"058138c2e3b386b0b20f.png",ta={ShopCashRewardMessaging:"MZlR0",ShopCashRewardMessagingBadge:"Si6bV",ShopCashRewardMessagingRibbon:"rnbTs",ShopCashRewardMessagingCoin:"qSlFM",ShopCashRewardMessagingRibbonWithFold:"F1tEg",t6:"lpF9r",t1:"MTHQt",t3:"pKATV",t2:"nwppz",t4:"hTUj_",t5:"iyACQ"};function na({variant:e}){const t=(0,a.useRef)(null),{cornerRadius:n,global:{cornerRadius:o},primaryButton:{cornerRadius:r}}=(0,Zn.G)(),i=r||o||"base",l={none:0,small:n.small??parseInt(Xn.small,10),base:n.base??parseInt(Xn.base,10),large:n.large??parseInt(Xn.large,10),fullyRounded:parseInt(Xn.fullyRounded,10)}[i],s=Qt()(ta.ShopCashRewardMessaging,e===Et.Wy.Treatment4?ta.ShopCashRewardMessagingBadge:[ta.ShopCashRewardMessagingRibbon,l<11&&ta.ShopCashRewardMessagingRibbonWithFold],ta[e]);switch(e){case Et.Wy.Treatment1:return a.default.createElement(a.default.Fragment,null,a.default.createElement(Yn.I,{size:"medium"}),a.default.createElement("span",{ref:t,className:s},"Earn 1%",a.default.createElement("span",{className:ta.ShopCashRewardMessagingCoin},a.default.createElement(Kn.E,{source:ea,accessibilityDescription:"Shop Cash"}))));case Et.Wy.Treatment2:return a.default.createElement(a.default.Fragment,null,a.default.createElement(Yn.I,{size:"medium"}),a.default.createElement("span",{ref:t,className:s},"+1% Shop Cash"));case Et.Wy.Treatment3:case Et.Wy.Treatment4:return a.default.createElement(a.default.Fragment,null,a.default.createElement(Yn.I,{size:"medium"}),a.default.createElement("span",{ref:t,className:s},"Earn rewards"));case Et.Wy.Treatment5:return a.default.createElement(a.default.Fragment,null,a.default.createElement(Yn.I,{size:"medium"}),a.default.createElement("span",{ref:t,className:s},"Get Shop Cash"));case Et.Wy.Treatment6:return a.default.createElement(a.default.Fragment,null,a.default.createElement(Yn.I,{size:"medium"}),a.default.createElement("span",{ref:t,className:s},"1%",a.default.createElement("span",{className:ta.ShopCashRewardMessagingCoin},a.default.createElement(Kn.E,{source:ea,accessibilityDescription:"Shop Cash"}))));default:return a.default.createElement(Yn.I,{size:"medium"})}}const aa={Button:"KVEbf","Button--contrast":"LqPnM"},oa="shop-pay-button";function ra(){const{origin:e,prefix:t}=(0,te.U)(),n=(0,G.a)(),{id:o}=(0,S.L)(),r=(0,At.IX)(),i=(0,en.Ij)(),l=(0,X.sK)({foregroundColor:Qn.nx}),s=(0,Qn.t6)(),[,c]=(0,Le.GM)(),{variant:d}=Wt({enabled:!0}),u=(0,a.useCallback)((e=>{const t=parseInt((0,$.Bp)(o),10),a=(0,en.c)(en.w3.ShopifyPay,e,t,i);n?.recordImmediately(a),c(Xe.F.ShopPay)}),[o,n,i,c]),p=(0,a.useMemo)((()=>`${e}${t}?payment=shop_pay&redirect_source=direct_checkout_checkout${r?`&${r}`:""}`),[e,t,r]),m=Qt()(aa.Button,{[aa["Button--contrast"]]:!l&&!s});return a.default.createElement("a",{id:oa,href:p,className:m,"aria-label":"Shop Pay",onClick:()=>u(en.RM.Success)},a.default.createElement(na,{variant:d}))}const ia=(0,de.L)({load:()=>(0,ue.R)((()=>n.e(841).then(n.bind(n,10249)))),id:()=>10249});function la(){return a.default.createElement(Un.X,{id:"FacebookPay"},a.default.createElement(ia,null))}var sa,ca,da=n(9582);function ua(){return ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ua.apply(this,arguments)}const pa=function(e){return a.createElement("svg",ua({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 102 20"},e),sa||(sa=a.createElement("path",{fill:"#333e48",d:"M75.19 1.786c-.994 0-1.933.326-2.815.98v5.94c.896.683 1.82 1.023 2.774 1.023 1.932 0 2.899-1.32 2.899-3.96 0-2.655-.953-3.983-2.858-3.983zm-2.962-.277A5.885 5.885 0 0 1 73.93.444a4.926 4.926 0 0 1 1.85-.362c.672 0 1.282.127 1.827.383a3.763 3.763 0 0 1 1.387 1.108c.378.482.669 1.068.872 1.757.203.689.305 1.466.305 2.332 0 .88-.109 1.675-.326 2.385-.217.71-.522 1.314-.914 1.81a4.137 4.137 0 0 1-1.429 1.16 4.165 4.165 0 0 1-1.87.416c-1.26 0-2.346-.419-3.256-1.256v4.983c0 .284-.14.426-.42.426h-1.24c-.28 0-.42-.142-.42-.426V.827c0-.284.14-.426.42-.426h.925c.28 0 .441.142.483.426l.105.682zm13.194 8.37a4.21 4.21 0 0 0 1.45-.277 5.463 5.463 0 0 0 1.45-.81V6.62c-.35-.085-.719-.152-1.104-.202a8.8 8.8 0 0 0-1.124-.075c-1.583 0-2.374.617-2.374 1.853 0 .54.147.955.441 1.246.294.29.715.437 1.261.437zm-2.458-7.625-.158.053a.561.561 0 0 1-.179.033c-.182 0-.273-.128-.273-.384V1.38c0-.199.028-.337.084-.415.056-.078.169-.153.337-.224.448-.199 1-.359 1.66-.48.657-.12 1.316-.18 1.974-.18 1.33 0 2.311.277 2.942.83.63.554.945 1.413.945 2.577v7.284c0 .284-.14.426-.42.426h-.903c-.267 0-.42-.135-.463-.405l-.105-.702a5.74 5.74 0 0 1-1.67 1.022 4.908 4.908 0 0 1-1.817.362c-1.009 0-1.807-.288-2.395-.863-.589-.575-.883-1.345-.883-2.31 0-1.037.364-1.864 1.092-2.481.73-.618 1.71-.927 2.942-.927.784 0 1.667.12 2.647.362V3.852c0-.767-.168-1.307-.504-1.619-.336-.313-.925-.469-1.764-.469-.982 0-2.01.163-3.09.49zm14.16 10.84c-.379.98-.816 1.683-1.314 2.109-.496.426-1.144.639-1.943.639-.448 0-.847-.05-1.197-.15a.606.606 0 0 1-.336-.202c-.07-.093-.105-.237-.105-.437V14.5c0-.27.105-.405.315-.405.07 0 .175.014.315.043.14.028.33.043.567.043.532 0 .946-.128 1.24-.384.294-.255.56-.724.798-1.406l.4-1.086-4.056-10.137c-.098-.241-.146-.411-.146-.511 0-.17.097-.256.294-.256h1.26c.224 0 .378.036.463.106.083.072.167.228.251.47l2.942 8.263L99.708.976c.084-.24.168-.397.252-.469.084-.07.238-.106.462-.106h1.177c.196 0 .294.086.294.256 0 .1-.05.27-.147.51l-4.622 11.927M40.15 15.47c-3.761 2.814-9.216 4.31-13.912 4.31-6.583 0-12.51-2.466-16.996-6.572-.352-.322-.038-.763.385-.513 4.84 2.855 10.825 4.574 17.006 4.574 4.17 0 8.753-.877 12.971-2.691.636-.273 1.17.425.547.891"})),ca||(ca=a.createElement("path",{fill:"#333e48",d:"M41.717 13.657c-.482-.624-3.181-.296-4.394-.148-.368.044-.425-.281-.093-.517 2.153-1.533 5.682-1.09 6.092-.577.413.518-.108 4.104-2.127 5.816-.31.263-.605.122-.468-.225.455-1.15 1.471-3.724.99-4.349M37.429 2.06V.57A.365.365 0 0 1 37.8.193l6.59-.001c.21 0 .38.155.38.376v1.278c-.003.214-.18.494-.496.938L40.86 7.722c1.267-.03 2.607.163 3.757.818.26.148.33.367.35.582v1.59c0 .218-.237.472-.485.34-2.028-1.077-4.718-1.194-6.96.013-.23.124-.47-.126-.47-.345V9.209c0-.242.005-.656.246-1.024l3.953-5.75H37.81a.369.369 0 0 1-.38-.375M13.4 11.365h-2.005a.38.38 0 0 1-.358-.343L11.038.595a.38.38 0 0 1 .387-.375h1.866a.38.38 0 0 1 .365.35v1.36h.037C14.18.615 15.096 0 16.331 0c1.253 0 2.039.614 2.6 1.93C19.418.615 20.521 0 21.7 0c.842 0 1.758.351 2.32 1.141.635.878.505 2.15.505 3.27l-.002 6.58a.38.38 0 0 1-.387.374h-2.001a.378.378 0 0 1-.36-.374V5.463c0-.438.037-1.535-.056-1.952-.15-.703-.6-.9-1.179-.9-.486 0-.991.33-1.197.855-.206.527-.188 1.405-.188 1.997v5.527a.38.38 0 0 1-.386.375h-2.002a.379.379 0 0 1-.36-.374l-.001-5.528c0-1.163.186-2.874-1.235-2.874-1.44 0-1.384 1.668-1.384 2.874l-.001 5.527a.38.38 0 0 1-.387.375m37.059-9.236c-1.478 0-1.571 2.04-1.571 3.312 0 1.273-.02 3.993 1.552 3.993 1.554 0 1.628-2.194 1.628-3.532 0-.877-.038-1.93-.3-2.764-.224-.724-.673-1.01-1.31-1.01zM50.439 0c2.975 0 4.584 2.59 4.584 5.88 0 3.181-1.777 5.705-4.584 5.705-2.918 0-4.508-2.59-4.508-5.814C45.93 2.523 47.539 0 50.439 0zm8.441 11.365h-1.997a.379.379 0 0 1-.36-.374L56.52.561a.381.381 0 0 1 .386-.34L58.764.22c.175.009.32.13.356.291v1.595h.038C59.72.68 60.505 0 61.89 0c.898 0 1.778.329 2.339 1.229.524.834.524 2.237.524 3.247v6.561a.382.382 0 0 1-.385.328H62.36a.38.38 0 0 1-.357-.328V5.376c0-1.141.13-2.809-1.253-2.809-.487 0-.936.33-1.16.834-.281.636-.319 1.272-.319 1.975v5.614a.386.386 0 0 1-.39.375m-24.684.075a.41.41 0 0 1-.473.047c-.665-.56-.785-.82-1.149-1.354-1.1 1.136-1.879 1.477-3.304 1.477-1.687 0-3-1.055-3-3.166 0-1.65.882-2.77 2.138-3.32 1.087-.484 2.606-.572 3.769-.704v-.264c0-.484.037-1.055-.245-1.473-.243-.374-.712-.528-1.124-.528-.765 0-1.444.397-1.611 1.22-.035.183-.167.364-.348.374l-1.943-.214c-.164-.037-.346-.17-.299-.425C27.055.721 29.183 0 31.09 0c.975 0 2.25.263 3.018 1.011.975.924.881 2.155.881 3.497v3.165c0 .952.39 1.37.757 1.882.128.185.156.405-.007.54-.409.348-1.136.988-1.537 1.35l-.005-.005zm-2.02-4.953v-.44c-1.45 0-2.98.314-2.98 2.045 0 .88.45 1.473 1.218 1.473.562 0 1.069-.352 1.387-.923.394-.704.376-1.363.376-2.155zM7.926 11.44a.41.41 0 0 1-.473.047c-.667-.56-.786-.82-1.15-1.354C5.204 11.27 4.425 11.61 3 11.61c-1.688 0-3-1.055-3-3.166 0-1.65.88-2.77 2.137-3.32 1.087-.484 2.606-.572 3.768-.704v-.264c0-.484.038-1.055-.243-1.473-.244-.374-.713-.528-1.125-.528-.764 0-1.444.397-1.61 1.22-.036.183-.168.364-.35.374l-1.94-.214c-.165-.037-.347-.17-.3-.425C.783.721 2.911 0 4.818 0c.975 0 2.25.263 3.018 1.011.975.924.882 2.155.882 3.497v3.165c0 .952.39 1.37.756 1.882.128.185.157.405-.006.54a78.47 78.47 0 0 0-1.537 1.35l-.005-.005zm-2.02-4.953v-.44c-1.45 0-2.982.314-2.982 2.045 0 .88.45 1.473 1.219 1.473.562 0 1.069-.352 1.387-.923.394-.704.375-1.363.375-2.155z"})))},ma={AmazonPayClassicButton:"md7D4"};function fa(){const{id:e,currencyCode:t}=(0,S.L)(),n=(0,Ft.b)(),r=(0,o.q)(),i=(0,Yt.I)(),{value:l}=(0,ee.Lm)(),{value:s}=(0,ee.NO)(),c=(0,re.Jw)(),{checkoutSessionIdentifier:d,type:u}=(0,W.Lk)(),[,p]=(0,Le.GM)();return a.default.createElement("button",{className:Qt()(ma.AmazonPayClassicButton),lang:n,onClick:async()=>{p(Xe.F.AmazonPayClassic),await(0,da.xU)({logger:i,checkoutSessionIdentifier:d,sourceType:u,shopId:e,shopCurrency:t,buyerCurrency:l?.presentmentCurrency,countryCode:l?.countryCode,merchandiseLines:s,hasSellingPlan:c})},type:"button","aria-label":r("wallets.call_to_action",{walletName:r("brand.amazon_pay","Amazon Pay")},"Payer avec {{walletName}}")},a.default.createElement(pa,null))}var ha=n(91754),ga=n(93839),ya=n(91508),va=n(875),Ea=n(42635);const ba={Text:"bCAGz"};function _a(){const[e,t]=(0,a.useState)(!1),n=(0,o.q)(),{merchantPolicies:r}=(0,S.L)(),i=r?.find((e=>"subscription-policy"===e.handle)),l=a.default.createElement(p.x,{appearance:"subdued",size:"small"},n("payment.purchase_options_cancellation_policy_label","politique de résiliation")),s=i?a.default.createElement(m.r,{appearance:"monochrome",onPress:()=>t(!0)},l):l;return a.default.createElement(a.default.Fragment,null,a.default.createElement(p.x,{appearance:"subdued",size:"small"},a.default.createElement("div",{className:ba.Text},n("payment.purchase_options_agreement_label",{cancellation_policy_label:s},"Je comprends qu’un ou plusieurs articles de mon panier constituent un achat différé ou récurrent. En continuant, j’accepte la %{cancellation_policy_label} et vous autorise à facturer mon moyen de paiement aux prix, fréquences et dates indiqués sur cette page, jusqu’à ce que ma commande soit traitée ou que je l’annule, si cela est autorisé."))),i&&a.default.createElement(Ea.u_,{open:e,title:n("shop_policies.purchase_options_cancellation_policy","Politique de résiliation"),source:i.url,onClose:()=>t(!1),padding:!0}))}const ka=function(){const e=(0,o.q)();return a.default.createElement(Ea.u_,{open:!0,blocking:!0,accessibilityLabel:e("wallets.payment_in_progress_title","Paiement en cours")},a.default.createElement(s.E,{spacing:"loose",padding:"large200"},a.default.createElement(l.X,{level:1},e("wallets.payment_in_progress_title","Paiement en cours")),a.default.createElement(p.x,null,e("wallets.payment_in_progress_body","Votre paiement est en cours de traitement. Votre commande sera bientôt terminée."))))};function Ca({open:e,setOpen:t}){const n=(0,o.q)();return a.default.createElement(Ea.u_,{open:e,onClose:()=>t(!1),title:n("payment.preview_not_available.title","Aperçu non disponible"),padding:!0},a.default.createElement(p.x,null,n("payment.preview_not_available.content","Ne vous inquiétez pas, ce paiement express fonctionne pour vos clients.")),a.default.createElement(mt.G,{inlineAlignment:"end"},a.default.createElement(c.z,{onPress:()=>t(!1)},n("payment.preview_not_available.button","OK"))))}var Pa=n(11901);function wa(){const e=(0,o.q)(),t=(0,X.vQ)(),n=e("alternative_payment_method_banner.or","OU"),r=gt.bg.default(["large100","none","large300","none"]).when({viewportInlineSize:{min:"small"}},["large200","none"]),i=gt.bg.default(["large300","none","large300","none"]).when({viewportInlineSize:{min:"small"}},["large300","none","large300","none"]),l=t?r:i;return a.default.createElement(mt.G,{padding:l},a.default.createElement(Pa.i,null,a.default.createElement(Ze.a,{inlineAlignment:"center"},a.default.createElement(p.x,{appearance:"subdued"},n))))}const Sa={Header:"UxvQ2",Text:"aHlIb",StackWrapper:"lAHfA",SkeletonWrapper:"zYzn1",ready:"mRGKh",ButtonWrapper:"A35vI",disableIframe:"_BCnl",Stack:"_19K_",ShopPayEmphasis:"lRMEA",DrawerLink:"TMCjZ",InnerDrawerLink:"yQLpY",ShowVenmo:"bVLl7",DrawerHideButtons:"ik0Ix",WithLargerButtonGaps:"DZzJ2"},Aa="express-checkout-wallets-wrapper";function Ia({buttonCount:e,venmoStatus:t,children:n,waitUntilLoaded:r=!0,isInCheckoutEditorProfilePreview:i,withLargerButtonGaps:l}){const s=(0,X.vQ)(),c=function(e){const{shopPayEnabled:t}=(0,S.L)(),n=window.innerWidth;return n<=300?3:t&&n<=383?4:3===e&&!t&&n>=300&&n<383?3:5}(e),[d,f]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1);(0,a.useEffect)((()=>{f(e>=c)}),[e,c]),(0,a.useLayoutEffect)((()=>{g("not_eligible"!==t?.status&&"rendered"===t?.status)}),[t]);const E=(0,o.q)(),b=(0,ga.wJ)(),[_,k]=(0,Le.Qq)(),[,C]=(0,va.e)(),[P]=(0,Kt.X)(),w=(0,Le.gc)(),A=!!r&&w,I=(0,re.Jw)(),{walletPaymentMethods:L}=(0,xt.H)(),{id:M,shopPayEnabled:T}=(0,S.L)(),x=(0,kn.zk)(),z=(0,G.a)(),R=(0,en.Ij)();(0,en.W8)(L,e);const N=(0,a.useCallback)((t=>{const n=parseInt((0,$.Bp)(M),10),a=(0,en.OE)({state:en.RM.NascarDrawerOpen,shopId:n,nascarData:{...t,walletsRenderedCount:e},paymentMethods:L});z?.record(a)}),[M,z,e,L]),q=(0,ya.$)("failed"===b?.status&&"payment"===b.failure.type&&s?b?.failure:void 0);"failed"===b?.status&&(_!==Xe.F.ApplePay&&_!==Xe.F.GooglePay&&_!==Xe.F.FacebookPay||C(q)),(0,a.useEffect)((()=>{"failed"===b?.status&&"payment"===b.failure.type&&x()}),[b,b?.status]),(0,a.useEffect)((()=>function(){k(void 0),C(void 0)}),[]);const B=E("alternative_payment_method_banner.express_checkout","Paiement express");return a.default.createElement(a.default.Fragment,null,a.default.createElement(mt.G,null,a.default.createElement("div",{className:Sa.Container},a.default.createElement("div",{className:Qt()(Sa.Header)},a.default.createElement("span",{className:Sa.Text},a.default.createElement(p.x,{appearance:"subdued"},B))),a.default.createElement("div",{className:Qt()(Sa.StackWrapper)},a.default.createElement(La,{ready:!A,hideWallets:d},[...Array(e).keys()].filter(((e,t)=>t<=3)).map((e=>a.default.createElement(ha.O,{key:e})))),a.default.createElement("div",{id:Aa,className:Qt()(Sa.Stack,Sa.ButtonWrapper,{[Sa.ready]:!A,[Sa.DrawerHideButtons]:d,[Sa.ShopPayEmphasis]:T,[Sa.ShowVenmo]:h,[Sa.WithLargerButtonGaps]:l,[Sa.disableIframe]:i}),onClickCapture:e=>{e.target?.id!==oa&&i&&e.target?.id!==Aa&&(e.stopPropagation(),e.preventDefault(),v(!0))}},n),d&&a.default.createElement("div",{className:Sa.DrawerLink},a.default.createElement(m.r,{onPress:()=>{f(!1),N(R)}},a.default.createElement("div",{className:Sa.InnerDrawerLink},a.default.createElement(p.x,null,E("alternative_payment_method_banner.show_more_options","Afficher plus d’options")),a.default.createElement(u.JO,{source:"chevronDown",display:"inline",size:"extraSmall"})))),I&&a.default.createElement(_a,null))),a.default.createElement(wa,null)),i&&a.default.createElement(Ca,{open:y,setOpen:v}),"payment_cancelled_while_processing"===P?.type&&a.default.createElement(ka,null))}function La({children:e,ready:t,hideWallets:n}){const[o,r]=(0,a.useState)(!0),{shopPayEnabled:i}=(0,S.L)();return o?a.default.createElement("div",{className:Qt()(Sa.Stack,Sa.SkeletonWrapper,{[Sa.ready]:t,[Sa.ShopPayEmphasis]:i,[Sa.DrawerHideButtons]:n}),onTransitionEnd:()=>{t&&r(!1)}},e):null}const Ma=e=>e;function Ta(){const e=(0,ie.m)("simulated"),t=(0,o.q)(),{walletPaymentMethods:n}=(0,xt.H)(),{buttonCount:r,venmoStatus:i}=(0,Rt._)(),l=(0,Tt.M)(),s=n.some((e=>e.name===Xe.F.PaypalExpress&&e.venmoEnabled)),c=(0,ye.wd)(),d=(0,Le.cI)(),[u]=(0,L.KO)(ne.IW),m=n.some((e=>e.name===Xe.F.ShopPay)),{needsLargerButtonGaps:f}=Wt({enabled:d&&m}),h=(0,At.Lr)("Checkout::Dynamic::Render",Mt.M.Wallets1),g=!e&&!u;let y=n.map((e=>a.default.createElement(xa,{key:e.name,method:e,triggerProgression:c})));if(l&&s){const e=a.default.createElement(Jn.x,{fundingSource:"venmo",buttonColor:"blue",progressToNextStep:c});y=[...y,e]}const v=d&&0!==n.length?a.default.createElement(a.default.Fragment,null,a.default.createElement(b._,{extensions:h,spacing:"large200",render:Ma}),h.length>0&&a.default.createElement(zt.c,{spacing:"large200"}),a.default.createElement(Ia,{buttonCount:r,venmoStatus:i,waitUntilLoaded:g,isInCheckoutEditorProfilePreview:u,withLargerButtonGaps:f},e&&a.default.createElement(mt.G,{padding:"large200",cornerRadius:"base",blockAlignment:"center",inlineAlignment:"center",minInlineSize:"fill",className:"QXKQS"},a.default.createElement(p.x,null,t("payment.simulated_checkout","Aperçu bientôt disponible"))),!e&&y)):null;return a.default.createElement(a.default.Fragment,null,v)}function xa({method:e,triggerProgression:t}){const n=(0,Le.CW)();switch(e.name){case Xe.F.ApplePay:return a.default.createElement(Hn,{supportedNetworks:e.supportedNetworks,color:n});case Xe.F.PaypalExpress:return a.default.createElement(Jn.x,{progressToNextStep:t});case Xe.F.ShopPay:return a.default.createElement(ra,null);case Xe.F.GooglePay:return a.default.createElement(Wn,null);case Xe.F.FacebookPay:return a.default.createElement(la,null);case Xe.F.AmazonPayClassic:return a.default.createElement(fa,null);case Nt.P3.AmazonPay:return a.default.createElement(Bt,null);default:return null}}var za=n(84987),Ra=n(47981),Na=n(99034),qa=n(63238),Ba=n(25918),Fa=n(53621),Oa=n(91809),Da=n(99796);function Ga(){const e=(0,o.q)()("contact.delivery_option_title","Mode de livraison"),t=(0,Ve.cz)(),n=(0,X.un)();return t?a.default.createElement(i.$,{accessibilityLabel:e},a.default.createElement(s.E,null,n?null:a.default.createElement(l.X,null,e),t)):null}var ja=n(39624),Va=n(13731);const Ha=()=>{const e=(0,X.un)(),t=(0,Va.m)(),n=!e&&!t,{prefetchShippingRatesEnabled:o}=(0,S.L)(),{negotiate:r}=(0,D.JL)(),{capturePrefetch:i}=Z();return(0,a.useCallback)((()=>{n&&o&&(i(H.Autocomplete),r(void 0,{include:["shippingAddress"],silenceValidations:!0,silenceViolations:["non-stock"],prefetch:!0}))}),[i,r,o,n])};var Ua=n(59572);function $a({addressErrors:e,additionalFieldGroups:t,settings:n,addressSettings:o}){const{shippingAddress:r}=(0,I.gG)(),[i]=(0,ye.LB)(),l=(0,ja.UU)(),s=Ha();return a.default.createElement(Ua.kS,{id:"shippingAddressForm",addressType:"shipping",addressErrors:e,address:r,countries:l,settings:n,additionalFieldGroups:t,loading:"loading"===i.status,onAddressAutoComplete:s,addressSettings:o})}var Wa=n(76874),Ja=n(9832),Qa=n(11229),Za=n(9966),Xa=n(1319);const Ka={timeout:8e3,enableHighAccuracy:!0};function Ya({onSuccess:e,onError:t,options:n=Ka}){const r=(0,o.q)(),{textField:{errorTypographyStyle:i}}=(0,Zn.G)(),[l,s]=(0,a.useState)(!1),[p,m]=(0,a.useState)(void 0),f=r("pickup_point.geolocation.shared_location_button","Utiliser mon emplacement"),h=r("pickup_point.geolocation.errors.unsuported_by_browser","La géolocalisation n'est pas prise en charge par votre navigateur. Réessayez ou utilisez un autre navigateur."),g=r("pickup_point.geolocation.errors.permission_not_allowed","Autorisez le partage de votre emplacement."),y=r("pickup_point.geolocation.errors.permission_denied","Impossible d'obtenir votre emplacement. Veuillez réessayer."),v=t=>{s(!1),e(t)},E=e=>{s(!1),m(3===e.code?y:g),t?.(e)};return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.z,{inlineSize:"fill",kind:"secondary",onPress:async function(){if(m(void 0),s(!0),navigator.permissions){const e=await navigator.permissions.query({name:"geolocation"});"granted"===e.state||"prompt"===e.state?navigator.geolocation.getCurrentPosition(v,E,n):m(y)}else navigator.geolocation?navigator.geolocation.getCurrentPosition(v,E,n):m(h)},loading:l},a.default.createElement(d.g,{blockAlignment:"center",spacing:"small400"},a.default.createElement(u.JO,{source:"geolocation"}),a.default.createElement(Ze.a,null,f))),p?a.default.createElement("span",{className:Qt()(i&&Za.Z[i])},a.default.createElement(Xa.b,null,p)):null)}var eo=n(43110),to=n(1791),no=n(20529),ao=n(93328),oo=n(98390);function ro({address:e,onInput:t,onSelect:n,value:o,country:r,hiddenFields:i=["firstName","lastName","company","zoneCode","countryCode","phone"],...l}){const{value:s,setValue:c}=(0,ao.o)({addressType:l.addressType,countryCode:r.code,initialAddressQuery:e.coordinates?(0,to.Tg)(e,r,i):o});return a.default.createElement(oo.w,(0,fe.Z)({onSelect:function(e){c((0,to.Tg)(e,r,i)),n&&n(e)},value:s,countryCode:r.code},l))}function io({onSearch:e,loading:t,addressAutoFocus:n,addressSettings:r}){const i=(0,o.q)(),{geolocation:l}=(0,he.Q)(),{shippingCountries:s,loading:d}=(0,ja.MF)(),{locationAddress:u}=(0,I.gG)(),p=(0,L.xP)(),m=(0,a.useMemo)((()=>(0,R.ej)({countryCode:void 0,address:void 0,zoneCode:void 0})),[]),f=(0,M.a8)(u.fields.countryCode,m.countryCode),h=(0,M.a8)(u.fields.zoneCode,m.zoneCode),g=(0,M.a8)(u.fields.postalCode,m.address),{details:y,loading:v}=(0,ja.J$)(f.value),E=(0,a.useMemo)((()=>y??l.country),[y,l.country]),[b]=(0,L.KO)(m.address),_=(0,a.useMemo)((()=>s?.length?s:[{value:E.code,label:E.name}]),[s,E]),k=(0,ot.er)(),C=(0,a.useMemo)((()=>r??k),[r,k]),P=(0,a.useMemo)((()=>(0,to.mt)(E,C)),[E,C]),w=v||d||t,S=!!f.value&&(0,no.h0)(f.value),A=i("pickup_point.search_button","Rechercher"),T=i("contact.address1_label","Adresse"),[x,z]=(0,a.useState)(""),N=(0,Wa.v9)(u);!function(e,t,n){const a=(0,o.q)(),r=(0,L.xP)(),i=(0,Yt.I)();(0,ge.$u)((async()=>{const o=r.read(e).value,l=new Map;return n||(0,M.Um)(o.postalCode)?o.coordinates||l.set("address",a("field_errors.address_address1_blank","Entrez une adresse")):l.set("address",a("field_errors.address_zip_blank","Entrez un code postal")),(0,M.Um)(o.countryCode)||l.set("countryCode",a("field_errors.address_country_blank","Sélectionner un pays/une région")),l.size?(i.leaveBreadcrumb("Blocking address errors",{errors:Array.from(l).map((([,e])=>e))}),{behavior:"block",reason:Ie.VO.UnknownReason,perform:()=>{for(const[e,n]of l)r.write(t[e],n)}}):{behavior:"allow"}}))}(u,m,S);const q=E.zones,B=p.read(u).value,F=(0,a.useCallback)((()=>{q.length||(B.zoneCode=void 0),e(B)}),[q,B,e]),O=(0,a.useMemo)((()=>P.some((({fields:e})=>e.includes("zoneCode")))&&q?.length>0),[P,q]);return a.default.createElement(K.l,null,a.default.createElement(K.T,null,a.default.createElement(eo.P,(0,fe.Z)({name:"countryCode",label:E.labels.country,options:_,required:!0,autocomplete:{group:"location",field:"country"},readonly:t},f,{onChange:e=>{z(""),N({countryCode:e})}})),O&&a.default.createElement(eo.P,(0,fe.Z)({name:"zone",label:E.labels.zone,placeholder:E.labels.zone,options:lo(q),required:!0,autocomplete:{group:"location",field:"address-level1"},readonly:t},h,{onChange:e=>{z(""),N({zoneCode:e,countryCode:f.value})}}))),a.default.createElement(Pe.E,{columns:["fill","auto"]},S?a.default.createElement(ro,{autoFocus:n,address:B,error:b,country:E,name:"location address",label:T,onSelect:e=>N(e),value:x,onInput:e=>{B.coordinates?N({zoneCode:h.value,countryCode:f.value}):z(e)},field:"address1"}):a.default.createElement(Ce.nv,(0,fe.Z)({autoFocus:n,name:"postalCode",label:E.labels.postalCode,required:!0,autocomplete:{group:"location",field:"postal-code"},readonly:t},g)),a.default.createElement(c.z,{disabled:Boolean(!B.coordinates&&x),onPress:F,loading:w},A)))}function lo(e){return e.map((e=>({label:e.name,value:e.code})))}var so=n(21261),co=n(48054),uo=n(62108);n(88690),n(60476);const po={Tabs:"qbjone6",TabList:"qbjone8 _1fragem19 _1fragem7",Tab:"qbjonea _1fragemah _1fragem19 _1fragem38 _1fragem4",TabPanel:"qbjonec",tabPanelBordered:"qbjoned",tabSelected:"qbjoneb"},mo=(0,uo.Q)("Tabs"),fo=(0,a.createContext)(null);function ho({tabs:e,selected:t,ariaLabel:n,bordered:o,onChange:r,children:i}){const l=(0,uo.M)(void 0,mo),s=(0,a.useRef)(null),c=e.length-1,d=a.Children.count(i),u=(0,a.useCallback)((e=>{const n=t-1<0?c:t-1,a=t+1>c?0:t+1,o=new Map([["ArrowLeft",n],["Left",n],["ArrowRight",a],["Right",a],["Home",0],["End",c]]).get(e.key);null!=o&&(e.preventDefault(),r(o))}),[r,t,c]);(0,a.useEffect)((()=>{const{current:e}=s;if(null!=e)return e.addEventListener("keydown",u,!1),()=>{e.removeEventListener("keydown",u,!1)}}),[s,u]),(0,a.useEffect)((()=>{d!==e.length&&console.warn(`<Tabs /> has ${e.length} tabs and ${d} children. A mismatch will cause some content to be unavailable.`)}),[d,e.length]);const p=[],m=[];a.Children.forEach(i,((n,o)=>{const i=e[o];if(null!=i){const{label:e,icon:n}="string"==typeof i?{label:i,icon:void 0}:i;p.push(a.default.createElement(go,{key:e,label:e,icon:n,selected:t,onChange:r,id:l,index:o}))}m.push(a.default.createElement(yo,{index:o},n))}));const f=(0,a.useMemo)((()=>({id:l,selected:t,bordered:o})),[l,t,o]);return a.default.createElement(fo.Provider,{value:f},a.default.createElement("div",{className:po.Tabs},a.default.createElement("div",{ref:s,role:"tablist","aria-label":n,className:po.TabList},p),m))}function go({label:e,icon:t,index:n,selected:o,onChange:r,id:i}){if(null==n)throw new so.j("`index` is missing");const l=(0,a.useRef)(null),s=(0,a.useRef)(!1),c=o===n,p=null==t?e:a.default.createElement(d.g,{spacing:"small400",blockAlignment:"center"},a.default.createElement(u.JO,{source:t}),a.default.createElement("span",null,e)),m=(0,co.z)();return(0,a.useEffect)((()=>{l.current&&c&&s.current?l.current.focus():s.current=!0}),[l,c]),a.default.createElement("button",{type:"button",role:"tab","aria-selected":c,id:`${i}Tab${n}`,"aria-controls":`${i}TabPanel${n}`,onClick:()=>r(n),className:Qt()(po.Tab,c&&po.tabSelected),ref:l,tabIndex:m?-1:void 0},p)}function yo({index:e,children:t}){const{selected:n,id:o,bordered:r}=function(){const e=(0,a.useContext)(fo);if(null==e)throw new so.j("No tabs found in context");return e}(),i=n===e;return a.default.createElement("div",{role:"tabpanel",id:`${o}TabPanel${e}`,"aria-labelledby":`${o}Tab${e}`,hidden:!i,className:Qt()(po.TabPanel,r&&po.tabPanelBordered)},t)}var vo=n(21850);const Eo={colissimo:{mapLogo:n.p+"1e7271e4849a261ddaab.svg",fullLogo:n.p+"d369c28f6e488feb3e0e.svg",pin:n.p+"f40918fc61b5a04d4a7a.svg"},mondial_relay:{mapLogo:n.p+"4978e813462243e8b8d5.svg",fullLogo:n.p+"e36d79825c7c19fe161e.svg",pin:n.p+"9251f5243a4b210a5be0.svg"},chronopost:{mapLogo:n.p+"c4e55806e7bf639ac3c8.svg",fullLogo:n.p+"be400a0f65e8839494a9.svg",pin:n.p+"e7f47a364ae2db94c7bb.svg"}},bo=n.p+"c0b02582b5a271ce4f3e.svg",_o={PickupPointMap:"YG_zD"};var ko=function(e){return e[e.ActiveMarker=1001]="ActiveMarker",e[e.BuyerMarker=1e3]="BuyerMarker",e[e.InactiveMarker=0]="InactiveMarker",e}(ko||{});const Co=[{horizontal:15,vertical:0},{horizontal:-15,vertical:0},{horizontal:0,vertical:-15},{horizontal:0,vertical:-15}],Po=6378,wo=.002;function So({onPickupPointSelect:e}){const t=(0,L.xP)(),{pickupPoints:n,proposedPickupPoint:o}=(0,Ja.p)(),r=t.read(o).value?.handle,{locationAddress:i}=(0,I.gG)(),l=t.read(i.fields.coordinates).value,s=[],c=n.map(((e,t)=>{const n=e.pickupLocation,a=r===e.handle,o=a?(i=n.carrierCode,Eo[i].pin):function(e){return Eo[e].mapLogo}(n.carrierCode);var i;const l=a?{width:68,height:78}:{width:40,height:40},c={latitude:n.address.coordinates?.latitude||0,longitude:n.address.coordinates?.longitude||0},d=function(e,t){const n={latitude:0,longitude:0},a=t.filter((t=>Math.abs(t.latitude-e.latitude)<wo&&Math.abs(t.longitude-e.longitude)<wo)).length;if(0===a)return n;const o=Math.min(a,Co.length)-1,r=Co[o];return n.longitude=r.horizontal/1e3/Po*(180/Math.PI)/Math.cos(e.latitude*Math.PI/180),n.latitude+=r.vertical/1e3/Po*(180/Math.PI),n}(c,s);return s.push(c),{title:n.name,label:n.carrierName,blockInfoWindow:!0,position:{lat:c.latitude+d.latitude,lng:c.longitude+d.longitude},zIndex:a?ko.ActiveMarker:ko.InactiveMarker,image:o,style:l,id:e.handle,notInBounds:!a&&t>5,clusterable:!a}})),d={lat:l?.latitude??0,lng:l?.longitude??0};c.push({id:"buyer",image:bo,notInBounds:!1,position:d,style:{width:36,height:36},blockInfoWindow:!0,clusterable:!1,zIndex:ko.BuyerMarker});const u={clustererOptions:{averageCenter:!0,clusterClass:"pickup_point_map__cluster",styles:{height:32,width:32,textColor:"#ffffff",textSize:16,textLineHeight:32,fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"}},mapOptions:{gestureHandling:"greedy",scrollwheel:!0,center:c.find((e=>e.id===r))?.position||d,boundsPadding:0,panToCenter:!0,maxZoom:19,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#737373"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#f0f0f0"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#e6e6e6"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#d0ecd3"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{saturation:-100}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{saturation:-100}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{saturation:-100}]},{featureType:"transit",elementType:"labels.icon",stylers:[{saturation:-100},{lightness:15}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#d1e6f5"}]}]}};return a.default.createElement(vo.D,{className:_o.PickupPointMap,markers:c,title:"Shopify HQ",mapId:"test_map_id",onMarkerSelect:e,options:u})}var Ao=n(18638),Io=n(60691),Lo=n(40483);const Mo={Rates:"wKsVx",RateEntry:"JtD_u",Carrier:"Axp5F",LocationName:"qqHQg",LocationAddress:"orOHC",carrierLogo:"DGH4r"};function To({businessHours:e}){const t=(0,Ao.qM)(),n=(0,o.q)(),{geolocation:r}=(0,he.Q)(),i=(0,a.useMemo)((()=>(0,Io.k8)(r?.country.code)),[r]),l=(0,Io.Q5)(i),c={};l.forEach((t=>{c[Io.Jc[t]]=e.filter((e=>e.day===Io.Jc[t].toUpperCase()))}));const u=[],m=[];return l.forEach((e=>{if(u.push(a.default.createElement(p.x,{key:Io.Jc[e],appearance:"subdued",size:"small"},t(Io.Jc[e].toLowerCase()),":")),0===c[Io.Jc[e]].length)m.push(a.default.createElement(p.x,{appearance:"subdued",size:"small"},n("pickup_point.location_is_currently_closed","Fermé")));else{let t="";c[Io.Jc[e]].forEach((e=>{t=`${t}${""===t?"":", "}${e.openingTime} - ${e.closingTime}`})),m.push(a.default.createElement(p.x,{appearance:"subdued",size:"small"},t))}})),a.default.createElement(s.E,{spacing:"small400"},a.default.createElement(Ze.a,null,n("pickup_point.business_hours","Heures d'ouverture")),a.default.createElement(d.g,null,a.default.createElement(s.E,{spacing:"none"},u),a.default.createElement(s.E,{spacing:"none"},m)))}function xo({pickupPoint:e,displayExtraDetails:t}){const n=(0,Lo.n)(),{pickupLocation:o}=e,r=(0,Wa.Bn)(o.address,{hiddenFields:["countryCode"]});return a.default.createElement(s.E,{spacing:"small200"},a.default.createElement(Qe.T,{spacing:"small400",columns:["75%","25%"]},a.default.createElement(s.E,{spacing:"none"},a.default.createElement(Ze.a,null,a.default.createElement("span",{className:Mo.LocationName},o.name?.toLowerCase())),a.default.createElement(Ze.a,{appearance:"subdued",size:"small"},a.default.createElement("span",{className:Mo.LocationAddress},r?.toLowerCase()))),a.default.createElement(s.E,{spacing:"none"},a.default.createElement(Ze.a,{emphasis:"bold",inlineAlignment:"end"},n(e.cost.amount,{form:"short",currency:e.cost.currencyCode})))),a.default.createElement("div",{className:Mo.Carrier},o.carrierCode&&a.default.createElement("div",{className:Mo.carrierLogo},a.default.createElement("img",{src:(i=o.carrierCode,Eo[i].fullLogo),alt:o.carrierName,height:"24"}))),t&&a.default.createElement(a.default.Fragment,null,a.default.createElement(To,{businessHours:o.businessHours})));var i}const zo={Paginator:"qA_tR",PaginatorCaption:"SzkIc",Button:"tYVCC"};function Ro({page:e,pageCount:t,currentPageLabel:n,onPageChange:r,firstPage:i=1}){const l=(0,o.q)(),s=(0,a.useCallback)((t=>()=>{r(e+t)}),[e,r]),d=e<=i,p=e>=t+i-1;return a.default.createElement("div",{className:zo.Paginator},a.default.createElement("div",{className:zo.Button},a.default.createElement(c.z,{onPress:s(-1),disabled:d,kind:"plain",inlineSize:"fill"},a.default.createElement(u.JO,{source:"arrowLeft",appearance:d?"subdued":void 0,accessibilityLabel:l("pickup_point.paginator.next_accessibility_label","Page suivante")}))),a.default.createElement("div",{className:zo.PaginatorCaption},a.default.createElement(Ze.a,null,n)),a.default.createElement("div",{className:zo.Button},a.default.createElement(c.z,{onPress:s(1),disabled:p,kind:"plain",inlineSize:"fill"},a.default.createElement(u.JO,{source:"arrowRight",appearance:p?"subdued":void 0,accessibilityLabel:l("pickup_point.paginator.previous_accessibility_label","Page précédente")}))))}const No={HeaderCaption:"Q7qtX"};function qo({pickupPoints:e,index:t}){const n=(0,o.q)(),r=(0,L.xP)(),{proposedPickupPoint:i,setProposedPickupPoint:l}=(0,Ja.p)(),[,s]=(0,a.useState)(""),c=(0,a.useCallback)((e=>{l({pickupPointHandle:e[0]}),s(e[0])}),[l,s]),d=r.read(i).value?.handle,u=(0,a.useCallback)((t=>{const n=e.findIndex((e=>e.handle===t));return Math.floor(n/6)+1}),[e]),[p,m]=(0,a.useState)(d?u(d):1),f=(0,a.useCallback)((e=>{m(e)}),[]),h=(0,a.useMemo)((()=>e.slice(6*(p-1),6*p)),[e,p,6]),g=Math.ceil(e.length/6),y=6*(p-1)+1,v=Math.min(6*p,e.length);(0,a.useEffect)((()=>{d&&m(u(d))}),[d,u,t]);const E=0===e.length?n("pickup_point.no_pickup_points_found","Aucun point relais trouvé"):n("pickup_point.paginator.header",{first:y,last:v,count:e.length},{one:"Affichage de %{first} – %{last} point sur %{count}",other:"Affichage de %{first} – %{last} points sur %{count}",many:"Affichage de %{first} – %{last} points sur %{count}"}),b=0===e.length?n("pickup_point.no_pickup_points_found","Aucun point relais trouvé"):n("pickup_point.paginator.selected_page",{first:y,last:v,count:e.length},{one:"%{first} - %{last} de %{count} point",other:"%{first} - %{last} de %{count} points",many:"%{first} - %{last} de %{count} points"});return a.default.createElement(We.X,{id:"pickup-points-option-list",selectedItems:d?[d]:[],onChange:c},a.default.createElement("div",{className:No.HeaderCaption},a.default.createElement(Ze.a,null,E)),h.map((e=>a.default.createElement(Je.Wx,{key:e.handle,id:e.handle,label:e.pickupLocation.name||""},a.default.createElement(xo,{pickupPoint:e,displayExtraDetails:e.handle===d})))),a.default.createElement(Ro,{page:p,pageCount:g,currentPageLabel:b,onPageChange:f}))}const Bo={PickupPointSelectorBlock:"or2tk",PickupPointSelectorInnerBlock:"qZnfb"};function Fo({negotiating:e}){const t=(0,o.q)(),[n,r]=(0,a.useState)(0),i=(0,L.xP)(),[,l]=(0,a.useState)(null),{proposedPickupPoint:s,pickupPoints:c,setProposedPickupPoint:d}=(0,Ja.p)(),u=(0,a.useCallback)((e=>{d({pickupPoint:c[e-1]}),l(c[e-1]?.handle)}),[d,c]),p=(0,a.useCallback)((e=>{d({pickupPointHandle:e}),l(e)}),[d,l]),m=i.read(s).value,f=(0,a.useMemo)((()=>c.findIndex((e=>e.handle===m?.handle))+1),[c,m?.handle]);if(e)return a.default.createElement(Qa.t,{text:t("pickup_point.waiting_on_pickup_point_location_notice","Recherche de points relais en cours...")});const h=0===c.length?t("pickup_point.no_pickup_points_found","Aucun point relais trouvé"):t("pickup_point.paginator.selected_pickup_point_label",{pickup_point_index:f,count:c.length},{one:"%{pickup_point_index} de %{count} point",other:"%{pickup_point_index} de %{count} points",many:"%{pickup_point_index} de %{count} points"});return a.default.createElement(ho,{tabs:[{label:t("pickup_point.selector_tab_map","Carte"),icon:"map"},{label:t("pickup_point.selector_tab_list","Liste"),icon:"list"}],selected:n,onChange:r,ariaLabel:t("pickup_point.selector_tabs","Sélecteur de point relais")},a.default.createElement("div",{className:Bo.PickupPointSelectorBlock},a.default.createElement(So,{onPickupPointSelect:p}),m&&a.default.createElement("div",{className:Bo.PickupPointSelectorInnerBlock},a.default.createElement(xo,{pickupPoint:m,displayExtraDetails:!0})),a.default.createElement(Ro,{page:f,pageCount:c.length,currentPageLabel:h,onPageChange:u})),a.default.createElement(a.default.Fragment,null,a.default.createElement(qo,{pickupPoints:c,index:n})))}function Oo(){const e=(0,o.q)(),{geolocation:t}=(0,he.Q)(),n=(0,a.useRef)(!1),r=e("pickup_point.title","Point relais"),c=e("pickup_point.or","ou"),[d,u]=(0,a.useState)(1),[p,f]=(0,a.useState)(!1),{locationAddress:h}=(0,I.gG)(),g=(0,L.xP)().read(h).value,y=(0,Wa.v9)(h),{negotiate:v}=(0,D.JL)(),{pickupPoints:E,setProposedPickupPoint:_}=(0,Ja.p)(),[k,C]=(0,a.useState)(!0),[P,w]=(0,a.useState)(),S=(0,At.Lr)("Checkout::PickupPoints::RenderBefore"),A=(0,At.Lr)("Checkout::PickupPoints::RenderAfter"),M=(0,a.useCallback)((e=>{w((t=>t===e?void 0:t))}),[w]);(0,a.useEffect)((()=>(n.current=!0,()=>{n.current=!1})),[]);const[T,x]=(0,a.useState)(!1),z=(0,a.useCallback)((()=>{C(!1),x(!0),v(void 0,{include:["deliveryLines"],fieldsToResolve:["deliveryNext"],silenceViolations:["delivery-method"],onComplete:t=>{switch(t.status){case"success":case"error":if(n.current){x(!1);const n=e("pickup_point.no_pickup_points_near_you","Aucun point relais trouvé près de l'adresse sélectionnée");if(t.negotiated.deliveryNext)switch(t.negotiated.deliveryNext.status){case"filled":t.negotiated.deliveryNext.lines.length>0?(u(2),M(n)):(w(n),u(1));break;case"unavailable":w(n),u(1);break;default:(0,On.vE)(t.negotiated.deliveryNext)}}break;case"invalid":case"stale":case"denied":case"throttled":case"alreadyCompleted":break;default:(0,On.vE)(t)}}})}),[v,M,w,e]);(0,a.useEffect)((()=>{g.coordinates&&g.countryCode&&k&&(E&&E.length>0?u(2):z())}),[u,g,z,E,k]);const R=(0,a.useCallback)((e=>{y({zoneCode:t.zone?.code,countryCode:t.country.code,coordinates:{latitude:e.coords.latitude,longitude:e.coords.longitude}}),z()}),[t,y,z]),N=(0,a.useCallback)((t=>{y({zoneCode:t.zoneCode,countryCode:t.countryCode,coordinates:t.coordinates});const n=e("pickup_point.could_not_resolve_address","Votre adresse n'a pas pu être localisée. Réessayez ou utilisez une autre adresse.");t.coordinates?(z(),M(n)):w(n)}),[y,z,M,e]);Do(E.length>0);const q=0===E.length?e("pickup_point.no_pickup_points_near_location","Aucun point relais trouvé près de votre emplacement"):e("pickup_point.number_of_pickup_points_near_location",{count:E.length},{one:"%{count} point relais trouvé près de votre emplacement",other:"%{count} points relais trouvés près de votre emplacement",many:"%{count} points relais trouvés près de votre emplacement"});return a.default.createElement(i.$,{accessibilityLabel:r},a.default.createElement(s.E,null,a.default.createElement(l.X,null,r),a.default.createElement(b._,{extensions:S,options:{locationFormVisible:1===d}}),1===d&&!T&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Ya,{onSuccess:R}),a.default.createElement(Ze.a,{inlineAlignment:"center",appearance:"subdued"},c),a.default.createElement(io,{loading:!1,onSearch:N,addressAutoFocus:p}),P?a.default.createElement($e.j,{status:"warning",title:P}):null),2===d&&!T&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Ze.a,null,q," ",a.default.createElement(m.r,{onPress:()=>{u(1),f(!0),y({zoneCode:g.zoneCode,countryCode:g.countryCode,coordinates:void 0}),_({pickupPoint:void 0})}},e("pickup_point.change","Modifier"))),a.default.createElement(Fo,{negotiating:T})),T&&a.default.createElement(Qa.t,{text:e("pickup_point.waiting_on_pickup_point_location_notice","Recherche de points relais en cours...")}),a.default.createElement(b._,{extensions:A,options:{locationFormVisible:1===d}})))}function Do(e){const t=(0,Yt.I)();(0,ge.$u)((async({reason:n})=>"negotiation"===n||e?{behavior:"allow"}:(t.leaveBreadcrumb("Pickup point not selected"),{behavior:"block",reason:Ie.VO.UnknownReason,perform:()=>{}})))}var Go=n(30176),jo=n(61507),Vo=n(46773),Ho=n(59900),Uo=n(25781);function $o({titleHidden:e=!1}){const t=(0,o.q)();return a.default.createElement(a.default.Fragment,null,e?null:a.default.createElement(Uo.N,{size:"small",inlineSize:"large"},t("shipping.waiting_on_pickup_location_notice","Obtenir des emplacements de récupération disponibles…")),a.default.createElement(We.X,{id:"skeleton-loading",title:e?t("shipping.waiting_on_pickup_location_notice","Obtenir des emplacements de récupération disponibles…"):"",titleHidden:e,onChange:()=>{},selectedItems:[],loading:!0},[1,2].map((e=>a.default.createElement(Je.Wx,{disabled:!0,id:`${e}`,key:e},a.default.createElement(Je.Hj,null,a.default.createElement(s.E,{spacing:"none"},a.default.createElement(Uo.N,{inlineSize:"small"}),a.default.createElement(Uo.N,{inlineSize:"base"}))),a.default.createElement(Je.LB,null,a.default.createElement(s.E,{spacing:"none",inlineAlignment:"end"},a.default.createElement(Uo.N,{inlineSize:"small"}),a.default.createElement(Uo.N,{inlineSize:"base"}))))))))}function Wo({onSearch:e,searchOnSelect:t}){const n=(0,o.q)(),{geolocation:r}=(0,he.Q)(),{shippingCountries:i,loading:l}=(0,ja.MF)(),s=(0,L.xP)(),d=s.read((0,I.gG)().locationAddress).value,u=(0,L.yc)((()=>(0,to.LN)(d.address1?d:{countryCode:r.country.code}))),p=(0,a.useMemo)((()=>(0,R.ej)({countryCode:void 0,address:void 0})),[]),m=(0,M.a8)(u.fields.countryCode,p.countryCode),f=(0,M.a8)(u.fields.postalCode,p.address),{details:h,loading:g}=(0,ja.J$)(m.value),y=(0,a.useMemo)((()=>h??r.country),[h,r.country]),[v]=(0,L.KO)(p.address),E=(0,a.useMemo)((()=>i?.length?i:[{value:y.code,label:y.name}]),[i,y]),b=(0,a.useCallback)((e=>(0,to.Tg)(e,y,["company","firstName","lastName","phone","countryCode","zoneCode"])),[y]),_=y.zones,k=s.read(u).value,[C,P]=(0,a.useState)(b(k)),[w,S]=(0,a.useState)(void 0),A=g||l,T=!!m.value&&(0,no.h0)(m.value);!function(e,t,n){const a=(0,o.q)(),r=(0,L.xP)(),i=(0,Yt.I)();(0,ge.$u)((async()=>{const o=r.read(e).value,l=new Map;return n||(0,M.Um)(o.postalCode)?o.coordinates||l.set("address",a("field_errors.address_address1_blank","Entrez une adresse")):l.set("address",a("field_errors.address_zip_blank","Entrez un code postal")),(0,M.Um)(o.countryCode)||l.set("countryCode",a("field_errors.address_country_blank","Sélectionner un pays/une région")),l.size?(i.leaveBreadcrumb("Blocking address errors",{errors:Array.from(l).map((([,e])=>e))}),{behavior:"block",reason:Ie.VO.UnknownReason,perform:()=>{for(const[e,n]of l)r.write(t[e],n)}}):{behavior:"allow"}}))}(u,p,T);const x=(0,Wa.v9)(u),z=(t=k)=>{t.coordinates?(_.length||(t.zoneCode=void 0),S(""),e(t)):S(n("local_pickup.could_not_resolve_address","Votre adresse n’a pas pu être localisée. Réessayez ou utilisez une autre adresse"))},N=t?{source:"magnify",position:"end"}:void 0,q=T&&t,B=q?null:a.default.createElement(c.z,{disabled:Boolean(!k.coordinates||!C.length),onPress:z,loading:A},n("local_pickup.search_button","Trouver des boutiques")),F=q?["fill"]:["fill","auto"];return a.default.createElement(K.l,null,a.default.createElement(K.T,null,a.default.createElement(eo.P,(0,fe.Z)({name:"countryCode",label:y.labels.country,options:E,required:!0,autocomplete:{group:"location",field:"country"},readonly:A},m,{onChange:e=>{S(""),P(""),x({countryCode:e}),m.onChange(e)}}))),a.default.createElement(Pe.E,{columns:F},T?a.default.createElement(oo.w,{error:v||w,countryCode:y.code,name:"location address",label:n("contact.address1_label","Adresse"),onSelect:e=>{x(e),P(b(e)),t&&z(e)},value:C,onInput:e=>{k.coordinates?x({countryCode:m.value}):P(e)},field:"address1",icon:N}):a.default.createElement(Ce.nv,(0,fe.Z)({name:"postalCode",label:y.labels.postalCode,required:!0,autocomplete:{group:"location",field:"postal-code"},readonly:A},f,{error:f.error||w,icon:N})),B))}function Jo({locationFormVisible:e,toggleLocationFormVisibility:t,children:n,onLocationChange:o}){return(0,Ue.a)()?a.default.createElement(a.default.Fragment,null,n,a.default.createElement(Qo,{open:e,onModalClose:()=>t(!1),onLocationChange:o})):e?a.default.createElement(Zo,{onLocationChange:o}):n}function Qo({open:e,onModalClose:t,onLocationChange:n}){const r=(0,o.q)();return a.default.createElement(Ea.u_,{padding:!0,title:r("local_pickup.toggle_location","Modifier mon emplacement"),open:e,onClose:t,maxInlineSize:400},a.default.createElement(Zo,{onLocationChange:n,changeLocationOnSelect:!0}),a.default.createElement(mt.G,{minBlockSize:gt.bg.default(320).when({viewportInlineSize:{min:"small"}},120)}),a.default.createElement(c.z,{onPress:t,inlineSize:"fill",kind:"plain",size:"extraLarge"},r("local_pickup.cancel","Annuler")))}const Zo=({onLocationChange:e,changeLocationOnSelect:t,hideFormOnGeoCoordinatesShare:n})=>{const{geolocation:r}=(0,he.Q)(),{locationAddress:i}=(0,I.gG)(),l=(0,Wa.v9)(i),d=(0,o.q)(),[u,m]=(0,a.useState)(!0);return a.default.createElement(s.E,null,a.default.createElement(Ya,{onSuccess:t=>{n&&m(!1),l({zoneCode:r.zone?.code,countryCode:r.country.code,coordinates:{latitude:t.coords.latitude,longitude:t.coords.longitude}}),e(t)}}),u?a.default.createElement(s.E,null,a.default.createElement(Qe.T,{blockAlignment:"center",columns:["fill","auto","fill"]},a.default.createElement(Pa.i,{direction:"inline"}),a.default.createElement(mt.G,{padding:["none","base"]},a.default.createElement(p.x,{appearance:"subdued"},d("local_pickup.or","OU"))),a.default.createElement(Pa.i,{direction:"inline"})),a.default.createElement(Wo,{searchOnSelect:t,onSearch:t=>{l(t),e(t)}})):a.default.createElement(c.z,{inlineAlignment:"start",kind:"plain",onPress:()=>m(!0)},d("shipping.local_pickup.search_address","Rechercher l’adresse")))},Xo=5;let Ko=function(e){return e.Kilometers="KILOMETERS",e.Miles="MILES",e}({});function Yo(){const e=(0,o.q)(),t=(0,re.MW)(),n=e("delivery_options.pick_up_locations","Centres de retrait"),r=t&&a.default.createElement(Ze.a,null,e("delivery_options.subscription_pickup_information","Ce mode de livraison sera appliqué à tous les articles de cette commande ainsi qu'à toutes les futures commandes de cet abonnement."));return a.default.createElement(i.$,{accessibilityLabel:n},a.default.createElement(s.E,null,a.default.createElement(l.X,{level:2},n),r,a.default.createElement(er,null)))}function er(){const e=(0,o.q)(),{value:t}=(0,ee.j2)(),{negotiating:n}=(0,Ve.HD)(),r=(0,re.aJ)(),i=(0,Ue.a)(),l=(0,ae.w)(oe.Ei),d=a.default.createElement($o,null),[u,p]=(0,a.useState)(!1),{setFalse:m,toggle:f,value:h}=(0,Go.O)(!1),{locationAddress:g}=(0,I.gG)(),y=(0,L.Dv)(g),v=(0,Wa.Bn)(y)||"",{negotiate:E}=(0,D.JL)(),_=(0,jo.Vt)({base:!0,medium:!1}),k=(0,At.Lr)("Checkout::PickupLocations::RenderBefore"),C=(0,At.Lr)("Checkout::PickupLocations::RenderAfter"),P=()=>{p(!0),m(),E(void 0,{include:["deliveryLines"],fieldsToResolve:["deliveryNext"],silenceViolations:["delivery-method"],onComplete:()=>{p(!1)}})};if(n||u)return d;if(r){const{methods:t,type:n}=r,o=a.default.createElement(Ze.a,{appearance:"subdued"},e("local_pickup.location_information",{count:t.length,address:y.address1?v:e("local_pickup.your_location","votre emplacement")},{one:"Il y a %{count} boutique avec le produit en stock près de %{address}",other:"Il y a %{count} boutiques avec le produit en stock près de %{address}",many:"Il y a %{count} boutiques avec le produit en stock près de %{address}"})),d=null!==t[0]?.pickupLocation?.distanceFromBuyer,u=(i||l)&&d&&t.length>5?a.default.createElement(c.z,{kind:"plain",onPress:f},h?e("local_pickup.cancel","Annuler"):e("local_pickup.toggle_location","Modifier mon emplacement")):null;return a.default.createElement(s.E,null,a.default.createElement(b._,{extensions:k,options:{locationFormVisible:h}}),(o||u)&&a.default.createElement(Vo.rj,{spacing:_?void 0:"large500",columns:_?["fill"]:["fill","auto"],inlineAlignment:"start",blockAlignment:"start",rows:"auto"},o,u),a.default.createElement(Jo,{locationFormVisible:h,toggleLocationFormVisibility:m,onLocationChange:P},a.default.createElement(ar,{methods:t,type:n})),a.default.createElement(b._,{extensions:C,options:{locationFormVisible:h}}))}return"unavailable"===t?.status&&t?.hasNoDeliveryMethods?a.default.createElement(a.default.Fragment,null,a.default.createElement($e.j,{status:"critical"},e("order_summary.no_pickup_location","Le retrait n’est pas disponible pour cette commande. Veuillez choisir un autre mode de livraison.")),a.default.createElement(tr,null)):d}function tr(){return(0,D.n4)({active:!0}),null}function nr({instructions:e}){return a.default.createElement(mt.G,{maxInlineSize:200},a.default.createElement(Ze.a,{appearance:"subdued",size:"small"},e))}function ar({methods:e,type:t}){const n=(0,o.q)(),r=(0,Ft.b)(),i=(0,Lo.n)(),{negotiate:l}=(0,D.JL)(),d=(0,re.yx)(),u=(0,jo.Vt)({base:!0,medium:!1}),[m,f]=(0,Ge.G2)(t),{revealedMethods:h,amountLeft:g,allRevealed:y,revealMore:v}=function(e,t){const n=(0,a.useMemo)((()=>{if(e.length<=Xo)return e;const n=e.findIndex((e=>e.handle===t));if(n>=Xo){const t=[...e];return t.splice(n,1),t.unshift(e[n]),t}return e}),[e,t]),o=function(e){const{selectedDeliveryMethodHandle:t,methods:n=[]}=e||{},a=(0,G.a)(),o=(0,W.Lk)(),{id:r}=(0,S.L)(),i=(0,Ue.a)(),l=(0,ee.Zo)(),s=e=>e.handle===t,c=n.find(s)?.originLocation?.id,d=n.findIndex(s);return(e="checkout_pickup_change_buyer_location")=>a.record({schemaId:"local_pickup_checkout/3.1",payload:{eventType:e,checkoutToken:o.checkoutSessionIdentifier||"",shopId:parseInt((0,$.Bp)(r),10),locationId:c&&(0,$.Bp)(c),selectedLocationRank:d,userId:l?.id?parseInt((0,$.Bp)(l.id),10):void 0,numberLocationsFound:n.length||0,checkoutSurface:i?"shop_pay":"guest_checkout"}})}({methods:e,selectedDeliveryMethodHandle:t}),[r,i]=(0,a.useState)(n.slice(0,Xo)),l=n.length-r.length,s=r.length>=n.length;return{revealedMethods:r,amountLeft:l,allRevealed:s,revealMore:()=>{if(s)return;const e=n.slice(0,r.length+Xo);i(e),o("checkout_pickup_buyer_reveal_more")}}}(e,m),{setInverseGroupDeliveryMethodHandle:E,getInverseGroupDeliveryMethodHandle:b}=(0,Ge.FV)(e,t),_=(0,Ue.a)(),k=(0,a.useCallback)((([e])=>{if(f(e),d){const t=b(e);E(t)}l(void 0,{include:["deliveryLines","merchandiseLines"]})}),[d,f,b,E,l]),{optionList:{typographyStyle:C}}=(0,Zn.G)(),P=null==C;return a.default.createElement(s.E,null,a.default.createElement(We.X,{id:"local_pickup_methods",title:"",titleHidden:!0,selectedItems:m?[m]:[],onChange:k,controlHidden:!_&&1===h.length},h.map((({handle:e,cost:{amount:t,currencyCode:o},pickupLocation:l})=>{const{address:s,instructions:c,name:d,distanceFromBuyer:m}=l,f=((e,t)=>0===e?n("shipping.free_rate_label","Gratuit"):i(e,{currency:t}))(t,o),h=((e,t)=>{let n=e||"";if(t){const o=`(${function(e,t){const n=t&&(t.unit===Ko.Miles?"mi":"km");return[t&&t.value.toLocaleString(e,{minimumFractionDigits:0,maximumFractionDigits:1}),n].join(" ").trim()}(r,t)})`;n=a.default.createElement(a.default.Fragment,null,e," ",a.default.createElement(p.x,{appearance:"subdued"},o))}return n})(d,m),g=c&&(_||u),y=c&&!_&&!u;return a.default.createElement(Je.Wx,{id:e,key:e,label:d},a.default.createElement(Je.Hj,null,a.default.createElement(Ze.a,{style:C},h),a.default.createElement(Ze.a,{appearance:"subdued"},a.default.createElement(Ho.k,{address:s,textSize:"small",hiddenFields:["postalCode","countryCode","phone"]})),g&&a.default.createElement(nr,{instructions:c})),a.default.createElement("div",{style:{textAlign:"right"}},a.default.createElement(Je.LB,null,a.default.createElement(p.x,{emphasis:P?"bold":void 0,style:C},f),y&&a.default.createElement(nr,{instructions:c}))))}))),!y&&a.default.createElement(mt.G,{inlineAlignment:"end"},a.default.createElement(c.z,{inlineAlignment:"end",kind:"plain",onPress:v},n("local_pickup.reveal_more_label",{count:g},{one:"Voir %{count} emplacement de plus",other:"Voir %{count} emplacements de plus",many:"Voir %{count} emplacements de plus"}))))}var or=n(77962),rr=n(21899);const ir="business_customer_shipping_address_selector",lr="existing_shipping_address",sr="custom_shipping_address";function cr({existingShippingAddress:e,addressErrors:t,addressSettings:n}){const r=(0,o.q)(),l=(0,L.xP)(),{shippingAddress:c}=(0,I.gG)(),{negotiate:d}=(0,D.JL)(),{currentStep:u}=(0,D.cn)(),{resetAddressErrors:p}=(0,Wa.kO)(t),[m,f]=(0,a.useState)(!1),h=(0,to.RD)(l.read(c).value,e),[g,y]=(0,a.useState)(h?lr:sr),v=(0,a.useCallback)((async([t])=>{y(t),f(!0),t===sr?l.write(c,rr.O9):l.write(c,e),await d(u,{progression:!1,fieldsToResolve:["merchandiseLines","deliveryNext"],onComplete(){p(),f(!1)}})}),[u,e,d,c,p,l]);return(0,D.n4)({active:m}),a.default.createElement(i.$,null,a.default.createElement(s.E,null,a.default.createElement(We.X,{id:ir,selectedItems:[g],onChange:v},a.default.createElement(Je.Wx,{id:lr},a.default.createElement(Je.Hj,null,a.default.createElement(Ze.a,{emphasis:"bold"},a.default.createElement(Ho.k,{hiddenFields:["address2","phone","company","city","postalCode","zoneCode","countryCode","firstName","lastName"],address:e})),a.default.createElement(Ze.a,{appearance:"subdued"},a.default.createElement(Ho.k,{textSize:"small",hiddenFields:["phone","company","address1","firstName","lastName"],address:e})),a.default.createElement(Ze.a,{appearance:"subdued"},a.default.createElement(Ho.k,{textSize:"small",hiddenFields:["address2","phone","company","city","postalCode","zoneCode","countryCode","phone","company","address1"],address:e})))),a.default.createElement(Je.Wx,{id:sr,details:a.default.createElement(ft.w,{controlledBy:sr},a.default.createElement($a,{addressErrors:t,addressSettings:n}))},a.default.createElement(Je.Hj,null,a.default.createElement(Ze.a,{emphasis:"bold"},r("contact.different_shipping_address_label","Expédier vers une adresse différente")),a.default.createElement(Ze.a,{appearance:"subdued"},r("contact.different_shipping_address_text","Utiliser une adresse unique pour cette commande")))))))}function dr(){const e=(0,Ve.cz)(),t=(0,At.Lr)("Checkout::Dynamic::Render",Mt.M.Information3),n=e=>a.default.createElement(i.$,null,e);return a.default.createElement(s.E,{spacing:"large500"},a.default.createElement(Ga,null),e&&a.default.createElement(b._,{extensions:t,render:n}),a.default.createElement(ur,null),!e&&a.default.createElement(b._,{extensions:t,render:n}))}function ur(){const{method:e}=(0,Ve.HD)(),t=(0,o.q)(),n=(0,_.I)(),r=(0,Ra.E)(),c=(0,A.tT)(),d=(0,or.lz)(),u="inactive"!==r,f=n?.selectedCompanyLocation?.name,h=(n?.locationCount||0)>1,g=u&&f?t("contact.ship_to_company",{companyName:f},"Expédier à {{companyName}}"):t("delivery_options.shipping_address","Adresse d'expédition"),y=(0,At.Lr)("Checkout::DeliveryAddress::RenderBefore"),v=n?.shippingAddress,E=(0,He.fz)()?a.default.createElement(Ze.a,{appearance:"subdued"},t("contact.shipping_used_as_billing_notice","Cette adresse sera également utilisée comme adresse de facturation pour cette commande.")):null,k=v&&"hasValidShippingAddress"===r?a.default.createElement(cr,{existingShippingAddress:v,addressErrors:to.Mr,addressSettings:d}):a.default.createElement($a,{addressErrors:to.Mr,addressSettings:d}),C=u?a.default.createElement(Qe.T,{columns:["fill","auto"],spacing:"base"},a.default.createElement(s.E,{spacing:"extraTight"},a.default.createElement(l.X,null,g),!v&&a.default.createElement(p.x,{appearance:"subdued"},t("contact.different_shipping_address_text","Utiliser une adresse unique pour cette commande"))),h&&c&&a.default.createElement(s.E,{inlineAlignment:"end"},a.default.createElement(m.r,{to:c,accessibilityLabel:t("contact.change_company_location_link_label","Changer l’emplacement de l’entreprise")},a.default.createElement(p.x,null,t("contact.change_location_link_label","Changer d’emplacement"))))):a.default.createElement(a.default.Fragment,null,a.default.createElement(l.X,null,g),E);switch(e){case Oe.l.PickupPoint:return a.default.createElement(qa.l,{sectionId:Ba.A.PickupPoints},a.default.createElement(Oo,null));case Oe.l.PickUp:return a.default.createElement(qa.l,{sectionId:Ba.A.LocalPickup},a.default.createElement(Yo,null));default:return a.default.createElement(qa.l,{sectionId:Ba.A.ShippingAddressForm},a.default.createElement(i.$,{accessibilityLabel:g},a.default.createElement(s.E,null,C,a.default.createElement(b._,{extensions:y}),a.default.createElement(K.l,null,n?k:a.default.createElement(a.default.Fragment,null,a.default.createElement($a,{addressErrors:to.Mr}),a.default.createElement(pt,null),a.default.createElement(kt,null)))),a.default.createElement(pr,null)))}}function pr(){const e=(0,B.pF)(),t=(0,F.e)();return(0,D.lH)((n=>{"success"===n.type&&"progression"===n.negotiationStage&&(e("sectionComplete",{section:"deliveryAddress",timestamp:new Date}),t({type:"section_complete",section:"deliveryAddress"}))})),null}function mr(){const e=(0,o.q)(),{progress:t,progressing:n}=(0,D.JL)(),{shippingRequired:i}=(0,re.Ry)(),l=i?e("general.continue_to_shipping_method","Continuer vers l'expédition"):e("general.continue_to_payment_method","Continuer vers le paiement"),s=(0,It.ge)();(0,Lt.QL)(s);const c=(0,Lt.ME)(s,t);return a.default.createElement(a.default.Fragment,null,a.default.createElement(f.D,{hasError:!1},e("contact.title","Informations")),a.default.createElement(r.l,{onSubmit:c,disabled:n,implicitSubmit:l},a.default.createElement(za.v,{section:"contact"},a.default.createElement(hr,{shippingRequired:i}))),i?a.default.createElement(Oa.Q.Preload,null):a.default.createElement(Fa.F.Prefetch,null),a.default.createElement(v,{id:"Information"}))}const fr=e=>a.default.createElement(i.$,null,e),hr=(0,a.memo)((function({shippingRequired:e}){const t=(0,o.q)(),n=(0,re.Uc)(),{previousStep:r}=(0,wt.FU)(),{hasStorefront:m}=(0,S.L)(),f="inactive"!==(0,Ra.E)(),h=(0,Na.c)(),{showLoginLink:g,loginUrl:y}=(0,A.BP)(),v=t("contact.contact_method_title","Contact"),_=t("payment.billing_address_title","Adresse de facturation"),C=g?a.default.createElement(yr,{contactTitle:v,loginUrl:y}):a.default.createElement(l.X,{id:St.j},v),P=(0,At.Lr)("Checkout::Contact::RenderAfter"),w=(0,At.Lr)("Checkout::Dynamic::Render",Mt.M.Information1),I=(0,At.Lr)("Checkout::Dynamic::Render",Mt.M.Information2),L=(0,At.Lr)("Checkout::Dynamic::Render",Mt.M.Information3);return a.default.createElement(V,null,a.default.createElement(s.E,{spacing:"large200"},n.wallets()?a.default.createElement(qa.l,{sectionId:Ba.A.ExpressCheckout},a.default.createElement(Ta,null)):null),a.default.createElement(E.h8,null,a.default.createElement(E.Pj,null,a.default.createElement(Da.JO,null),a.default.createElement(b._,{extensions:w,render:fr}),a.default.createElement(i.$,{accessibilityLabel:v},a.default.createElement(s.E,null,C,f?a.default.createElement(k,null):a.default.createElement(qe,null),a.default.createElement(b._,{extensions:P,render:fr}))),a.default.createElement(b._,{extensions:I,render:fr}),e?a.default.createElement(st,null,a.default.createElement(dr,null)):a.default.createElement(a.default.Fragment,null,a.default.createElement(i.$,{accessibilityLabel:_},a.default.createElement(s.E,null,a.default.createElement(l.X,null,_),a.default.createElement(K.l,null,a.default.createElement(ct.N,null),a.default.createElement(pt,null),a.default.createElement(kt,null)))),a.default.createElement(b._,{extensions:L,render:fr})),h&&a.default.createElement(Pt.U,null)),a.default.createElement(E.r5,null,a.default.createElement(gr,null),m&&r.route&&a.default.createElement(E.ch,null,a.default.createElement(c.z,{to:r.route,kind:"plain",inlineSize:"fill",textDecoration:"none"},a.default.createElement(d.g,{spacing:"small200",blockAlignment:"center"},a.default.createElement(u.JO,{source:"chevronLeft",size:"small"}),a.default.createElement(p.x,null,r.label)))))))}));function gr(){const{progressing:e,prefetch:t,blocked:n}=(0,D.JL)(),{nextStep:o}=(0,wt.FU)(),{captureNegotiate:r}=Z();return a.default.createElement(E.qY,null,a.default.createElement(c.z,{disabled:n,submit:!0,loading:e,size:"large",inlineSize:"fill",onMouseEnter:()=>{r(),t()}},o.label))}function yr({contactTitle:e,loginUrl:t}){const n=(0,o.q)(),r=(0,ie.m)("simulated");return a.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",flexWrap:"wrap"}},a.default.createElement(l.X,{id:St.j},e),a.default.createElement(p.x,null,n("customer_account.have_an_account_label","Vous avez déjà un compte ?")," ",r?n("customer_account.sign_in_link_label","Ouvrir une session"):a.default.createElement(m.r,{to:t},n("customer_account.sign_in_link_label","Ouvrir une session"))))}},10678:(e,t,n)=>{n.d(t,{DO:()=>_,Em:()=>E,el:()=>b,fz:()=>k,kK:()=>v});var a=n(59748),o=n(28682),r=n(18427),i=n(52376),l=n(40431),s=n(86749),c=n(51224),d=n(55667),u=n(92163),p=n(6664),m=n(77962),f=n(87240),h=n(50716),g=n(47501),y=n(13194);function v(){const{value:e}=(0,i.j2)(),t=(0,l.$3)(e),n=(0,l.ji)(e),[,o]=(0,c.KO)((0,d.gG)().billingAddressOption);(0,a.useEffect)((()=>{(t||n)&&o("custom")}),[t,n,o])}function E(){const e=(0,c.xP)(),t=(0,p.I)(),n=t?.billingAddress,{isValid:o,isLoading:r}=(0,m._M)(),[i,l]=(0,c.KO)((0,d.gG)().billingAddressOption),{billingAddress:s}=(0,d.gG)();(0,a.useEffect)((()=>{o||r||!n||"billing"!==i||(e.write(s,n),l("custom"))}),[s,i,n,l,e,o,r])}function b(){const{shippingRequired:e}=(0,s.Ry)(),{value:t}=(0,i.j2)(),n=(0,l.$3)(t),a=(0,l.ji)(t),{isOrderEditCheckout:o}=(0,u.v)(),c=(0,r.a4)(),d=(0,r.T7)();return n||a||!o&&!e||o&&!c&&!d?"form":"selector"}function _(){const{billingAddress:e}=(0,d.gG)(),[t,n]=(0,c.KO)(e),r=(0,a.useCallback)((()=>{n((0,o.A4)(void 0,t.countryCode,t.zoneCode))}),[t,n]);return{billingAddress:t,clearBillingAddress:r}}function k(){const e=(0,y.L)(),t=(0,h.w)(g.v8),n=(0,c.Dv)((0,d.gG)().paymentLines),a=(0,p.I)(),{shippingRequired:o}=(0,s.Ry)(),{isOrderEditCheckout:r}=(0,u.v)();return t&&Boolean(e.requireMatchingShippingAndBilling)&&(0,f.r$)(n)&&o&&!r&&!a}},77962:(e,t,n)=>{n.d(t,{_M:()=>p,lz:()=>u,wG:()=>m});var a=n(59748),o=n(90961),r=n(88896),i=n(76874),l=n(6664),s=n(39624);const c=["countryCode","address1","city","zoneCode","postalCode"],d=["countryCode","lastName","company","address1","address2","city","zoneCode","postalCode"];function u(){const e=(0,o.er)();return(0,a.useMemo)((()=>({...e,isRequired:e=>c.includes(e),isVisible:e=>d.includes(e)})),[e])}function p(){const e=(0,l.I)(),t=u(),{billingCountries:n,loading:a}=(0,s.Yu)(),o=(0,r.z)(e?.billingAddress),c=(0,i.TC)(o?.countryCode,n,t);return{isValid:a?void 0:0===c(o,"billing").size,isLoading:a}}function m(){const e=(0,l.I)(),t=u(),{shippingCountries:n,loading:a}=(0,s.MF)(),o=(0,r.z)(e?.shippingAddress),c=(0,i.TC)(o?.countryCode,n,t);return{isValid:a?void 0:0===c(o,"shipping").size,isLoading:a}}},99034:(e,t,n)=>{n.d(t,{c:()=>o});var a=n(52376);function o(){const{value:e}=(0,a.my)();return Boolean(e)}},66397:(e,t,n)=>{n.d(t,{G3:()=>a,Wy:()=>o,iv:()=>r});let a=function(e){return e.Control="control",e.TestGroupA="test_group_a",e.TestGroupB="test_group_b",e.TestGroupC="test_group_c",e}({}),o=function(e){return e.Control="control",e.Treatment1="t1",e.Treatment2="t2",e.Treatment3="t3",e.Treatment4="t4",e.Treatment5="t5",e.Treatment6="t6",e}({}),r=function(e){return e.Control="control",e.InlinePrice="inline_price",e.StickyInlinePrice="sticky_inline_price",e}({})},49008:(e,t,n)=>{n.d(t,{$F:()=>i,ex:()=>r,f9:()=>l}),n(57658);var a=n(23084),o=n(47940);class r{constructor(e,t,n){this.actionMapper=e,this.defaultMapper=t,this.getViolationActions=n}mapResultToPaymentSheetAction(e){const t=e.status in this.actionMapper&&this.actionMapper[e.status];return t?t({result:e,violationActions:this.getViolationActions(),defaultMapper:()=>this.defaultMapper(e)}):this.defaultMapper(e)}}class i{getMergedPaymentSheetAction({resultViolations:e,violationActions:t}){const n=e.map((({code:e})=>e)),r={};t.forEach((e=>{e.violations.forEach((t=>{n.includes(t)&&(r[t]=e.generateAction)}))}));const i=e.find((e=>e.code in r));let l;return i&&(l=r[i.code]()),{firstPaymentSheetAction:l,generatePrioritizedPaymentSheetAction:()=>{let t;const i=(0,o.$d)()(["abort","show_error","submit","update"]),{generatedActions:l,allEffects:s,allErrors:c}=Object.keys(r).reduce(((e,t)=>{const n=r[t]();return n.effects&&e.allEffects.push(...n.effects),"submit"!==n.action&&n.errors&&e.allErrors.push(...n.errors),e.generatedActions.push({paymentSheetAction:n,violation:t}),e}),{generatedActions:[],allEffects:[],allErrors:[]}),d=e=>i.map((t=>e.find((e=>e.paymentSheetAction.action===t)))).find((e=>Boolean(e)));let u=d(l);const p=a.j.PaymentsUnacceptablePaymentAmount,m=void 0!==r[p]&&1===e.filter((e=>e.code===p)).length,f=n.filter((e=>e!==p&&void 0!==r[e])).length;return u&&m&&f>0&&(u=d(l.filter((e=>e.violation!==a.j.PaymentsUnacceptablePaymentAmount)))),u&&(t=u.paymentSheetAction,t.effects=s,"submit"!==t.action&&(t.errors=c)),t}}}getUnhandledErrors(e,t){const n=function(e){return e.flatMap((e=>e.violations))}(t);return e.filter((({code:e})=>!n.includes(e)))}}function l(e){return"errors"in e?e.errors??[]:[]}},70773:(e,t,n)=>{n.d(t,{X:()=>s});var a=n(51224),o=n(59748),r=n(91128),i=n(25275),l=n(38027);function s({id:e,children:t}){const n=(0,a.YC)(!1);return o.default.createElement(i.yP.Provider,{value:(0,o.useMemo)((()=>({id:e,completeStatusAtom:n})),[e,n])},t,o.default.createElement(c,null))}function c(){const e=(0,r.a)(i.yP),t=(0,a.Dv)(e.completeStatusAtom);return(0,l.cf)(e.id,!t),null}},29919:(e,t,n)=>{n.d(t,{WB:()=>u,yD:()=>f,Km:()=>c,M8:()=>p});var a=n(59748),o=n(55399),r=n(51224),i=n(68392),l=n(23084);const s=(0,n(91128).Q)("ShippingMethodsContext");function c(){const e=(0,a.useContext)(s);if(null!=e)return e}const d=()=>(0,o.k5)(((e,t)=>{switch(e){case"ignored":if("timeout"===t)return"idle";break;case"idle":if("countryChange"===t)return"debounced";if("otherAddressFieldChange"===t)return"ignored";break;case"debounced":switch(t){case"countryChange":return"debounced";case"otherAddressFieldChange":return"ignored";case"timeout":return"idle"}}}),"idle");function u(e,t){const n=(0,r.xP)(),o=(0,a.useMemo)(d,[e]),[i,l]=(0,r.KO)(o);(0,r.X_)(o,(({prevState:e,action:n})=>{"debounced"===e&&"timeout"===n&&t()})),(0,a.useEffect)((()=>n.subscribe(e.fields.countryCode,(()=>{l("countryChange")}))),[e.fields.countryCode,l,n]),(0,a.useEffect)((()=>{if("debounced"===i||"ignored"===i){const e=setTimeout((()=>{l("timeout")}),100);return()=>{clearTimeout(e)}}}),[l,i]),(0,a.useEffect)((()=>{const t=Object.keys(e.fields).filter((e=>"countryCode"!==e)).map((t=>n.subscribe(e.fields[t],(({value:e})=>{e&&l("otherAddressFieldChange")}))));return()=>{t.forEach((e=>e()))}}),[e.fields,l,n])}function p(e){const t=(0,i.Sd)();return(0,a.useMemo)((()=>{const n=t.some((({code:e})=>e===l.j.MerchandiseCartUpdatedBasedOnCountry||"TaxExemption"===e)),a=e.some((e=>e.hasDeliveryLineChange)),o=e.length>1||e.some((e=>e.methods?.length>1));return a&&!n&&o||!1}),[e,t])}const m=(0,o.cp)(!1);function f(){const[e,t]=(0,r.KO)(m);return t}},74577:(e,t,n)=>{n.d(t,{w:()=>d});var a=n(76874),o=n(51224),r=n(55667),i=n(59748),l=n(23641),s=n(49036),c=n(86749);function d(){const e=(0,l.n)(),{shippingRequired:t}=(0,c.Ry)(),n=(0,o.Dv)(s.q.selectedCreditCard),d=(0,o.Dv)((0,r.gG)().billingAddress),u=(0,o.Dv)((0,r.gG)().shippingAddress),p=(0,o.Dv)((0,r.gG)().billingAddressOption),m=(0,c.QJ)(),f=(0,o.Dv)(m?s.q.selectedFreeCheckoutBillingAddress:s.q.selectedNewCardBillingAddress),h=(0,o.Dv)(s.q.selectedShippingAddress),g=(0,i.useMemo)((()=>t?h?.address?h.address:u:null),[h,u,t]),y=(0,a.TC)(g?.countryCode,void 0,e),v=g?y(g,"shipping"):new Map,E=(0,i.useMemo)((()=>n?n.billingAddress.address:f?.address?f.address:"shipping"===p&&g?g:d),[d,p,f,g,n]),b=(0,a.TC)(E.countryCode,void 0,e)(E,"billing");return{selectedBillingAddress:E,selectedShippingAddress:g,billingAddressErrors:b,shippingAddressErrors:v}}},73774:(e,t,n)=>{n.d(t,{J:()=>o});var a=n(66259);function o(e){return e===a.C.Us}},30176:(e,t,n)=>{n.d(t,{O:()=>o});var a=n(59748);function o(e){const[t,n]=(0,a.useState)(e);return{value:t,toggle:(0,a.useCallback)((()=>n((e=>!e))),[]),setTrue:(0,a.useCallback)((()=>n(!0)),[]),setFalse:(0,a.useCallback)((()=>n(!1)),[])}}}}]);